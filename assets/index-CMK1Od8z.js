import{_ as e}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{t as a,i as t,j as l,F as s,q as n,C as o,h as d,A as u,r as i,v as r,y as c,T as p,z as v,g as m,s as y,k as g,D as f,p as _,x as b,M as k,H as w,G as h,w as x,E as D,o as j}from"./lib-BPhyYzwe.js";import{T}from"./TLoading-DaX5hBaF.js";import{o as C}from"./opInput-MRrx2hg-.js";import{l as I}from"./logo2-l66aD4rS.js";import{u as S,_ as P}from"./index-BPuUIeLS.js";import V from"./index-D07J4Ahj.js";import{u as A}from"./modelEditor-CkwFY-_5.js";import{g as O,a as L}from"./promptSetting-BkradiJE.js";import{m as U}from"./index-o30wH5gG.js";import{j as q,m as M,h as W,k as Y,n as z,q as E,r as N,u as R}from"./index-Z7iGqVdO.js";import{a as B}from"./dataWarehouse-E36yBjGC.js";import"./modelCard-BfBzYjwH.js";import"./file-C3RgH22k.js";import"./menu-B85Lp49n.js";const F={class:"page-count-body"},G={class:"page-count-inner"},H=["num"],$=e({__name:"pageCount",props:{pageData:{type:Array(),default:()=>[]},now:{type:Number,default:0}},emits:["addPage"],setup(e,{emit:i}){const r=i,c=e,p=a(c,"pageData"),v=a(c,"now");return(e,a)=>(d(),t("div",F,[l("div",G,[p.value.length>1?(d(!0),t(s,{key:0},n(p.value,((e,s)=>{return d(),t("div",{class:"page-count",style:u((n=s,n===v.value?{transform:"translateY(0rem)"}:n>v.value?{transform:"translateY(100%)"}:n<v.value?{transform:"translateY(-100%)"}:void 0)),key:s},a[1]||(a[1]=[l("div",{class:"page-count-line"},null,-1),l("label",null,null,-1)]),4);var n})),128)):o("",!0),v.value===p.value.length-1?(d(),t("div",{key:1,class:"add-btn",num:p.value.length,onClick:a[0]||(a[0]=e=>{r("addPage")})},a[2]||(a[2]=[l("div",{class:"page-count-line"},null,-1),l("label",null,"+",-1)]),8,H)):o("",!0)])]))}},[["__scopeId","data-v-95a86af8"]]),J=e({__name:"modelSelectedDialog",props:["type"],emits:["setData"],setup(e,{expose:l,emit:s}){const{publicStore:n}=S(),u=s,v=a(n,"isCarryOut"),m=i(!1),y=e=>{u("setData",e),m.value=!1};return l({init:()=>{m.value=!0}}),(a,l)=>(d(),r(p,{to:"body"},[m.value?(d(),t("div",{key:0,class:c(["model-selected-dialog-body",{expand:!v.value}])},[m.value?(d(),r(V,{key:0,componentType:"component",type:e.type,onSetData:y},null,8,["type"])):o("",!0)],2)):o("",!0)]))}},[["__scopeId","data-v-15493417"]]),K={class:"json-editor-body"},Q={class:"input-area"},X={key:1},Z={key:2,class:"image-area"},ee=["src"],ae={class:"add-image-area"},te=e({__name:"jsonEditor",props:{modelValue:{default:null},list:{default:!1}},emits:["update:modelValue"],setup(e,{expose:a,emit:u}){const p=k((()=>P((()=>Promise.resolve().then((()=>le))),void 0))),h=[{name:"文本",code:"text"},{name:"图片",code:"image"},{name:"字典",code:"map"},{name:"列表",code:"list"}],x=i([{key:"",code:null,value:null}]),D=u;v(x.value,(e=>{D("update:modelValue",e)}));const j=()=>{x.value.push({key:"",code:null,value:null})};return a({getData:()=>x.value}),(a,u)=>{const i=m("n-input"),v=m("n-button"),k=m("n-upload");return d(),t("div",K,[l("div",Q,[(d(!0),t(s,null,n(x.value,((a,m)=>(d(),t("div",{class:"input-group",key:m},[l("div",{class:c(["input-key",{list:e.list,unlist:!e.list}])},[e.list?(d(),t("label",X,y(m+1),1)):(d(),r(i,{key:0,value:a.key,"onUpdate:value":e=>a.key=e,placeholder:"键名称"},null,8,["value","onUpdate:value"]))],2),l("div",{class:c(["input-value",{list:e.list,unlist:!e.list}])},[a.code?o("",!0):(d(),t(s,{key:0},n(h,(e=>g(v,{class:"type-btn",key:e.code,onClick:t=>((e,a)=>{switch(e.code=a,a){case"text":e.value=null;break;case"image":case"map":case"list":e.value=[]}})(a,e.code)},{default:f((()=>[_(y(e.name),1)])),_:2},1032,["onClick"]))),64)),"text"===a.code?(d(),r(i,{key:1,value:a.value,"onUpdate:value":e=>a.value=e,placeholder:"请输入文本",type:"textarea"},null,8,["value","onUpdate:value"])):o("",!0),"image"===a.code?(d(),t("div",Z,[(d(!0),t(s,null,n(a.value,((e,a)=>(d(),t("div",{class:"image-item",key:`image-${a}`},[l("img",{src:e},null,8,ee)])))),128)),l("div",ae,[g(k,{"show-file-list":!1,accept:"image/*",action:"",onBeforeUpload:(...e)=>((e,{file:a})=>{const t=w(),l=new FormData;return l.append("file",a.file),A(t,l).then((a=>{200===a.code&&x.value[e].value.push(a.data)})),!1})(m,...e)},{default:f((()=>u[0]||(u[0]=[l("i",{class:"bi bi-plus"},null,-1)]))),_:2},1032,["onBeforeUpload"])])])):o("",!0),"map"===a.code?(d(),r(b(p),{key:3,class:"inline",modelValue:a.value,"onUpdate:modelValue":e=>a.value=e},null,8,["modelValue","onUpdate:modelValue"])):o("",!0),"list"===a.code?(d(),r(b(p),{key:4,list:!0,class:"inline",modelValue:a.value,"onUpdate:modelValue":e=>a.value=e},null,8,["modelValue","onUpdate:modelValue"])):o("",!0)],2)])))),128)),l("div",{class:c(["add-area",{list:e.list,unlist:!e.list}])},[l("label",{onClick:j},"+")],2)])])}}},[["__scopeId","data-v-0074aff2"]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"})),se={class:"model-selected-title"},ne={class:"model-selected-title-text"},oe={key:0,class:"other-data-area"},de={key:1,class:"selected-data-area"},ue={class:"card-tags"},ie=e({__name:"modelSelected",props:["type"],setup(e){const{publicStore:u}=S(),p=a(u,"isCarryOut"),v=i(null),b=i(null),k=i(0),w={prompts:"动态",statics:"静态",texts:"文字",colors:"调色板",designs:"设计理念"},x=i([]),D=()=>{v.value.init()},j=e=>{x.value.push(e)};return(a,u)=>{const i=m("n-button"),T=m("n-scrollbar"),C=m("n-image"),I=m("n-tag"),S=m("n-space");return d(),t("div",{class:c(["model-selected-body",{expand:!p.value}])},[l("div",se,[l("div",ne,[_(" 选择"+y(w[e.type])+"资源 ",1),0===k.value?(d(),r(i,{key:0,class:"set-data-btn",onClick:u[0]||(u[0]=e=>{k.value=1})},{default:f((()=>u[4]||(u[4]=[_(" 匹配数据编辑 ")]))),_:1})):o("",!0),1===k.value?(d(),r(i,{key:1,class:"set-data-btn",onClick:u[1]||(u[1]=e=>{k.value=0})},{default:f((()=>u[5]||(u[5]=[_(" 取消匹配数据编辑 ")]))),_:1})):o("",!0),1===k.value?(d(),r(i,{key:2,class:"set-data-btn",onClick:u[2]||(u[2]=e=>(b.value.getData(),void(k.value=0)))},{default:f((()=>u[6]||(u[6]=[_(" 保存数据 ")]))),_:1})):o("",!0)])]),1===k.value?(d(),t("div",oe,[g(T,{onWheel:u[3]||(u[3]=h((()=>{}),["stop"]))},{default:f((()=>[g(te,{ref_key:"jsonEditorRef",ref:b},null,512)])),_:1})])):o("",!0),0===k.value?(d(),t("div",de,[(d(!0),t(s,null,n(x.value,(e=>(d(),t("div",{class:"card",key:e.resource_id},[g(C,{width:"100%",src:e.preview,class:"image",fit:"contain"},null,8,["src"]),l("div",ue,[g(S,null,{default:f((()=>[g(I,{bordered:!1},{default:f((()=>u[7]||(u[7]=[_(" 家纺平面设计 ")]))),_:1}),g(I,{bordered:!1},{default:f((()=>u[8]||(u[8]=[_(" 卡通风格和可爱ins风 ")]))),_:1}),g(I,{bordered:!1},{default:f((()=>u[9]||(u[9]=[_(" 奶牛 ")]))),_:1}),g(I,{bordered:!1},{default:f((()=>u[10]||(u[10]=[_(" 胡萝卜 ")]))),_:1}),g(I,{bordered:!1},{default:f((()=>u[11]||(u[11]=[_(" 樱桃 ")]))),_:1}),g(I,{bordered:!1},{default:f((()=>u[12]||(u[12]=[_(" 莫兰蒂色 ")]))),_:1})])),_:1})])])))),128)),l("div",{class:"card",onClick:D},u[13]||(u[13]=[l("i",{class:"bi bi-plus"},null,-1)]))])):o("",!0),g(J,{type:e.type,ref_key:"modelSelectedDialogRef",ref:v,onSetData:j},null,8,["type"])],2)}}},[["__scopeId","data-v-46294ba3"]]),re={class:"other-data-area"},ce=e({__name:"generateDemandAnalysis",props:["type"],setup(e){const{publicStore:s}=S(),n=a(s,"isCarryOut");i(null);const o=i(null);return i(0),i([]),(e,a)=>{const s=m("n-scrollbar");return d(),t("div",{class:c(["model-selected-body",{expand:!n.value}])},[a[1]||(a[1]=l("div",{class:"model-selected-title"},[l("div",{class:"model-selected-title-text"}," 生成需求分析 ")],-1)),l("div",re,[g(s,{onWheel:a[0]||(a[0]=h((()=>{}),["stop"]))},{default:f((()=>[g(te,{ref_key:"jsonEditorRef",ref:o},null,512)])),_:1})])],2)}}},[["__scopeId","data-v-56d2449c"]]),pe={class:"other-data-area"},ve=e({__name:"generateText",setup(e){const{publicStore:s}=S(),n=a(s,"isCarryOut");return(e,a)=>{const s=m("n-input");return d(),t("div",{class:c(["model-selected-body",{expand:!n.value}])},[a[0]||(a[0]=l("div",{class:"model-selected-title"},[l("div",{class:"model-selected-title-text"}," 生成文本段落 ")],-1)),l("div",pe,[g(s,{type:"textarea",placeholder:"请输入文本段落",style:{height:"100%"},resize:"none"})])],2)}}},[["__scopeId","data-v-5c1fa973"]]),me={key:0,class:"selected-data-area"},ye={key:1,class:"selected-data-area"},ge=e({__name:"artWorkSelected",props:["type"],setup(e){const{publicStore:s}=S(),n=a(s,"isCarryOut"),u=i(null);i(null);const r=i(0),p=i([]),m=x(),y=i([]),f=i([]),_=i([]),b=i([]),k=i({template_filter:"nomal",template_level:"nomal",points:1}),w=i(!1),h=i(m.query.template_id?Number(m.query.template_id):null),j=i({canvasData:{name:m.query.file_name||"",width:2048,height:2048}}),C=i({groups:{},layers:{},elements:{}});v((()=>m.query.template_id),((e,a)=>{h.value=e,w.value=!1,D((()=>{w.value=!0}))}));const I=()=>{window.loading||(window.loading=T()),Promise.all([new Promise((e=>{O("colors").then((a=>{_.value=a.data,e()}))})),new Promise((e=>{O("texts").then((a=>{b.value=a.data,e()}))})),new Promise((e=>{O("prompts").then((a=>{y.value=a.data,e()}))})),new Promise((e=>{O("statics").then((a=>{f.value=a.data,e()}))})),new Promise((e=>{j.value.canvasData.name?L(h.value,"layouts",j.value.canvasData.name).then((a=>{j.value=Object.assign(j.value,a.data.viewData),C.value=a.data.layerData,k.value=a.info,e()})):e()}))]).then((()=>{w.value=!0,window.loading.close(),window.loading=null}))},P=()=>{u.value.init()},V=e=>{p.value.push(e),r.value=1,I()};return(a,s)=>(d(),t("div",{class:c(["model-selected-body",{expand:!n.value}])},[s[1]||(s[1]=l("div",{class:"model-selected-title"},[l("div",{class:"model-selected-title-text"}," 生成作品资源 ")],-1)),0===r.value?(d(),t("div",me,[l("div",{class:"card",onClick:P},s[0]||(s[0]=[l("i",{class:"bi bi-plus"},null,-1)]))])):o("",!0),1===r.value?(d(),t("div",ye,[g(U,{colorsList:_.value,textsList:b.value,editorType:"generate",promptsList:y.value,staticsList:f.value,setting:j.value,layerData:C.value,templateId:h.value,info:k.value},null,8,["colorsList","textsList","promptsList","staticsList","setting","layerData","templateId","info"])])):o("",!0),g(J,{type:e.type,ref_key:"modelSelectedDialogRef",ref:u,onSetData:V},null,8,["type"])],2))}},[["__scopeId","data-v-4e7bb434"]]),fe={key:0,class:"set-data-area"},_e={key:1,class:"init-area"},be=["onClick"],ke={class:"init-card-info"},we={class:"icon"},he={class:"name"},xe={class:"content"},De={class:"type"},je=e({__name:"pageItem",props:{count:{type:Number,default:0},now:{type:Number,default:0},data:{}},setup(e){const p={input:"搜索资源",output:"生成结果"},v=e,m=i(null),g=i(null),f=a(v,"count"),_=a(v,"now");a(v,"data");const b=[{name:"选择动态资源",content:"选择可参考的动态资源",icon:q,cardType:"input",code:"selectedModel",type:"prompts"},{name:"选择静态资源",content:"选择可参考的静态资源",icon:M,cardType:"input",code:"selectedModel",type:"statics"},{name:"选择文字资源",content:"选择可参考的文字资源",icon:W,cardType:"input",code:"selectedModel",type:"texts"},{name:"选择调色板",content:"合理且舒适的颜色搭配",icon:Y,cardType:"input",code:"selectedModel",type:"colors"},{name:"选择设计理念",content:"无数种设计思想的集合",icon:z,cardType:"input",code:"selectedModel",type:"designs"},{name:"选择作品资源",content:"选择用户需要的作品资源",icon:E,cardType:"input",code:"selectedArtWork",type:"prompts"},{name:"生成需求分析",content:"生成用户需求的模板分析",icon:N,cardType:"output",code:"generateDemandAnalysis",type:""},{name:"生成作品资源",content:"生成用户需要的模板资源",icon:E,cardType:"output",code:"generateArtWork",type:"designs"},{name:"生成文本段落",content:"生成用户需要的文本资源",icon:R,cardType:"output",code:"generateText",type:""}],k=(e=f.value)=>e===_.value+1?{transform:"translateY(0rem)",zIndex:1}:e>_.value+1?{transform:"translateY(100%)",zIndex:0}:e<_.value+1?{transform:"translateY(-100%)",zIndex:0}:void 0;return(e,a)=>(d(),t("div",{class:"page-item-body",style:u(k())},[null!==m.value?(d(),t("div",fe,["selectedModel"===m.value?(d(),r(ie,{key:0,type:g.value},null,8,["type"])):o("",!0),"generateDemandAnalysis"===m.value?(d(),r(ce,{key:1})):o("",!0),"generateText"===m.value?(d(),r(ve,{key:2})):o("",!0),"generateArtWork"===m.value?(d(),r(ge,{key:3,type:g.value},null,8,["type"])):o("",!0)])):o("",!0),null===m.value?(d(),t("div",_e,[(d(),t(s,null,n(b,((e,a)=>l("div",{class:"init-card",key:a,onClick:a=>(({code:e,type:a})=>{m.value=e,g.value=a})(e)},[l("div",ke,[l("div",we,[l("i",{class:c(["bi",e.icon])},null,2)]),l("div",he,y(e.name),1),l("div",xe,y(e.content),1),l("div",De,y(p[e.cardType]),1)])],8,be))),64))])):o("",!0)],4))}},[["__scopeId","data-v-7e621466"]]),Te={class:"page-ouoter-body"},Ce=e({__name:"pageOuter",props:{count:{type:Number,default:0},now:{type:Number,default:0},pageData:{type:Array,default:()=>[]}},setup(e){const l=e,o=a(l,"pageData");a(l,"count");const u=a(l,"now");return(e,a)=>(d(),t("div",Te,[(d(!0),t(s,null,n(o.value,((e,a)=>(d(),r(je,{data:e,key:a,count:a+1,now:u.value},null,8,["data","count","now"])))),128))]))}},[["__scopeId","data-v-10afe060"]]),Ie={class:"page-count"},Se={class:"data-warehouse-editor"},Pe={class:"data-warehouse-editor-input-box"},Ve={class:"logo-area"},Ae=["src"],Oe={class:"data-warehouse-editor-input-area"},Le={class:"data-warehouse-editor-view"},Ue=e({__name:"index",setup(e){const a=x(),s=i(a.query.id),n=i(0),o=i(null),u=i([{}]),r=e=>{if(e.deltaY<0){if(n.value-1<0)return;n.value--}else if(e.deltaY>0){if(n.value+1>u.value.length-1)return;n.value++}e.stopPropagation()},c=()=>{u.value.push({}),n.value=u.value.length-1};return j((()=>{window.loading||(window.loading=T()),s.value?B({data_id:s.value}).then((e=>{})):u.value=[{}],setTimeout((()=>{window.loading&&(window.loading.close(),window.loading=null)}),300)})),(e,a)=>{const s=m("n-button");return d(),t("div",{class:"data-warehouse-editor-body",onWheel:r,tabindex:"0"},[l("div",Ie,[g($,{pageData:u.value,now:n.value,onAddPage:c},null,8,["pageData","now"])]),l("div",Se,[l("div",Pe,[l("div",Ve,[l("img",{src:b(I)},null,8,Ae),a[0]||(a[0]=l("label",null,"Oplus",-1))]),l("div",Oe,[g(C,{style:{"box-shadow":"var(--op-thr-shadow)"},ref_key:"opInputRef",ref:o},null,512)]),g(s,{class:"save-btn",size:"large"},{default:f((()=>a[1]||(a[1]=[_("保存数据")]))),_:1})]),a[2]||(a[2]=l("div",{class:"message"}," 参考其他的设计作品，查看是否有喜欢的风格布局或者元素，把它加入你的设计理念中！ ",-1)),l("div",Le,[g(Ce,{now:n.value,pageData:u.value},null,8,["now","pageData"])])])],32)}}},[["__scopeId","data-v-a6644d3b"]]);export{Ue as default};
