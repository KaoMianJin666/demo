import{d as e,C as t,r as o,o as s,c as a,a as n,n as r,b as l,e as i,f as c,w as u,g as d,h as m,i as p,j as v,u as h,E as g,k as _,l as f,m as y,p as b,q as w,s as k,t as S,v as E,x,y as T,z as C,A as O,F as I,B as $,D as L,G as j,H as P,I as D,J as A,K as R,L as V,M,N,O as B,P as z,Q as H,R as U}from"./lib.078cc1de.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const q={},F=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in q)return;q[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((t,o)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()};const J=e({id:"public",state:()=>({rootDom:null,colorScheme:null}),getters:{getRootDom(){return this.rootDom},getColorScheme(){return this.colorScheme}},actions:{setRootDom(e){this.rootDom=e},setColorScheme(e){return new Promise((t=>{(e=(e=e||localStorage.getItem("colorScheme"))||"light")&&function(e){switch(e){case"../../assets/style/dark.scss":return F((()=>Promise.resolve({})),["assets/dark.22abf80e.css"]);case"../../assets/style/global.scss":return F((()=>Promise.resolve({})),["assets/global.43b60859.css"]);case"../../assets/style/light.scss":return F((()=>Promise.resolve({})),["assets/light.25455dc6.css"]);case"../../assets/style/style.scss":return F((()=>import("./style.0f4827d1.js")),[]);default:return new Promise((function(t,o){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}(`../../assets/style/${e}.scss`).then((o=>{this.colorScheme&&this.removeTheme(this.colorScheme);const s=document.createElement("style");s.id=`theme-${e}`,s.innerText=o.default,document.head.appendChild(s),this.colorScheme=e,localStorage.setItem("colorScheme",this.colorScheme),document.documentElement.className=this.colorScheme,t()}))}))},removeTheme(e){const t=document.getElementById(`theme-${e}`);t&&t.parentNode.removeChild(t)}}});var K=Object.freeze(Object.defineProperty({__proto__:null,usePublicStore:J,setupStore:function(e){return J(e)}},Symbol.toStringTag,{value:"Module"}));const G="_AICLOTH_CONSOLE_",W="_AICLOTH_CONSOLE__token";function Q(){const e=localStorage.getItem(G+"USER");return e&&"undefined"!==e?JSON.parse(e):null}function Z(e){localStorage.setItem(G+"USER",JSON.stringify(e))}function X(){const e=t.get(W);return""!==e||void 0!==e||null!==e?e:null}var Y=(e,t)=>{const o=e.__vccOpts||e;for(const[s,a]of t)o[s]=a;return o};var ee=Y({__name:"tMask",props:{bgColor:{type:String,default:"var(--t-bg-opacity-color)"},maskClickHide:{type:Boolean,default:!1},destroy:{type:Function},close:{type:Function}},emits:["close"],setup(e,{expose:t,emit:c}){const u=o(!0),d=o(!1),m=e,p=()=>{m.maskClickHide&&(m.close?m.close():v())},v=()=>{d.value&&(d.value=!1,setTimeout((()=>{u.value=!1,m.destroy&&m.destroy()}),200))},h=()=>{u.value=!0,setTimeout((()=>{d.value=!0}))};return s((()=>{h()})),t({hide:v,show:h}),(e,t)=>u.value?(i(),a("div",{key:0,class:"mask",style:r({backgroundColor:m.bgColor,opacity:Number(d.value)}),onClick:p},[n(e.$slots,"default",{},void 0,!0)],4)):l("",!0)}},[["__scopeId","data-v-1477fffe"]]);const te=e=>(k("data-v-107d644e"),e=e(),S(),e),oe=te((()=>d("div",{class:"logo-area"},"Tart",-1))),se={class:"input-area"},ae={class:"input-area"},ne=te((()=>d("div",{class:"user-agreements-area"}," 用户协议 用户协议 ",-1))),re={class:"login-btn-area"};var le=Y({__name:"loginBox",props:{bgColor:{type:String,default:"var(--t-bg-opacity-color)"},maskClickHide:{type:Boolean,default:!0},destroy:{type:Function}},setup(e){const{userStore:t}=nt(),a=e,n=o("tMaskDom"),r=o(null),l=o(null),k=o(!1),S=()=>(k.value=!1,setTimeout((()=>{n.value.hide()}),400),!0),E=()=>{t.handleLogin({username:r.value}).then((()=>{S()}))};return s((()=>{r.value=null,l.value=null,setTimeout((()=>{k.value=!0}),200)})),(e,t)=>(i(),c(ee,{ref_key:"tMaskDom",ref:n,bgColor:a.bgColor,maskClickHide:a.maskClickHide,destroy:a.destroy,close:S},{default:u((()=>[d("div",{class:m(["login-box",{animated:k.value}]),onClick:t[2]||(t[2]=p((()=>{}),["stop"]))},[oe,d("div",se,[v(h(g),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),class:"login-box-input"},{prepend:u((()=>[d("div",null,[v(h(_),{class:"input-icon"},{default:u((()=>[v(h(f))])),_:1})])])),_:1},8,["modelValue"])]),d("div",ae,[v(h(g),{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),class:"login-box-input",type:"password","show-password":""},{prepend:u((()=>[d("div",null,[v(h(_),{class:"input-icon"},{default:u((()=>[v(h(y))])),_:1})])])),_:1},8,["modelValue"])]),ne,d("div",re,[v(h(b),{onClick:E},{default:u((()=>[w("登录")])),_:1})])],2)])),_:1},8,["bgColor","maskClickHide","destroy"]))}},[["__scopeId","data-v-107d644e"]]);let ie=!1,ce=null;const ue=e=>{e=Object.assign({maskClickHide:!0},e);const t=X();return new Promise((o=>{t?o():(e=>{const{publicStore:t}=nt(),o=t.rootDom;let s=document.createElement("div");o.appendChild(s),ie&&(ce&&E(null,s),ie=!1),Object.assign(e,{destroy:()=>{ce&&(E(null,s),o.removeChild(s)),ie=!1}}),ce=v(le,Object.assign({isShow:!0},e)),E(ce,s),ie=!0})(e)}))};const de=e=>(k("data-v-123f045a"),e=e(),S(),e),me={class:"nav-bar-body"},pe=de((()=>d("div",{class:"logo-area"}," Teart ",-1))),ve={class:"router-link-area"},he={class:"handle-area"},ge={class:"user-phone-no"},_e={class:"user-profile-image"},fe=[de((()=>d("span",null,"退出",-1)))],ye=[de((()=>d("span",null,"登录",-1)))];var be=Y({__name:"navBar",setup(e){const{userStore:t,publicStore:n}=nt();x(),T(),o([]),o("ImageGenerationImage");const c=o("");o(!1);const u=o(!1),m=()=>{n.setColorScheme(u.value?"dark":"light")},p=()=>{t.handleLogout().then((()=>{}))};return s((()=>{n.setColorScheme().then((()=>{u.value="dark"===n.colorScheme})),ue().then((()=>{c.value=t.user}))})),(e,o)=>{const s=C("el-switch");return i(),a("div",me,[pe,d("div",ve,[v(s,{class:"t-switch",modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=e=>u.value=e),onChange:m},null,8,["modelValue"])]),d("div",he,[d("div",ge,O(h(t).token?h(t).user:null),1),d("div",{class:"line",style:r({opacity:Number(Boolean(h(t).token))})},null,4),d("div",_e,[h(t).token?(i(),a("img",{key:0,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})):l("",!0)]),h(t).token?(i(),a("div",{key:0,class:"logout-btn",onClick:p},fe)):l("",!0),h(t).token?l("",!0):(i(),a("div",{key:1,class:"logout-btn",onClick:o[1]||(o[1]=e=>ue())},ye))])])}}},[["__scopeId","data-v-123f045a"]]);const we={class:"loading-body"},ke={class:"loading-animation-area"},Se={class:"rainbow-text"};var Ee=Y({__name:"tToading",setup(e,{expose:t}){const n=o(!1),l=o(!1),c=Array(8).fill("🌿");s((()=>{setTimeout((()=>{n.value=!0,setTimeout((()=>{l.value||(l.value=!0)}),300)}))}));return t({close:()=>(l.value=!1,new Promise((e=>{setTimeout((()=>{n.value=!1,setTimeout((()=>{e()}),300)}),300)})))}),(e,t)=>(i(),a("div",we,[d("div",ke,[d("div",{class:m(["loading-left",{animate:n.value}])},null,2),d("div",{class:m(["loading-top",{animate:n.value}])},null,2),d("div",{class:m(["loading-right",{animate:n.value}])},null,2),d("div",{class:m(["loading-bottom",{animate:n.value}])},null,2)]),d("div",{class:"loading-inner",style:r({opacity:Number(l.value)})},[d("div",Se,[(i(!0),a(I,null,$(h(c),((e,t)=>(i(),a("span",{key:t,style:r({animationDelay:t/8+"s"})},O(e),5)))),128))])],4)]))}},[["__scopeId","data-v-72f1abf4"]]);const xe=e=>{let t=!1,o=null;const{publicStore:s}=nt(),a=s.rootDom;let n=document.createElement("div");return a.appendChild(n),t&&(o&&E(null,n),t=!1),o=v(Ee,e),E(o,n),t=!0,{close:()=>{t&&o&&o.component.setupState.close().then((()=>{E(null,n),a.removeChild(n),o=null,t=!1}))}}};const Te={class:"left-bar-body"},Ce={class:"menu-all"},Oe=["onClick"],Ie={class:"menu-icon"},$e={class:"menu-name"};var Le=Y({__name:"leftBar",setup(e){const t=T(),n=x(),r=o([]),l=o(null);s((()=>{l.value=t.path,r.value=[{path:"/main",name:"主页",includes:["/main","/modelEditor","/generateImage"],icon:L},{path:"/modelMainEditor",name:"模板编辑",includes:["/modelMainEditor"],icon:j},{path:"/promptSetting",name:"参数设置",includes:["/promptSetting"],icon:P}]}));return(e,t)=>{const o=C("el-icon");return i(),a("div",Te,[d("div",Ce,[(i(!0),a(I,null,$(r.value,((e,t)=>(i(),a("div",{class:m(["menu-item",{selected:Boolean(e.includes.find((e=>e===l.value)))}]),key:t,onClick:t=>(({path:e})=>{ue().then((()=>{window.loading=xe(),setTimeout((()=>{n.replace(e)}),300),l.value=e}))})(e)},[d("div",null,[d("div",Ie,[v(o,{class:"icon"},{default:u((()=>[(i(),c(D(e.icon)))])),_:2},1024)]),d("div",$e,O(e.name),1)])],10,Oe)))),128))])])}}},[["__scopeId","data-v-6a4ce3e9"]]);const je={class:"home-body"};var Pe=Y({__name:"index",setup(e){const t=T();return(e,o)=>{const s=C("el-aside"),n=C("router-view"),r=C("el-main"),l=C("el-container");return i(),a("div",je,[v(be),v(l,{class:"home-child-view"},{default:u((()=>[v(s,{class:"aside"},{default:u((()=>[v(Le)])),_:1}),v(r,{class:"main"},{default:u((()=>[(i(),c(n,{key:t.path}))])),_:1})])),_:1})])}}},[["__scopeId","data-v-1f4cbe8d"]]);const De={},Ae=e=>(k("data-v-4b07d3ea"),e=e(),S(),e),Re={class:"cloud-body"},Ve={class:"cloud-info"},Me=Ae((()=>d("div",{class:"error-title"}," 404 ",-1))),Ne=Ae((()=>d("div",{class:"error-sub-title"}," 未找到当前地址 ",-1)));var Be=Y(De,[["render",function(e,t){const o=C("el-result");return i(),a("div",Re,[d("div",Ve,[v(o,{icon:"error",style:{"--el-result-icon-font-size":"3rem"}},{title:u((()=>[Me])),"sub-title":u((()=>[Ne])),_:1})])])}],["__scopeId","data-v-4b07d3ea"]]);function ze(e){return Ye.post(`/teai/query_templates?template_type=${e}`)}function He(e,t){return Ye.post(`/teai/query_template?template_type=${e}&template_name=${t}`)}function Ue(e,t,o,s){return Ye.post(`/teai/upload_template?template_type=${t}&template_name=${o}&preview=${s}`,e)}function qe(e,t){return Ye.post(`/teai/delete_template?template_type=${e}&template_name=${t}`)}const Fe={class:"main-body"},Je=(e=>(k("data-v-6bb4f610"),e=e(),S(),e))((()=>d("div",{class:"main-title"}," 模板列表 ",-1))),Ke={class:"module-list"},Ge=["onClick"],We={class:"model-name"};const Qe=[{path:"/",name:"home",component:Pe,redirect:"/main",children:[{path:"main",name:"main",component:Y({__name:"index",setup(e){const t=x(),n=o({});return s((()=>{ue().then((()=>{ze("layouts").then((e=>{n.value=e.templates}))})),window.loading||(window.loading=xe()),setTimeout((()=>{window.loading.close(),window.loading=null}),300)})),(e,o)=>{const s=C("el-image"),r=C("el-scrollbar");return i(),a("div",Fe,[Je,d("div",Ke,[v(r,null,{default:u((()=>[(i(!0),a(I,null,$(Object.keys(n.value),(e=>(i(),a("div",{class:"module-item",key:e,onClick:o=>{return s=e,window.loading=xe(),void setTimeout((()=>{t.replace({path:"generateImage",query:{file_name:s}})}),300);var s}},[v(s,{src:n.value[e].preview,class:"model-image",fit:"contain"},null,8,["src"]),d("div",We,O(e),1)],8,Ge)))),128))])),_:1})])])}}},[["__scopeId","data-v-6bb4f610"]])},{path:"modelEditor",name:"modelEditor",component:()=>F((()=>import("./index.e9ca0ed0.js")),["assets/index.e9ca0ed0.js","assets/lib.078cc1de.js","assets/lib.b85fd96e.css","assets/explosionDiagram.4caebe97.js"])},{path:"modelMainEditor",name:"modelMainEditor",component:()=>F((()=>import("./index.e9ca0ed0.js")),["assets/index.e9ca0ed0.js","assets/lib.078cc1de.js","assets/lib.b85fd96e.css","assets/explosionDiagram.4caebe97.js"])},{path:"generateImage",name:"generateImage",component:()=>F((()=>import("./index.82e8e74e.js")),["assets/index.82e8e74e.js","assets/index.1677e6d6.css","assets/lib.078cc1de.js","assets/lib.b85fd96e.css","assets/explosionDiagram.4caebe97.js"])},{path:"promptSetting",name:"promptSetting",component:()=>F((()=>import("./index.c442c337.js")),["assets/index.c442c337.js","assets/index.ea023217.css","assets/lib.078cc1de.js","assets/lib.b85fd96e.css"])},{path:"404",name:"404",component:Be}]}],Ze=A({history:R("/"),routes:Qe});let Xe=[];Qe.forEach((e=>{e.children&&e.children.length?Xe=Xe.concat(e.children.map((t=>`${"/"!==e.path?e.path:""}/${t.path}`))):Xe.push(e.path)})),Ze.beforeEach(((e,t,o)=>{if(!Xe.find((t=>t===e.path))&&"/main"!==e.path)return void o("/404");const s=X();"/main"!==e.path&&"/404"!==e.path?s?o():o("/main"):o()}));const Ye=V.create({baseURL:"https://u248120-a5f1-770998cc.westb.seetacloud.com:8443",timeout:6e4,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});function et(e){if(!e.response)return M.error({message:"请求超时"}),Promise.reject(e);300===e.response.status&&M.error({message:"文件或文件夹已存在"}),X();const t=e.response.status,o=e.response.data,{userStore:s}=nt();return 401===t?(M.error({message:"登录失效, 请重新登陆"}),s.handleLogout().then((()=>{setTimeout((()=>{Ze.replace("/main")}),1500)}))):400===t||500===t?M.error({message:o.message}):403===t&&M.error({message:"无权限操作"}),Promise.reject(e)}Ye.interceptors.request.use((e=>{const t=X()||"22";return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e}),et),Ye.interceptors.response.use((e=>200===e.status?e.data||{}:Promise.reject("")),et);const tt=e({id:"users",state:()=>({user:Q()||"***********",permissions:null,root:localStorage.getItem("root")||"",token:X()||"",workingTenant:null}),getters:{getUser(){return this.user},getPermissions(){return this.permissions}},actions:{handleLogin(e){return new Promise(((o,s)=>{var a,n;this.token="TEST TOKEN",this.user=e.username,this.root="TEST ROOT",Z(this.user),a=this.token,t.set(W,a,{expires:1}),n=this.root,localStorage.setItem("root",n),o()}))},handleLogout(e=""){return new Promise(((e,o)=>{t.remove(W),localStorage.removeItem(G+"USER"),this.user=null,this.permissions=null,this.token="",Z(null),e(null)}))}}});const ot={"./modules/public.js":K,"./modules/user.js":Object.freeze(Object.defineProperty({__proto__:null,useUserStore:tt,setupStore:function(e){return tt(e)}},Symbol.toStringTag,{value:"Module"}))},st=N(),at={};function nt(){return at}Object.keys(ot).forEach((e=>{const t=e.match(/([a-zA-Z]*)\.js$/)[0].split(".")[0];at[`${t}Store`]=ot[e].setupStore(st)}));const rt={__name:"App",setup(e){const{publicStore:t}=nt(),n=o(1920),l=o(1080),c=o("rootDom"),u=()=>{const e=document.body.clientWidth,t=document.body.clientHeight;e/t>n.value/l.value?(l.value=t,n.value=l.value/1080*1920):(n.value=e,l.value=n.value/1920*1080);const o=n.value/50;document.documentElement.style.fontSize=`${o}px`,window.rootFont=o};return s((()=>{document.addEventListener("contextmenu",(function(e){e.preventDefault()})),u(),window.onresize=()=>{u()},t.setRootDom(c.value)})),(e,t)=>{const o=C("RouterView");return i(),a("div",{class:"view-body",style:r({width:`${n.value}px`,height:`${l.value}px`})},[d("div",{class:"view-body-info",id:"view-body-info",ref_key:"rootDom",ref:c},[v(o,{id:"main-view"})],512)],4)}}};if("undefined"!=typeof window){let e=function(){var e=document.body,t=document.getElementById("__svg__icons__dom__");t||((t=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__",t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),t.innerHTML="",e.insertBefore(t,e.lastChild)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}const lt={key:0,class:"loading-area"},it={key:0};var ct={tButton:Y({__name:"tButton",props:{type:{type:String,default:"error"},size:{type:String,default:"nomal"},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading"}},setup(e){const t=e,s=o(!1),c=()=>{switch(t.type){case"info":return s.value=!1,"box-info";case"success":return s.value=!1,"box-success";case"error":return s.value=!1,"box-error";case"warn":return s.value=!1,"box-warn";case"text-success":return s.value=!0,"text-success";case"text-info":return s.value=!0,"text-info";case"text-warn":return s.value=!0,"text-warn";case"text-error":return s.value=!0,"text-error";default:return null}},u=()=>{switch(t.size){case"min":return"min-text";case"nomal":return"nomal-text";case"large":return"large-text";default:return null}},p=()=>{switch(t.type){case"info":case"text-info":return"background:var(--t-info-hover-color)";case"success":case"text-success":return"background:var(--t-success-hover-color)";case"error":case"text-error":return"background:var(--t-error-hover-color)";case"warn":case"text-warn":return"background:var(--t-warn-hover-color)";default:return null}},v=()=>{const e={type:c(),size:u()};let t="";return Object.keys(e).forEach((o=>{e[o]&&(t+=`${e[o]} `)})),t};return(e,o)=>(i(),a("div",{class:m(`t-btn ${v()}`)},[d("div",{style:r(`opacity: ${Number(!s.value||s.value&&!t.loading)};`)},[n(e.$slots,"default",{},void 0,!0)],4),s.value&&t.loading?(i(),a("div",lt,O(t.loadingText),1)):l("",!0),s.value?l("",!0):(i(),a("div",{key:1,class:m(["hover-area",{loading:t.loading}]),style:r(p())},[t.loading?(i(),a("div",it,O(t.loadingText),1)):l("",!0)],6))],2))}},[["__scopeId","data-v-071339ed"]]),tTag:Y({__name:"tTag",props:{type:{type:String,default:"error"},size:{type:String,default:"nomal"}},setup(e){const t=e,o=()=>{switch(t.type){case"info":default:return"box-info";case"success":return"box-success";case"error":return"box-error";case"warn":return"box-warn"}},s=()=>{switch(t.size){case"min":return"min-text";case"nomal":return"nomal-text";case"large":return"large-text";default:return null}},r=()=>{const e={type:o(),size:s()};let t="";return Object.keys(e).forEach((o=>{e[o]&&(t+=`${e[o]} `)})),t};return(e,t)=>(i(),a("div",{class:m(`t-btn ${r()}`)},[n(e.$slots,"default",{},void 0,!0)],2))}},[["__scopeId","data-v-660ee02c"]]),tMask:ee};const ut=B(rt);ut.use(N()),ut.use(Ze),ut.use(z,{locale:H}),ut.use(U,{Options:{url:"data-source",inline:!0,button:!0,transition:!0}}),Object.keys(ct).forEach((e=>{ut.component(e,ct[e])})),ut.mount("#app");export{xe as T,Y as _,He as a,qe as d,ze as g,Ye as r,Ue as s};
