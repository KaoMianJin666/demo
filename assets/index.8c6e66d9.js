import{d as e,C as t,r as o,o as s,c as a,a as n,n as r,b as l,e as i,f as c,w as u,g as d,h as m,i as p,j as v,u as h,E as g,k as _,l as f,m as y,p as b,q as k,s as w,t as S,v as x,x as E,y as C,z as T,A as O,F as I,B as $,D as L,G as j,H as P,I as D,J as A,K as R,L as V,M as N,N as B,O as z,P as M,Q as H,R as U,S as q}from"./lib.5034c038.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const F={},J=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in F)return;F[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((t,o)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()};const K=e({id:"public",state:()=>({rootDom:null,colorScheme:null}),getters:{getRootDom(){return this.rootDom},getColorScheme(){return this.colorScheme}},actions:{setRootDom(e){this.rootDom=e},setColorScheme(e){return new Promise((t=>{(e=(e=e||localStorage.getItem("colorScheme"))||"light")&&function(e){switch(e){case"../../assets/style/dark.scss":return J((()=>Promise.resolve({})),["assets/dark.22abf80e.css"]);case"../../assets/style/global.scss":return J((()=>Promise.resolve({})),["assets/global.43b60859.css"]);case"../../assets/style/light.scss":return J((()=>Promise.resolve({})),["assets/light.25455dc6.css"]);case"../../assets/style/style.scss":return J((()=>import("./style.0f4827d1.js")),[]);default:return new Promise((function(t,o){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}(`../../assets/style/${e}.scss`).then((o=>{this.colorScheme&&this.removeTheme(this.colorScheme);const s=document.createElement("style");s.id=`theme-${e}`,s.innerText=o.default,document.head.appendChild(s),this.colorScheme=e,localStorage.setItem("colorScheme",this.colorScheme),document.documentElement.className=this.colorScheme,t()}))}))},removeTheme(e){const t=document.getElementById(`theme-${e}`);t&&t.parentNode.removeChild(t)}}});var G=Object.freeze(Object.defineProperty({__proto__:null,usePublicStore:K,setupStore:function(e){return K(e)}},Symbol.toStringTag,{value:"Module"}));const W="_AICLOTH_CONSOLE_",Q="_AICLOTH_CONSOLE__token";function Z(){const e=localStorage.getItem(W+"USER");return e&&"undefined"!==e?JSON.parse(e):null}function X(e){localStorage.setItem(W+"USER",JSON.stringify(e))}function Y(){const e=t.get(Q);return""!==e||void 0!==e||null!==e?e:null}var ee=(e,t)=>{const o=e.__vccOpts||e;for(const[s,a]of t)o[s]=a;return o};var te=ee({__name:"tMask",props:{bgColor:{type:String,default:"var(--t-bg-opacity-color)"},maskClickHide:{type:Boolean,default:!1},destroy:{type:Function},close:{type:Function}},emits:["close"],setup(e,{expose:t,emit:c}){const u=o(!0),d=o(!1),m=e,p=()=>{m.maskClickHide&&(m.close?m.close():v())},v=()=>{d.value&&(d.value=!1,setTimeout((()=>{u.value=!1,m.destroy&&m.destroy()}),200))},h=()=>{u.value=!0,setTimeout((()=>{d.value=!0}))};return s((()=>{h()})),t({hide:v,show:h}),(e,t)=>u.value?(i(),a("div",{key:0,class:"mask",style:r({backgroundColor:m.bgColor,opacity:Number(d.value)}),onClick:p},[n(e.$slots,"default",{},void 0,!0)],4)):l("",!0)}},[["__scopeId","data-v-1477fffe"]]);const oe=e=>(w("data-v-5bef5db2"),e=e(),S(),e),se=oe((()=>d("div",{class:"logo-area"},"Tart",-1))),ae={class:"input-area"},ne={class:"input-area"},re=oe((()=>d("div",{class:"user-agreements-area"}," 用户协议 用户协议 ",-1))),le={class:"login-btn-area"};var ie=ee({__name:"loginBox",props:{bgColor:{type:String,default:"var(--t-bg-opacity-color)"},maskClickHide:{type:Boolean,default:!0},destroy:{type:Function}},setup(e){const{userStore:t}=ut(),a=e,n=o("tMaskDom"),r=o(null),l=o(null),w=o(!1),S=()=>(w.value=!1,setTimeout((()=>{n.value.hide()}),400),!0),x=()=>{t.handleLogin({username:r.value}).then((()=>{location.reload(),S()}))};return s((()=>{r.value=null,l.value=null,setTimeout((()=>{w.value=!0}),200)})),(e,t)=>(i(),c(te,{ref_key:"tMaskDom",ref:n,bgColor:a.bgColor,maskClickHide:a.maskClickHide,destroy:a.destroy,close:S},{default:u((()=>[d("div",{class:m(["login-box",{animated:w.value}]),onClick:t[2]||(t[2]=p((()=>{}),["stop"]))},[se,d("div",ae,[v(h(g),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),class:"login-box-input"},{prepend:u((()=>[d("div",null,[v(h(_),{class:"input-icon"},{default:u((()=>[v(h(f))])),_:1})])])),_:1},8,["modelValue"])]),d("div",ne,[v(h(g),{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),class:"login-box-input",type:"password","show-password":""},{prepend:u((()=>[d("div",null,[v(h(_),{class:"input-icon"},{default:u((()=>[v(h(y))])),_:1})])])),_:1},8,["modelValue"])]),re,d("div",le,[v(h(b),{onClick:x},{default:u((()=>[k("登录")])),_:1})])],2)])),_:1},8,["bgColor","maskClickHide","destroy"]))}},[["__scopeId","data-v-5bef5db2"]]);let ce=!1,ue=null;const de=e=>{e=Object.assign({maskClickHide:!0},e);const t=Y();return new Promise((o=>{t?o():(e=>{const{publicStore:t}=ut(),o=t.rootDom;let s=document.createElement("div");o.appendChild(s),ce&&(ue&&x(null,s),ce=!1),Object.assign(e,{destroy:()=>{ue&&(x(null,s),o.removeChild(s)),ce=!1}}),ue=v(ie,Object.assign({isShow:!0},e)),x(ue,s),ce=!0})(e)}))};const me=e=>(w("data-v-74cf7640"),e=e(),S(),e),pe={class:"nav-bar-body"},ve=me((()=>d("div",{class:"logo-area"}," Teart ",-1))),he={class:"router-link-area"},ge={class:"handle-area"},_e={class:"user-phone-no"},fe={class:"user-profile-image"},ye=[me((()=>d("span",null,"退出",-1)))],be=[me((()=>d("span",null,"登录",-1)))];var ke=ee({__name:"navBar",setup(e){const{userStore:t,publicStore:n}=ut();E(),C(),o([]),o("ImageGenerationImage"),o(""),o(!1);const c=o(!1),u=()=>{n.setColorScheme(c.value?"dark":"light")},m=()=>{t.handleLogout().then((()=>{}))};return s((()=>{n.setColorScheme().then((()=>{c.value="dark"===n.colorScheme}))})),(e,o)=>{const s=T("el-switch");return i(),a("div",pe,[ve,d("div",he,[v(s,{class:"t-switch",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e),onChange:u},null,8,["modelValue"])]),d("div",ge,[d("div",_e,O(h(t).token?h(t).user:null),1),d("div",{class:"line",style:r({opacity:Number(Boolean(h(t).token))})},null,4),d("div",fe,[h(t).token?(i(),a("img",{key:0,src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})):l("",!0)]),h(t).token?(i(),a("div",{key:0,class:"logout-btn",onClick:m},ye)):l("",!0),h(t).token?l("",!0):(i(),a("div",{key:1,class:"logout-btn",onClick:o[1]||(o[1]=e=>de())},be))])])}}},[["__scopeId","data-v-74cf7640"]]);const we={class:"loading-body"},Se={class:"loading-animation-area"},xe={class:"rainbow-text"};var Ee=ee({__name:"tToading",setup(e,{expose:t}){const n=o(!1),l=o(!1),c=Array(8).fill("🌿");s((()=>{setTimeout((()=>{n.value=!0,setTimeout((()=>{l.value||(l.value=!0)}),300)}))}));return t({close:()=>(l.value=!1,new Promise((e=>{setTimeout((()=>{n.value=!1,setTimeout((()=>{e()}),300)}),300)})))}),(e,t)=>(i(),a("div",we,[d("div",Se,[d("div",{class:m(["loading-left",{animate:n.value}])},null,2),d("div",{class:m(["loading-top",{animate:n.value}])},null,2),d("div",{class:m(["loading-right",{animate:n.value}])},null,2),d("div",{class:m(["loading-bottom",{animate:n.value}])},null,2)]),d("div",{class:"loading-inner",style:r({opacity:Number(l.value)})},[d("div",xe,[(i(!0),a(I,null,$(h(c),((e,t)=>(i(),a("span",{key:t,style:r({animationDelay:t/8+"s"})},O(e),5)))),128))])],4)]))}},[["__scopeId","data-v-72f1abf4"]]);const Ce=e=>{let t=!1,o=null;const{publicStore:s}=ut(),a=s.rootDom;let n=document.createElement("div");return a.appendChild(n),t&&(o&&x(null,n),t=!1),o=v(Ee,e),x(o,n),t=!0,{close:()=>{t&&o&&o.component.setupState.close().then((()=>{x(null,n),a.removeChild(n),o=null,t=!1}))}}};const Te={class:"left-bar-body"},Oe={class:"menu-all"},Ie=["onClick"],$e={class:"menu-icon"},Le={class:"menu-name"};var je=ee({__name:"leftBar",setup(e){const t=C(),n=E(),r=o([]),l=o(null);s((()=>{l.value=t.path,r.value=[{path:"/main",name:"主页",includes:["/main","/modelEditor","/generateImage"],icon:L},{path:"/promptSetting",name:"参数设置",includes:["/promptSetting"],icon:j}]}));return(e,t)=>{const o=T("el-icon");return i(),a("div",Te,[d("div",Oe,[(i(!0),a(I,null,$(r.value,((e,t)=>(i(),a("div",{class:m(["menu-item",{selected:Boolean(e.includes.find((e=>e===l.value)))}]),key:t,onClick:t=>(({path:e})=>{de().then((()=>{window.loading=Ce(),setTimeout((()=>{n.replace(e)}),300),l.value=e}))})(e)},[d("div",null,[d("div",$e,[v(o,{class:"icon"},{default:u((()=>[(i(),c(P(e.icon)))])),_:2},1024)]),d("div",Le,O(e.name),1)])],10,Ie)))),128))])])}}},[["__scopeId","data-v-2c097385"]]);const Pe={class:"home-body"};var De=ee({__name:"index",setup(e){const t=C();return(e,o)=>{const s=T("el-aside"),n=T("router-view"),r=T("el-main"),l=T("el-container");return i(),a("div",Pe,[v(ke),v(l,{class:"home-child-view"},{default:u((()=>[v(s,{class:"aside"},{default:u((()=>[v(je)])),_:1}),v(r,{class:"main"},{default:u((()=>[(i(),c(n,{key:t.path}))])),_:1})])),_:1})])}}},[["__scopeId","data-v-1f4cbe8d"]]);const Ae={},Re=e=>(w("data-v-4b07d3ea"),e=e(),S(),e),Ve={class:"cloud-body"},Ne={class:"cloud-info"},Be=Re((()=>d("div",{class:"error-title"}," 404 ",-1))),ze=Re((()=>d("div",{class:"error-sub-title"}," 未找到当前地址 ",-1)));var Me=ee(Ae,[["render",function(e,t){const o=T("el-result");return i(),a("div",Ve,[d("div",Ne,[v(o,{icon:"error",style:{"--el-result-icon-font-size":"3rem"}},{title:u((()=>[Be])),"sub-title":u((()=>[ze])),_:1})])])}],["__scopeId","data-v-4b07d3ea"]]);function He(e){return at.post(`/teai/query_templates?template_type=${e}`)}function Ue(e,t){return at.post(`/teai/query_template?template_type=${e}&template_name=${t}`)}function qe(e,t,o,s){return at.post(`/teai/upload_template?template_type=${t}&template_name=${o}&preview=${s}`,e)}function Fe(e,t){return at.post(`/teai/delete_template?template_type=${e}&template_name=${t}`)}const Je={class:"main-body"},Ke={class:"main-title"},Ge={class:"handle-area"},We={class:"module-list"},Qe=["onClick"],Ze={class:"model-name-info"},Xe={class:"model-handle-area"},Ye=["onClick"],et=["onClick"];const tt=[{path:"/",name:"home",component:De,redirect:"/main",children:[{path:"main",name:"main",component:ee({__name:"index",setup(e){const t=E(),n=o({}),r=(e=null)=>{window.loading=Ce(),setTimeout((()=>{t.replace({path:"modelEditor",query:{file_name:e}})}),300)},l=()=>{He("layouts").then((e=>{n.value=e.templates}))};return s((()=>{de().then((()=>{l()})),window.loading||(window.loading=Ce()),setTimeout((()=>{window.loading.close(),window.loading=null}),300)})),(e,o)=>{const s=T("t-button"),c=T("el-image"),m=T("el-icon"),g=T("el-scrollbar");return i(),a("div",Je,[d("div",Ke,[k(" 模板列表 "),d("div",Ge,[v(s,{type:"text-success",style:{height:"1rem",margin:"0","line-height":"0.7rem"},onClick:o[0]||(o[0]=e=>r())},{default:u((()=>[k(" 新增模板 ")])),_:1})])]),d("div",We,[v(g,null,{default:u((()=>[(i(!0),a(I,null,$(Object.keys(n.value),(e=>(i(),a("div",{class:"module-item",key:e,onClick:o=>{return s=e,window.loading=Ce(),void setTimeout((()=>{t.replace({path:"generateImage",query:{file_name:s}})}),300);var s}},[v(c,{src:n.value[e].preview,class:"model-image",fit:"contain"},null,8,["src"]),d("div",{class:"model-name",onClick:o[1]||(o[1]=p((()=>{}),["stop"]))},[d("div",Ze,O(e),1),d("div",Xe,[d("div",{class:"handle-btn text-warn",onClick:t=>r(e)},[v(m,null,{default:u((()=>[v(h(D))])),_:1})],8,Ye),d("div",{class:"handle-btn text-error",onClick:t=>(({name:e})=>{Fe("layouts",e).then((e=>{l()}))})({name:e})},[v(m,null,{default:u((()=>[v(h(A))])),_:1})],8,et)])])],8,Qe)))),128))])),_:1})])])}}},[["__scopeId","data-v-092f8b83"]])},{path:"modelEditor",name:"modelEditor",component:()=>J((()=>import("./index.65cb4702.js")),["assets/index.65cb4702.js","assets/lib.5034c038.js","assets/lib.b85fd96e.css","assets/explosionDiagram.86f65b93.js"])},{path:"modelMainEditor",name:"modelMainEditor",component:()=>J((()=>import("./index.65cb4702.js")),["assets/index.65cb4702.js","assets/lib.5034c038.js","assets/lib.b85fd96e.css","assets/explosionDiagram.86f65b93.js"])},{path:"generateImage",name:"generateImage",component:()=>J((()=>import("./index.57da7e94.js")),["assets/index.57da7e94.js","assets/index.ffc38bb6.css","assets/lib.5034c038.js","assets/lib.b85fd96e.css","assets/explosionDiagram.86f65b93.js"])},{path:"promptSetting",name:"promptSetting",component:()=>J((()=>import("./index.0dad9bd3.js")),["assets/index.0dad9bd3.js","assets/index.c4026203.css","assets/lib.5034c038.js","assets/lib.b85fd96e.css"])},{path:"404",name:"404",component:Me}]}],ot=R({history:V("/"),routes:tt});let st=[];tt.forEach((e=>{e.children&&e.children.length?st=st.concat(e.children.map((t=>`${"/"!==e.path?e.path:""}/${t.path}`))):st.push(e.path)})),ot.beforeEach(((e,t,o)=>{if(!st.find((t=>t===e.path))&&"/main"!==e.path)return void o("/404");const s=Y();"/main"!==e.path&&"/404"!==e.path?s?o():o("/main"):o()}));const at=N.create({baseURL:"https://u248120-a5f1-770998cc.westb.seetacloud.com:8443",timeout:6e4,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});function nt(e){if(!e.response)return B.error({message:"请求超时"}),Promise.reject(e);300===e.response.status&&B.error({message:"文件或文件夹已存在"}),Y();const t=e.response.status,o=e.response.data,{userStore:s}=ut();return 401===t?(B.error({message:"登录失效, 请重新登陆"}),s.handleLogout().then((()=>{setTimeout((()=>{ot.replace("/main")}),1500)}))):400===t||500===t?B.error({message:o.message}):403===t&&B.error({message:"无权限操作"}),Promise.reject(e)}at.interceptors.request.use((e=>{const t=Y()||"22";return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e}),nt),at.interceptors.response.use((e=>200===e.status?e.data||{}:Promise.reject("")),nt);const rt=e({id:"users",state:()=>({user:Z()||"***********",permissions:null,root:localStorage.getItem("root")||"",token:Y()||"",workingTenant:null}),getters:{getUser(){return this.user},getPermissions(){return this.permissions}},actions:{handleLogin(e){return new Promise(((o,s)=>{var a,n;this.token="TEST TOKEN",this.user=e.username,this.root="TEST ROOT",X(this.user),a=this.token,t.set(Q,a,{expires:1}),n=this.root,localStorage.setItem("root",n),o()}))},handleLogout(e=""){return new Promise(((e,o)=>{t.remove(Q),localStorage.removeItem(W+"USER"),this.user=null,this.permissions=null,this.token="",X(null),e(null)}))}}});const lt={"./modules/public.js":G,"./modules/user.js":Object.freeze(Object.defineProperty({__proto__:null,useUserStore:rt,setupStore:function(e){return rt(e)}},Symbol.toStringTag,{value:"Module"}))},it=z(),ct={};function ut(){return ct}Object.keys(lt).forEach((e=>{const t=e.match(/([a-zA-Z]*)\.js$/)[0].split(".")[0];ct[`${t}Store`]=lt[e].setupStore(it)}));const dt={__name:"App",setup(e){const{publicStore:t}=ut(),n=o(1920),l=o(1080),c=o("rootDom"),u=()=>{const e=document.body.clientWidth,t=document.body.clientHeight;e/t>n.value/l.value?(l.value=t,n.value=l.value/1080*1920):(n.value=e,l.value=n.value/1920*1080);const o=n.value/50;document.documentElement.style.fontSize=`${o}px`,window.rootFont=o};return s((()=>{document.addEventListener("contextmenu",(function(e){e.preventDefault()})),u(),window.onresize=()=>{u()},t.setRootDom(c.value)})),(e,t)=>{const o=T("RouterView");return i(),a("div",{class:"view-body",style:r({width:`${n.value}px`,height:`${l.value}px`})},[d("div",{class:"view-body-info",id:"view-body-info",ref_key:"rootDom",ref:c},[v(o,{id:"main-view"})],512)],4)}}};if("undefined"!=typeof window){let e=function(){var e=document.body,t=document.getElementById("__svg__icons__dom__");t||((t=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__",t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),t.innerHTML="",e.insertBefore(t,e.lastChild)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}const mt={key:0,class:"loading-area"},pt={key:0};var vt={tButton:ee({__name:"tButton",props:{type:{type:String,default:"error"},size:{type:String,default:"nomal"},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading"}},setup(e){const t=e,s=o(!1),c=()=>{switch(t.type){case"info":return s.value=!1,"box-info";case"success":return s.value=!1,"box-success";case"error":return s.value=!1,"box-error";case"warn":return s.value=!1,"box-warn";case"text-success":return s.value=!0,"text-success";case"text-info":return s.value=!0,"text-info";case"text-warn":return s.value=!0,"text-warn";case"text-error":return s.value=!0,"text-error";default:return null}},u=()=>{switch(t.size){case"min":return"min-text";case"nomal":return"nomal-text";case"large":return"large-text";default:return null}},p=()=>{switch(t.type){case"info":case"text-info":return"background:var(--t-info-hover-color)";case"success":case"text-success":return"background:var(--t-success-hover-color)";case"error":case"text-error":return"background:var(--t-error-hover-color)";case"warn":case"text-warn":return"background:var(--t-warn-hover-color)";default:return null}},v=()=>{const e={type:c(),size:u()};let t="";return Object.keys(e).forEach((o=>{e[o]&&(t+=`${e[o]} `)})),t};return(e,o)=>(i(),a("div",{class:m(`t-btn ${v()}`)},[d("div",{style:r(`opacity: ${Number(!s.value||s.value&&!t.loading)};`)},[n(e.$slots,"default",{},void 0,!0)],4),s.value&&t.loading?(i(),a("div",mt,O(t.loadingText),1)):l("",!0),s.value?l("",!0):(i(),a("div",{key:1,class:m(["hover-area",{loading:t.loading}]),style:r(p())},[t.loading?(i(),a("div",pt,O(t.loadingText),1)):l("",!0)],6))],2))}},[["__scopeId","data-v-071339ed"]]),tTag:ee({__name:"tTag",props:{type:{type:String,default:"error"},size:{type:String,default:"nomal"}},setup(e){const t=e,o=()=>{switch(t.type){case"info":default:return"box-info";case"success":return"box-success";case"error":return"box-error";case"warn":return"box-warn"}},s=()=>{switch(t.size){case"min":return"min-text";case"nomal":return"nomal-text";case"large":return"large-text";default:return null}},r=()=>{const e={type:o(),size:s()};let t="";return Object.keys(e).forEach((o=>{e[o]&&(t+=`${e[o]} `)})),t};return(e,t)=>(i(),a("div",{class:m(`t-btn ${r()}`)},[n(e.$slots,"default",{},void 0,!0)],2))}},[["__scopeId","data-v-660ee02c"]]),tMask:te};const ht=M(dt);ht.use(z()),ht.use(ot),ht.use(H,{locale:U}),ht.use(q,{Options:{url:"data-source",inline:!0,button:!0,transition:!0}}),Object.keys(vt).forEach((e=>{ht.component(e,vt[e])})),ht.mount("#app");export{Ce as T,ee as _,He as a,Fe as d,Ue as g,at as r,qe as s};
