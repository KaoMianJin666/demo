import{i as e,g as a,c as l}from"./cloud.c7be917d.js";import{f as t,h as u,k as s,w as o,r as d,o as n,i as c,c as i,j as r,M as v,E as m,N as p,p as h,n as f}from"./lib.cb02d3e4.js";import{_ as V,b}from"./index.1a6ae9aa.js";const k=e=>(h("data-v-862b84c8"),e=e(),f(),e),_={class:"texture-body"},x={class:"texture-input-area"},g={class:"texture-upload"},U={class:"texture-handle"},y={class:"checkout-handle"},w={class:"checkout-item"},$=k((()=>c("label",{class:"checkout-label"}," 风格融合 ",-1))),j={class:"checkout-setting"},R={class:"checkout-handle"},z={class:"checkout-item"},D=k((()=>c("label",{class:"checkout-label"}," 结构融合 ",-1))),F={class:"checkout-setting"},A={class:"texture-input"},C={class:"texture-handle-btn-area"},L=k((()=>c("span",{class:"handle-btn-text"}," 随机一下 ",-1))),E=k((()=>c("span",{class:"handle-btn-text"}," 生成 ",-1))),I={class:"texture-upload"},M={class:"texture-handle"},N={class:"checkout-handle"},q={class:"checkout-item"},B=k((()=>c("label",{class:"checkout-label"}," 准确结构 ",-1))),G={class:"checkout-setting"},H={class:"checkout-handle"},J={class:"checkout-item"},K=k((()=>c("label",{class:"checkout-label"}," 原图重绘幅度 ",-1))),O={class:"checkout-setting"};var P=V({__name:"index",setup(h){const f=t(""),V=t(null),k=t(null),P=t(null),Q=t(null),S=t(!1),T=t(!1),W=t(!1),X=t(!0),Y=t(100),Z=t(100),ee=t(100),ae=t(50),le=t(!1),te=t([]),ue=e=>{if(e.size>104857600)return m.error(`您所上传的${e.name}文件大于100mb`),!1;V.value=e;const a=new FileReader;return a.onload=({target:e})=>{k.value=e.result},a.readAsDataURL(e),!1},se=e=>{if(e.size>104857600)return m.error(`您所上传的${e.name}文件大于100mb`),!1;P.value=e;const a=new FileReader;return a.onload=({target:e})=>{Q.value=e.result},a.readAsDataURL(e),!1},oe=()=>{a().then((e=>{f.value=e}))},de=()=>{if(!V.value)return void m.error("请上传左侧图片后操作");if(!P.value)return void m.error("请上传右侧图片后操作");const e=new FormData;e.append("ref_image",V.value),e.append("base_image",P.value);const a={params:{prompt:f.value,width:1024,height:1024},data:e};S.value&&(a.params.ref_style_sim=Y.value/100),T.value&&(a.params.ref_comp_sim=Z.value/100),W.value&&(a.params.lineart_sim=ee.value/100),X.value&&(a.params.base_sim=ae.value/100),le.value=!0,l(a).then((e=>{te.value.unshift(`${b}/1n/${e}`),le.value=!1}))};return(a,l)=>{const t=d("el-image"),m=d("el-icon"),h=d("el-upload"),V=d("el-checkbox"),b=d("el-slider"),P=d("el-input"),ne=d("el-button");return n(),u("div",_,[s(e,{title:"两张图融合",modelValue:te.value,"onUpdate:modelValue":l[9]||(l[9]=e=>te.value=e),"is-loading":le.value},{input:o((()=>[c("div",x,[c("div",g,[s(h,{class:"avatar-uploader",action:"","show-file-list":!1,"before-upload":ue},{default:o((()=>[k.value?(n(),i(t,{key:0,src:k.value,class:"avatar"},null,8,["src"])):(n(),i(m,{key:1,class:"avatar-uploader-icon"},{default:o((()=>[s(r(p))])),_:1}))])),_:1})]),c("div",U,[c("div",y,[c("div",w,[s(V,{modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=e=>S.value=e),value:!0},{default:o((()=>[$])),_:1},8,["modelValue"])]),c("div",j,[S.value?(n(),i(b,{key:0,"format-tooltip":e=>`风格相似度 ${Y.value}%`,modelValue:Y.value,"onUpdate:modelValue":l[1]||(l[1]=e=>Y.value=e),min:0,max:100},null,8,["format-tooltip","modelValue"])):v("",!0)])]),c("div",R,[c("div",z,[s(V,{modelValue:T.value,"onUpdate:modelValue":l[2]||(l[2]=e=>T.value=e),value:!0},{default:o((()=>[D])),_:1},8,["modelValue"])]),c("div",F,[T.value?(n(),i(b,{key:0,"format-tooltip":e=>`结构相似度 ${Z.value}%`,modelValue:Z.value,"onUpdate:modelValue":l[3]||(l[3]=e=>Z.value=e),min:0,max:100},null,8,["format-tooltip","modelValue"])):v("",!0)])])]),c("div",A,[s(P,{class:"texture-input-item",type:"textarea",modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=e=>f.value=e),"show-word-limit":"",resize:"none"},null,8,["modelValue"]),c("div",C,[s(ne,{class:"handle-btn",onClick:oe},{default:o((()=>[L])),_:1}),s(ne,{class:"handle-btn",onClick:de},{default:o((()=>[E])),_:1})])]),c("div",I,[s(h,{class:"avatar-uploader",action:"","show-file-list":!1,"before-upload":se},{default:o((()=>[Q.value?(n(),i(t,{key:0,src:Q.value,class:"avatar"},null,8,["src"])):(n(),i(m,{key:1,class:"avatar-uploader-icon"},{default:o((()=>[s(r(p))])),_:1}))])),_:1})]),c("div",M,[c("div",N,[c("div",q,[s(V,{modelValue:W.value,"onUpdate:modelValue":l[5]||(l[5]=e=>W.value=e),value:!0},{default:o((()=>[B])),_:1},8,["modelValue"])]),c("div",G,[W.value?(n(),i(b,{key:0,"format-tooltip":e=>`结构相似度 ${ee.value}%`,modelValue:ee.value,"onUpdate:modelValue":l[6]||(l[6]=e=>ee.value=e),min:0,max:100},null,8,["format-tooltip","modelValue"])):v("",!0)])]),c("div",H,[c("div",J,[s(V,{modelValue:X.value,"onUpdate:modelValue":l[7]||(l[7]=e=>X.value=e),value:!0},{default:o((()=>[K])),_:1},8,["modelValue"])]),c("div",O,[X.value?(n(),i(b,{key:0,"format-tooltip":e=>`原图重绘幅度 ${ae.value}%`,modelValue:ae.value,"onUpdate:modelValue":l[8]||(l[8]=e=>ae.value=e),min:0,max:100},null,8,["format-tooltip","modelValue"])):v("",!0)])])])])])),_:1},8,["modelValue","is-loading"])])}}},[["__scopeId","data-v-862b84c8"]]);export{P as default};
