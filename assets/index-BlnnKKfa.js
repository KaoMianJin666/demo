import{g as e,a}from"./promptSetting-DuueCFwX.js";import{r as t,z as s,o as l,v as i,C as o,w as n,h as r,E as m}from"./lib-Dn7wYpIU.js";import{T as u}from"./TLoading-FusFGd4y.js";import{m as p}from"./index-ttP79Z9A.js";import"./index-B9TnIHOe.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-ZrP_5N1V.js";import"./modelEditor-CaOQ26LY.js";import"./menu-B85Lp49n.js";const v={__name:"index",setup(v){const d=n(),w=t([]),c=t([]),g=t([]),h=t([]),j=t({template_filter:"nomal",template_level:"nomal",points:1}),y=t(!1),f=t(d.query.template_id?Number(d.query.template_id):null),_=t({canvasData:{name:d.query.file_name||"",width:2048,height:2048}}),x=t({groups:{},layers:{},elements:{}});s((()=>d.query.template_id),((e,a)=>{f.value=e,y.value=!1,m((()=>{y.value=!0}))}));const L=()=>{window.loading||(window.loading=u()),Promise.all([new Promise((a=>{e("colors").then((e=>{g.value=e.data,a()}))})),new Promise((a=>{e("texts").then((e=>{h.value=e.data,a()}))})),new Promise((a=>{e("prompts").then((e=>{w.value=e.data,a()}))})),new Promise((a=>{e("statics").then((e=>{c.value=e.data,a()}))})),new Promise((e=>{_.value.canvasData.name?a(f.value,"layouts",_.value.canvasData.name).then((a=>{_.value=Object.assign(_.value,a.data.viewData),x.value=a.data.layerData,j.value=a.info,e()})):e()}))]).then((()=>{y.value=!0,window.loading.close(),window.loading=null}))};return l((()=>{L()})),(e,a)=>y.value?(r(),i(p,{key:0,colorsList:g.value,textsList:h.value,editorType:"edit",promptsList:w.value,staticsList:c.value,setting:_.value,layerData:x.value,templateId:f.value,info:j.value},null,8,["colorsList","textsList","promptsList","staticsList","setting","layerData","templateId","info"])):o("",!0)}};export{v as default};
