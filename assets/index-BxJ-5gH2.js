import{g as e,u as a}from"./index-DJa-fsKY.js";import{l}from"./logo2-l66aD4rS.js";import{_ as s}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{K as i,r as u,o as t,L as n,j as o,k as c,m as r,n as v,p as d,u as p,J as h,y as g,B as m,E as b,D as w,v as y,x as k,F as f,A as _,C,w as I,H as x,e as S}from"./lib-B5SO1xxf.js";import{T as B}from"./TLoading-Ba__YXOy.js";import{p as P,s as U,w as T,f as j,a as F,l as D,b as E}from"./index-BKne-HHw.js";import{m as O}from"./menu-B85Lp49n.js";const W={class:"login-outer"},L={class:"login-box-image"},M={class:"login-input-area"},$={class:"logo-area"},q=["src"],z={class:"main-title"},A={class:"sub-title"},G={key:1,class:"input-box"},H={class:"input-item"},K={key:0,class:"input-item"},J={key:1,class:"input-item"},N={class:"input-handle"},R={key:2,class:"input-box"},Q={class:"input-item"},V={class:"input-item"},X={class:"input-item"},Y={class:"input-item"},Z={key:3,class:"button-box"},ee={key:4,class:"button-box"},ae=s({__name:"login",props:{bgColor:{type:String,default:"var(--t-bg-opacity-color)"},maskClickHide:{type:Boolean,default:!0},destroy:{type:Function}},setup(s){const w=i(),{userStore:y}=a();u("tMaskDom");const k=u(null),f=u(null),_=u(null),C=u(!1),I=u(!1),x=u("widthCaptcha"),S=u(!1),B=u("获取验证码"),P=u(!1),U=u(null),T=u(null),j=/^1[3-9]\d{9}$/,F=()=>{x.value="widthPwd"===x.value?"widthCaptcha":"widthPwd",localStorage.setItem("loginType",x.value)},D=()=>{if(S.value)return;if(!k.value||!j.test(k.value))return void w.error("请输入正确的手机号");const a=(new Date).getTime()+3e4;localStorage.setItem("captchaGettingTime",a),E(a),e({phone_number:k.value}).then((e=>{}))},E=e=>{if(!e)return;e=Number(e);const a=(new Date).getTime();a>e?B.value="获取验证码":(B.value=`${Math.ceil((e-a)/1e3)}秒后可发送`,setTimeout((()=>{E(e)}),1e3))},O=e=>{"Enter"===e.code&&ae()},ae=()=>{if(!k.value||!j.test(k.value))return void w.error("请输入正确的手机号");if("widthPwd"===x.value){if(!_.value)return void w.error("请输入密码")}else if("widthCaptcha"===x.value&&!T.value)return void w.error("请输入密码");const e={phone_number:k.value,password:_.value,login_code:T.value};"widthPwd"===x.value?delete e.login_code:"widthCaptcha"===x.value&&delete e.password,y.handleLogin(e).then((()=>{location.reload()}))},le=()=>{k.value&&j.test(k.value)?T.value?_.value?f.value===_.value||w.error("两次输入密码不一致，请检查"):w.error("请输入密码后操作"):w.error("请输入验证码后操作"):w.error("请输入正确的手机号")};return t((()=>{k.value=null,_.value=null;const e=localStorage.getItem("captchaGettingTime");E(e),x.value=localStorage.getItem("loginType")||"widthPwd",n((()=>{C.value=!0}))})),(e,a)=>{const s=o("n-image"),i=o("n-input"),u=o("n-checkbox");return c(),r("div",W,[v("div",{class:b(["login-box show_start",{show_end:C.value}])},[v("div",L,[d(s,{style:{width:"100%",height:"100%"},src:"widthPwd"===x.value?p("/assets/login-image_0-BS1lCqqe.png"):p("/assets/login-image_1-BslzShbL.png")},null,8,["src"])]),v("div",M,[P.value?(c(),r("div",{key:0,class:"to-login",onClick:a[0]||(a[0]=e=>P.value=!1)},a[24]||(a[24]=[v("i",{class:"bi bi-arrow-left"},null,-1)]))):h("",!0),v("div",$,[v("img",{src:p(l),class:"login-logo"},null,8,q),a[25]||(a[25]=g(" U+ Oplus "))]),v("div",z,m(P.value?"你好，请重置密码！":"你好，欢迎回来！"),1),v("div",A,m(P.value?"请输入重置账户信息":"请输入登录账户信息"),1),P.value?h("",!0):(c(),r("div",G,[v("div",H,[v("label",{class:b({hide:0===U.value})},m("widthPwd"===x.value?"手机账号":"手机号"),3),d(i,{class:"login-input",clearable:"",value:k.value,"onUpdate:value":a[1]||(a[1]=e=>k.value=e),placeholder:"新用户登录即注册",onFocus:a[2]||(a[2]=e=>U.value=0),onBlur:a[3]||(a[3]=e=>U.value=null)},null,8,["value"])]),"widthPwd"===x.value?(c(),r("div",K,[v("label",{class:b({hide:1===U.value})},"登录密码",2),d(i,{class:"login-input",onKeydown:O,placeholder:"请输入密码",clearable:"",value:_.value,"onUpdate:value":a[4]||(a[4]=e=>_.value=e),type:"password","show-password-on":"mousedown",onFocus:a[5]||(a[5]=e=>U.value=1),onBlur:a[6]||(a[6]=e=>U.value=null)},null,8,["value"])])):h("",!0),"widthPwd"!==x.value?(c(),r("div",J,[v("label",{class:b({hide:2===U.value})},"验证码",2),d(i,{class:"login-input",placeholder:"请输入验证码",clearable:"",value:T.value,"onUpdate:value":a[7]||(a[7]=e=>T.value=e),onFocus:a[8]||(a[8]=e=>U.value=2),onBlur:a[9]||(a[9]=e=>U.value=null)},null,8,["value"]),v("div",{class:b(["get-captcha",{disable:"获取验证码"===B.value}]),onClick:D},m(B.value),3)])):h("",!0),v("div",N,[d(u,{value:I.value,"onUpdate:value":a[10]||(a[10]=e=>I.value=e),label:"30天内记住密码",size:"large"},null,8,["value"]),v("div",{class:"forget-pwd",onClick:a[11]||(a[11]=e=>P.value=!0)},"忘记密码")])])),P.value?(c(),r("div",R,[v("div",Q,[a[26]||(a[26]=v("label",null,m("手机号"),-1)),d(i,{class:"login-input",clearable:"",value:k.value,"onUpdate:value":a[12]||(a[12]=e=>k.value=e),placeholder:"",onFocus:a[13]||(a[13]=e=>U.value=0),onBlur:a[14]||(a[14]=e=>U.value=null)},null,8,["value"])]),v("div",V,[a[27]||(a[27]=v("label",null,"验证码",-1)),d(i,{class:"login-input",placeholder:"请输入验证码",clearable:"",value:T.value,"onUpdate:value":a[15]||(a[15]=e=>T.value=e),onFocus:a[16]||(a[16]=e=>U.value=1),onBlur:a[17]||(a[17]=e=>U.value=null)},null,8,["value"]),v("div",{class:b(["get-captcha",{disable:"获取验证码"===B.value}]),onClick:D},m(B.value),3)]),v("div",X,[a[28]||(a[28]=v("label",null,"新的密码",-1)),d(i,{class:"login-input",placeholder:"请输入验证码",clearable:"","show-password-on":"mousedown",value:_.value,"onUpdate:value":a[18]||(a[18]=e=>_.value=e),type:"password","show-password":"",onFocus:a[19]||(a[19]=e=>U.value=2),onBlur:a[20]||(a[20]=e=>U.value=null)},null,8,["value"])]),v("div",Y,[a[29]||(a[29]=v("label",null,"确认密码",-1)),d(i,{class:"login-input",placeholder:"请输入验证码",clearable:"","show-password-on":"mousedown",value:f.value,"onUpdate:value":a[21]||(a[21]=e=>f.value=e),type:"password","show-password":"",onFocus:a[22]||(a[22]=e=>U.value=3),onBlur:a[23]||(a[23]=e=>U.value=null)},null,8,["value"])])])):h("",!0),P.value?h("",!0):(c(),r("div",Z,[v("div",{class:"login-btn",onClick:ae},"登录账户"),v("div",{class:"login-btn change-login-type",onClick:F},m("widthPwd"===x.value?"验证码登录":"密码登录"),1)])),P.value?(c(),r("div",ee,[v("div",{class:"login-btn",onClick:le},"重置密码")])):h("",!0),a[30]||(a[30]=v("div",{class:"agreement-box"}," 相关用户协议（注册登录后即代表您同意相关协议） ",-1))])],2)])}}},[["__scopeId","data-v-65731341"]]),le={class:"leftbar-logo"},se={class:"logo-area"},ie=["src"],ue={class:"points-data"},te={class:"person-icon"},ne={class:"menu-list"},oe=["onClick"],ce={class:"menu-item-icon"},re={class:"menu-handle-icon"},ve=["src"],de=s({__name:"leftBar",setup(e){const s=w(),i=y(),u=k(s,"path"),{publicStore:t}=a(),n=k(t,"isCarryOut"),o=[{name:"AI智绘",icon:U,path:"/basic/ai",routeIncluds:["/basic/ai"]},{name:"模板仓库",icon:T,path:"/basic/templateDepot",routeIncluds:["/basic/templateDepot"]},{name:"作品仓库",icon:j,path:"/basic/artWorks",routeIncluds:["/basic/artWorks"]},{name:"模板编辑",icon:F,path:"/basic/modelEditor",routeIncluds:["/basic/modelEditor"]},{name:"资源仓库",icon:D,path:"/basic/resourceCenter",routeIncluds:["/basic/resourceCenter","/basic/resourceCenterInfo","/basic/resourceInfo"]},{name:"数据仓库",icon:E,path:"/basic/dataWarehouse",routeIncluds:["/basic/dataWarehouse","/basic/dataWarehouseEditor"]}];return(e,a)=>(c(),r("div",{class:b(["leftbar-body",{"carry-out":n.value}])},[v("div",le,[v("div",se,[v("img",{src:p(l),class:"logo-icon"},null,8,ie),a[2]||(a[2]=v("label",null,"Oplus",-1))])]),v("div",{class:"leftbar-user",onClick:a[0]||(a[0]=e=>{t.setChargeShow(!0)})},[v("div",ue,[v("div",te,[v("i",{class:b(["bi",p(P)])},null,2)]),a[3]||(a[3]=v("div",{class:"points"},"100/∞积分",-1))]),a[4]||(a[4]=v("div",{class:"username"},"邵大吊",-1)),a[5]||(a[5]=v("div",{class:"points-bar"},[v("div",{class:"points-bar-box"},[v("div",{class:"points-bar-info"})])],-1))]),v("div",ne,[(c(),r(f,null,_(o,(e=>{return v("div",{class:b(["menu-item",{selected:(a=e.routeIncluds,Boolean(a.find((e=>u.value===e))))}]),onClick:a=>(({path:e})=>{i.push(e)})(e),key:e.name},[v("div",ce,[v("i",{class:b(["bi",e.icon])},null,2)]),v("label",null,m(e.name),1)],10,oe);var a})),64))]),v("div",{class:"menu-handle-area",onClick:a[1]||(a[1]=e=>(n.value=!n.value,void t.setIsCarryOut(n.value)))},[v("div",re,[v("img",{src:p(O),class:"menu-handle-icon-item"},null,8,ve)]),a[6]||(a[6]=v("label",null," 收起面板 ",-1))]),a[7]||(a[7]=v("div",{class:"logout-btn"},[v("label",null,"退出登录")],-1))],2))}},[["__scopeId","data-v-75ab9448"]]),pe={class:"charge-body"},he={class:"charge-type-area"},ge=["onClick"],me={class:"charge-input-area-outer"},be={class:"charge-input-area"},we={class:"charge-input-item"},ye={class:"charge-input-area"},ke={class:"charge-input-item"},fe=s({__name:"rightDrawer",setup(e){const{publicStore:l}=a(),s=k(l,"chargeShow"),i=u([{name:"支付宝",key:"aliPay"},{name:"微信",key:"weChatPay"}]),t=u("aliPay"),n=u(10);return(e,a)=>{const l=o("n-input-number"),u=o("n-drawer"),h=o("n-config-provider");return c(),C(h,{theme:p(S)},{default:I((()=>[d(u,{show:s.value,"onUpdate:show":a[1]||(a[1]=e=>s.value=e),width:"16.171rem",placement:"right"},{default:I((()=>[v("div",pe,[v("div",he,[(c(!0),r(f,null,_(i.value,(e=>(c(),r("div",{class:b(["charge-type-item",{selected:t.value===e.key}]),onClick:a=>t.value=e.key,key:e.key},m(e.name),11,ge)))),128))]),a[6]||(a[6]=v("div",{class:"charge-title"},[v("div",{class:"charge-title-text"},"充值积分"),v("div",{class:"charge-title-view"},[v("label",null," RMB "),v("div",{class:"charge-title-icon"},[v("i",{class:"bi bi-arrow-right"})]),v("label",null," U+积分 ")])],-1)),v("div",me,[v("div",be,[a[3]||(a[3]=v("div",{class:"charge-input-title"},"充值",-1)),v("div",we,[d(l,{placeholder:"10",value:n.value,"onUpdate:value":a[0]||(a[0]=e=>n.value=e),style:x(`width: ${.67*Math.ceil(n.value>10?String(n.value).length:2)+1.7}rem;`),max:1e4,min:10,class:"editor-setting-input input","show-button":!1},{suffix:I((()=>a[2]||(a[2]=[v("div",{class:"icon"},"￥",-1)]))),_:1},8,["value","style"])])]),v("div",ye,[a[5]||(a[5]=v("div",{class:"charge-input-title"},"获得",-1)),v("div",ke,[v("label",null,m(10*n.value),1),a[4]||(a[4]=v("div",{class:"icon"},"积分",-1))])])])])])),_:1},8,["show"])])),_:1},8,["theme"])}}},[["__scopeId","data-v-89901a05"]]),_e={class:"basic-body"},Ce={key:1,class:"basic-view"},Ie=s({__name:"index",setup(e){const{userStore:l,publicStore:s}=a(),i=w(),u=k(l.token),n=k(s,"isCarryOut");return t((()=>{window.loading||(window.loading=B()),setTimeout((()=>{window.loading.close(),window.loading=null}),200)})),(e,a)=>{const l=o("router-view"),s=o("n-message-provider"),t=o("n-dialog-provider");return c(),r("div",_e,[d(t,null,{default:I((()=>[d(s,null,{default:I((()=>[u.value?h("",!0):(c(),C(ae,{key:0})),u.value?(c(),r("div",Ce,[d(de),v("div",{class:"basic-content",style:x(`width: calc(100% - ${n.value?2.99:6.8}rem);`)},[(c(),C(l,{key:i.path}))],4)])):h("",!0),d(fe)])),_:1})])),_:1})])}}},[["__scopeId","data-v-4b927344"]]);export{Ie as default};
