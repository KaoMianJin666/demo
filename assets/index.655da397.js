import{T as a,g as e,h as t}from"./index.4240cc1d.js";import{r as l,P as s,j as n,s as i,k as o,J as r,a as u,o as d,B as v}from"./lib.c3c0caa6.js";const m={__name:"index",setup(m){const c=r(),p=l([]),w=l([]),g=l(!1),y=l(c.query.artwork_id),f=l({template_filter:"normal",template_level:"normal",points:1}),h=l({canvasData:{name:c.query.file_name||"",width:2048,height:2048}}),D=l({groups:{},layers:{},elements:{}});s((()=>c.query.artwork_id),((a,e)=>{y.value=a,g.value=!1,v((()=>{g.value=!0}))}));const _=()=>{window.loading||(window.loading=a()),Promise.all([new Promise((a=>{e("prompts").then((e=>{p.value=e.data,a()}))})),new Promise((a=>{e("statics").then((e=>{w.value=e.data,a()}))})),new Promise((a=>{h.value.canvasData.name?t(y.value,h.value.canvasData.name).then((e=>{h.value=Object.assign(h.value,e.data.viewData),D.value=e.data.layerData,f.value=e.data.info,a()})):a()}))]).then((()=>{g.value=!0,window.loading.close(),window.loading=null}))};return n((()=>{_()})),(a,e)=>{const t=u("modelEditor");return g.value?(d(),i(t,{key:0,editorType:"gallery",info:f.value,templateId:y.value,layerData:D.value,promptsList:p.value,staticsList:w.value,setting:h.value},null,8,["info","templateId","layerData","promptsList","staticsList","setting"])):o("",!0)}}};export{m as default};
