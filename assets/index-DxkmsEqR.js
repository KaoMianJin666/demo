import{x as e,m as a,n as t,F as l,A as s,H as o,k as n,J as d,r as u,D as r,C as i,T as c,I as p,j as v,B as y,p as m,w as f,y as g,u as _,V as k,G as b,N as w,o as h,E as D,M as x,L as S}from"./lib-CGZrokFx.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{T as R}from"./TLoading-iM_Jx5sS.js";import{u as A,o as T}from"./opInput-DjRdlfUi.js";import{l as W}from"./logo2-l66aD4rS.js";import{u as O,_ as I}from"./index-CycG4A1b.js";import C from"./index-CPzM5edq.js";import{a as V,g as E}from"./promptSetting-JG4oS3dx.js";import{g as P}from"./artwork-CWzPotmd.js";import L from"./index-CWI7FlEH.js";import{m as M,c as N,h as U,a as q}from"./index-DafDK79M.js";/* empty css                                                                 */import{n as z,m as J,j as Y,o as $,q as B,u as F,v as G,y as H,z as K}from"./index-DBr3Z3sO.js";import{a as Q,u as X,s as Z}from"./dataWarehouse-f8CJaR3G.js";import{j as ee}from"./file-C3RgH22k.js";import"./modelCard-CKydeKi9.js";import"./menu-B85Lp49n.js";const ae={class:"page-count-body"},te={class:"page-count-inner"},le=["num"],se=j({__name:"pageCount",props:{pageData:{type:Array(),default:()=>[]},now:{type:Number,default:0}},emits:["addPage"],setup(u,{emit:r}){const i=r,c=u,p=e(c,"pageData"),v=e(c,"now");return(e,u)=>(n(),a("div",ae,[t("div",te,[p.value.length>1?(n(!0),a(l,{key:0},s(p.value,((e,l)=>{return n(),a("div",{class:"page-count",style:d((s=l,s===v.value?{transform:"translateY(0rem)"}:s>v.value?{transform:"translateY(100%)"}:s<v.value?{transform:"translateY(-100%)"}:void 0)),key:l},u[1]||(u[1]=[t("div",{class:"page-count-line"},null,-1),t("label",null,null,-1)]),4);var s})),128)):o("",!0),v.value===p.value.length-1?(n(),a("div",{key:1,class:"add-btn",num:p.value.length,onClick:u[0]||(u[0]=e=>{i("addPage")})},u[2]||(u[2]=[t("div",{class:"page-count-line"},null,-1),t("label",null,"+",-1)]),8,le)):o("",!0)])]))}},[["__scopeId","data-v-95a86af8"]]),oe=j({__name:"modelSelectedDialog",props:["type"],emits:["setData"],setup(t,{expose:l,emit:s}){const{publicStore:d}=O(),p=s,v=e(d,"isCarryOut"),y=u(!1),m=e=>{p("setData",e),y.value=!1};return l({init:()=>{y.value=!0}}),(e,l)=>(n(),r(c,{to:"body"},[y.value?(n(),a("div",{key:0,class:i(["model-selected-dialog-body",{expand:!v.value}])},[y.value?(n(),r(C,{key:0,componentType:"component",type:t.type,onSetData:m},null,8,["type"])):o("",!0)],2)):o("",!0)]))}},[["__scopeId","data-v-15493417"]]),ne={class:"json-editor-body"},de={class:"input-area"},ue={key:1},re={key:2,class:"image-area"},ie=["src"],ce={class:"add-image-area"},pe=j({__name:"jsonEditor",props:{modelValue:{default:()=>[{key:"",code:null,value:null}]},list:{default:!1}},emits:["update:modelValue"],setup(e,{expose:d,emit:c}){const w=k((()=>I((()=>Promise.resolve().then((()=>ve))),void 0))),h=[{name:"文本",code:"text"},{name:"图片",code:"image"},{name:"字典",code:"map"},{name:"列表",code:"list"}],D=u(e.modelValue),x=c;p(D.value,(e=>{x("update:modelValue",e)}));const S=()=>{D.value.push({key:"",code:null,value:null})},j=(e=D.value,a="map")=>{const t="map"===a?{}:[];return e.forEach((({key:e,code:l,value:s},o)=>{if(l)switch(l){case"text":case"image":"map"===a?t[e]=s:t[o]=s;break;case"list":"map"===a?t[e]=j(s,"list"):t[o]=j(s,"list");break;case"map":"map"===a?t[e]=j(s):t[o]=j(s)}})),t},R=(e={},a="map")=>{let t=[];return Object.keys(e).forEach((a=>{const l={key:a,code:null,value:null};Array.isArray(e[a])?e[a].every((e=>e.includes("http")))?(l.code="image",l.value=e[a]):(l.code="list",l.value=R(e[a]).map((e=>(e.key=null,e)))):"string"==typeof e[a]?(l.code="text",l.value=e[a]):(l.code="map",l.value=R(e[a])),t.push(l)})),t};return d({getData:()=>D.value,getSaveData:j,init:e=>{const a=e[0],t=R(a);D.value=t}}),(d,u)=>{const c=v("n-input"),p=v("n-button"),k=v("n-upload");return n(),a("div",ne,[t("div",de,[(n(!0),a(l,null,s(D.value,((d,v)=>(n(),a("div",{class:"input-group",key:v},[t("div",{class:i(["input-key",{list:e.list,unlist:!e.list}])},[e.list?(n(),a("label",ue,y(v+1),1)):(n(),r(c,{key:0,value:d.key,"onUpdate:value":e=>d.key=e,placeholder:"键名称"},null,8,["value","onUpdate:value"]))],2),t("div",{class:i(["input-value",{list:e.list,unlist:!e.list}])},[d.code?o("",!0):(n(),a(l,{key:0},s(h,(e=>m(p,{class:"type-btn",key:e.code,onClick:a=>((e,a)=>{switch(e.code=a,a){case"text":e.value=null;break;case"image":case"map":case"list":e.value=[]}})(d,e.code)},{default:f((()=>[g(y(e.name),1)])),_:2},1032,["onClick"]))),64)),"text"===d.code?(n(),r(c,{key:1,value:d.value,"onUpdate:value":e=>d.value=e,placeholder:"请输入文本",type:"textarea"},null,8,["value","onUpdate:value"])):o("",!0),"image"===d.code?(n(),a("div",re,[(n(!0),a(l,null,s(d.value,((e,l)=>(n(),a("div",{class:"image-item",key:`image-${l}`},[t("img",{src:e},null,8,ie)])))),128)),t("div",ce,[m(k,{"show-file-list":!1,accept:"image/*",action:"",onBeforeUpload:(...e)=>((e,{file:a})=>{const t=b(),l=new FormData;return l.append("file",a.file),A(t,l).then((a=>{200===a.code&&D.value[e].value.push(a.data)})),!1})(v,...e)},{default:f((()=>u[0]||(u[0]=[t("i",{class:"bi bi-plus"},null,-1)]))),_:2},1032,["onBeforeUpload"])])])):o("",!0),"map"===d.code?(n(),r(_(w),{key:3,class:"inline",modelValue:d.value,"onUpdate:modelValue":e=>d.value=e},null,8,["modelValue","onUpdate:modelValue"])):o("",!0),"list"===d.code?(n(),r(_(w),{key:4,list:!0,class:"inline",modelValue:d.value,"onUpdate:modelValue":e=>d.value=e},null,8,["modelValue","onUpdate:modelValue"])):o("",!0)],2)])))),128)),t("div",{class:i(["add-area",{list:e.list,unlist:!e.list}])},[t("label",{onClick:S},"+")],2)])])}}},[["__scopeId","data-v-477d4a69"]]),ve=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),ye={class:"model-selected-title"},me={class:"model-selected-title-text"},fe={key:0,class:"other-data-area"},ge={key:1,class:"selected-data-area"},_e={class:"card-tags"},ke=j({__name:"modelSelected",props:{type:{},data:{default:()=>[]}},setup(d,{expose:r}){const{publicStore:c}=O(),p=e(c,"isCarryOut"),_=d,k=u(null),b=u(null),h=u(0),D={prompts:"动态",statics:"静态",texts:"文字",colors:"调色板",designs:"设计理念"},x={prompts:["resource_id","preview","resource_name","description","keywords","trigger","server_type"],statics:["resource_id","preview","resource_name","description","keywords","cloud_folder"],texts:["resource_id","preview","resource_name","description","keywords","cloud_folder"],colors:["resource_id","preview","resource_name","description","keywords","colors"]},S=u(_.data[0]?_.data[0].value:[]),j=()=>{k.value.init()},R=e=>{V(e.resource_id).then((e=>{if(200===e.code)if("designs"===_.type){const a=Object.assign({data:e.data},e.info);S.value.push(a)}else{const a=Object.assign(e.data,e.info);S.value.push(a)}}))},A=e=>{const a={};return x[_.type]?(x[_.type].forEach((t=>{a[t]=e[t]})),a):e.data?Object.assign(e.data,{resource_id:e.resource_id,preview:e.preview}):{resource_id:e.resource_id,preview:e.preview}};return r({getSaveData:()=>({role:"database",type:`${D[_.type]}资源参考`,content:[{type:"json",value:S.value.map((e=>A(e)))}]})}),(e,u)=>{const r=v("n-scrollbar"),c=v("n-image"),_=v("n-tag"),x=v("n-space");return n(),a("div",{class:i(["model-selected-body",{expand:!p.value}])},[t("div",ye,[t("div",me," 选择"+y(D[d.type])+"资源 ",1)]),1===h.value?(n(),a("div",fe,[m(r,{onWheel:u[0]||(u[0]=w((()=>{}),["stop"]))},{default:f((()=>[m(pe,{ref_key:"jsonEditorRef",ref:b},null,512)])),_:1})])):o("",!0),0===h.value?(n(),a("div",ge,[(n(!0),a(l,null,s(S.value,(e=>(n(),a("div",{class:"card",key:e.resource_id},[m(c,{width:"100%",src:e.preview,class:"image",fit:"contain"},null,8,["src"]),t("div",_e,[m(x,null,{default:f((()=>[m(_,{bordered:!1},{default:f((()=>u[1]||(u[1]=[g(" 家纺平面设计 ")]))),_:1}),m(_,{bordered:!1},{default:f((()=>u[2]||(u[2]=[g(" 卡通风格和可爱ins风 ")]))),_:1}),m(_,{bordered:!1},{default:f((()=>u[3]||(u[3]=[g(" 奶牛 ")]))),_:1}),m(_,{bordered:!1},{default:f((()=>u[4]||(u[4]=[g(" 胡萝卜 ")]))),_:1}),m(_,{bordered:!1},{default:f((()=>u[5]||(u[5]=[g(" 樱桃 ")]))),_:1}),m(_,{bordered:!1},{default:f((()=>u[6]||(u[6]=[g(" 莫兰蒂色 ")]))),_:1})])),_:1})])])))),128)),S.value.length<3?(n(),a("div",{key:0,class:"card",onClick:j},u[7]||(u[7]=[t("i",{class:"bi bi-plus"},null,-1)]))):o("",!0)])):o("",!0),m(oe,{type:d.type,ref_key:"modelSelectedDialogRef",ref:k,onSetData:R},null,8,["type"])],2)}}},[["__scopeId","data-v-1e509e85"]]),be={class:"other-data-area"},we=j({__name:"generateDemandAnalysis",props:{type:{},data:{default:()=>[]}},setup(l,{expose:s}){const{publicStore:o}=O(),d=e(o,"isCarryOut"),r=l;u(null);const c=u(null);u(0),u([]);return h((()=>{r.data&&r.data[0]&&(data.value=c.value.init(r.data[0].value))})),s({getSaveData:()=>({role:"system",type:"需求分析",content:[{type:"json",value:[c.value.getSaveData()]}]})}),(e,l)=>{const s=v("n-scrollbar");return n(),a("div",{class:i(["model-selected-body",{expand:!d.value}])},[l[1]||(l[1]=t("div",{class:"model-selected-title"},[t("div",{class:"model-selected-title-text"}," 生成需求分析 ")],-1)),t("div",be,[m(s,{onWheel:l[0]||(l[0]=w((()=>{}),["stop"]))},{default:f((()=>[m(pe,{ref_key:"jsonEditorRef",ref:c},null,512)])),_:1})])],2)}}},[["__scopeId","data-v-b7860791"]]),he={class:"other-data-area"},De=j({__name:"generateText",setup(l){const{publicStore:s}=O(),o=e(s,"isCarryOut");return(e,l)=>{const s=v("n-input");return n(),a("div",{class:i(["model-selected-body",{expand:!o.value}])},[l[0]||(l[0]=t("div",{class:"model-selected-title"},[t("div",{class:"model-selected-title-text"}," 生成文本段落 ")],-1)),t("div",he,[m(s,{type:"textarea",placeholder:"请输入文本段落",style:{height:"100%"},resize:"none"})])],2)}}},[["__scopeId","data-v-5c1fa973"]]),xe=j({__name:"artworkSelectedDialog",props:["type"],emits:["setData"],setup(t,{expose:l,emit:s}){const{publicStore:d}=O(),p=s,v=e(d,"isCarryOut"),y=u(!1),m=e=>{p("setData",e),y.value=!1};return l({init:()=>{y.value=!0}}),(e,l)=>(n(),r(c,{to:"body"},[y.value?(n(),a("div",{key:0,class:i(["model-selected-dialog-body",{expand:!v.value}])},[y.value?(n(),r(L,{key:0,componentType:"component",type:t.type,onSetData:m},null,8,["type"])):o("",!0)],2)):o("",!0)]))}},[["__scopeId","data-v-05088086"]]),Se={key:0,class:"selected-data-area"},je={class:"card-tags"},Re={key:1,class:"selected-data-area"},Ae=j({__name:"artWorkSelected",props:{type:{},data:{default:()=>[]}},setup(d,{expose:c}){b();const{publicStore:p}=O(),y=e(p,"isCarryOut"),_=d,k=u(null);u(null);const w=u(_.data[0]&&"generateArtWork"===_.type?1:0),h=u(_.data[0]?_.data[0].value:[]),S=u(_.data[0]?_.data[0].value:[]),j=D(),R=u([]),A=u([]),T=u([]),W=u([]),I=u({template_filter:"nomal",template_level:"nomal",points:1}),C=u(!1),V=u(null),L=u({canvasData:{name:j.query.file_name||"",width:2048,height:2048}}),z=u({groups:{},layers:{},elements:{}}),J=u(!1),Y=e=>new Promise((a=>{P(e).then((e=>{L.value=Object.assign(L.value,e.data.viewData),L.value.canvasData.name=e.info.artwork_name,z.value=e.data.layerData,I.value=e.info,J.value=!0,a()}))})),$=e=>{Promise.all([new Promise((e=>{E("colors").then((a=>{T.value=a.data,e()}))})),new Promise((e=>{E("texts").then((a=>{W.value=a.data,e()}))})),new Promise((e=>{E("prompts").then((a=>{R.value=a.data,e()}))})),new Promise((e=>{E("statics").then((a=>{A.value=a.data,e()}))})),Y(e)]).then((()=>{C.value=!0}))},B=()=>{k.value.init()},F=e=>{h.value.push(e),"generateArtWork"===_.type&&(V.value=e.artwork_id,w.value=1,J.value=!1,G())},G=async(e=V.value)=>{J.value||(w.value||"generateArtWork"===_.type)&&(N(),S.value.length?(J.value=!0,x((()=>{S.value.forEach((async e=>{await U(e)}))}))):e?$(e):J.value=!0)};return c({hideView:()=>{if("generateArtWork"===_.type){if(!J.value)return;J.value=!1,S.value.length<q.length&&(S.value=JSON.parse(JSON.stringify(q))),S.value.length&&N()}else"selectedArtWork"===_.type&&(J.value=!1)},initView:G,getSaveData:()=>"generateArtWork"===_.type?(w.value&&J.value&&(S.value=JSON.parse(JSON.stringify(q))),{role:"system",type:"生成操作链",content:[{type:"json",value:S.value}]}):"selectedArtWork"===_.type?{role:"system",type:"作品资源参考",content:[{type:"json",value:h.value}]}:void 0}),(e,d)=>{const u=v("n-image"),c=v("n-tag"),p=v("n-space");return n(),a("div",{class:i(["model-selected-body",{expand:!y.value}])},[d[7]||(d[7]=t("div",{class:"model-selected-title"},[t("div",{class:"model-selected-title-text"},"生成作品资源")],-1)),0===w.value?(n(),a("div",Se,[(n(!0),a(l,null,s(h.value,(e=>(n(),a("div",{class:"card",key:e.artwork_id},[m(u,{width:"100%",src:e.preview,class:"image",fit:"contain"},null,8,["src"]),t("div",je,[m(p,null,{default:f((()=>[m(c,{bordered:!1},{default:f((()=>d[0]||(d[0]=[g(" 家纺平面设计 ")]))),_:1}),m(c,{bordered:!1},{default:f((()=>d[1]||(d[1]=[g(" 卡通风格和可爱ins风 ")]))),_:1}),m(c,{bordered:!1},{default:f((()=>d[2]||(d[2]=[g(" 奶牛 ")]))),_:1}),m(c,{bordered:!1},{default:f((()=>d[3]||(d[3]=[g(" 胡萝卜 ")]))),_:1}),m(c,{bordered:!1},{default:f((()=>d[4]||(d[4]=[g(" 樱桃 ")]))),_:1}),m(c,{bordered:!1},{default:f((()=>d[5]||(d[5]=[g(" 莫兰蒂色 ")]))),_:1})])),_:1})])])))),128)),t("div",{class:"card",onClick:B},d[6]||(d[6]=[t("i",{class:"bi bi-plus"},null,-1)]))])):o("",!0),1===w.value?(n(),a("div",Re,[J.value?(n(),r(M,{key:0,colorsList:T.value,textsList:W.value,editorType:"generate",promptsList:R.value,staticsList:A.value,setting:L.value,layerData:z.value,templateId:V.value,info:I.value,needOpInput:!1,needTaskList:!1,needDelete:!1},null,8,["colorsList","textsList","promptsList","staticsList","setting","layerData","templateId","info"])):o("",!0)])):o("",!0),m(xe,{ref_key:"artworkSelectedDialogRef",ref:k,onSetData:F},null,512)],2)}}},[["__scopeId","data-v-5398b95f"]]),Te={class:"other-data-area"},We=j({__name:"selectedDisplay",props:{type:{},data:{default:()=>[]}},setup(l,{expose:s}){const{publicStore:o}=O(),d=e(o,"isCarryOut"),r=l,c=u([]);u(null);const p=u(null);u(0),u([]);return h((()=>{r.data&&r.data[0]&&(c.value=p.value.init(r.data[0].value))})),s({getSaveData:()=>({role:"system",type:"参考资源分析",content:[{type:"json",value:[p.value.getSaveData()]}]})}),(e,l)=>{const s=v("n-scrollbar");return n(),a("div",{class:i(["model-selected-body",{expand:!d.value}])},[l[1]||(l[1]=t("div",{class:"model-selected-title"},[t("div",{class:"model-selected-title-text"}," 选择布局资源 ")],-1)),t("div",Te,[m(s,{onWheel:l[0]||(l[0]=w((()=>{}),["stop"]))},{default:f((()=>[m(pe,{ref_key:"jsonEditorRef",ref:p},null,512)])),_:1})])],2)}}},[["__scopeId","data-v-d2977504"]]),Oe={class:"other-data-area"},Ie=j({__name:"referenceResource",props:{type:{},data:{default:()=>[]}},setup(l,{expose:s}){const{publicStore:o}=O(),d=e(o,"isCarryOut"),r=l,c=u([]);u(null);const p=u(null);u(0),u([]);return h((()=>{r.data&&r.data[0]&&(c.value=p.value.init(r.data[0].value))})),s({getSaveData:()=>({role:"system",type:"参考资源分析",content:[{type:"json",value:[p.value.getSaveData()]}]})}),(e,l)=>{const s=v("n-scrollbar");return n(),a("div",{class:i(["model-selected-body",{expand:!d.value}])},[l[1]||(l[1]=t("div",{class:"model-selected-title"},[t("div",{class:"model-selected-title-text"}," 参考资源分析 ")],-1)),t("div",Oe,[m(s,{onWheel:l[0]||(l[0]=w((()=>{}),["stop"]))},{default:f((()=>[m(pe,{ref_key:"jsonEditorRef",ref:p},null,512)])),_:1})])],2)}}},[["__scopeId","data-v-606af7f2"]]),Ce={key:0,class:"set-data-area"},Ve={key:1,class:"init-area"},Ee=["onClick"],Pe={class:"init-card-info"},Le={class:"icon"},Me={class:"name"},Ne={class:"content"},Ue={class:"type"},qe=j({__name:"pageItem",props:{count:{type:Number,default:0},now:{type:Number,default:0},data:{}},setup(c,{expose:p}){const v={input:"搜索资源",output:"生成结果"},m=c,f=u(null),g=u(null),_={selectedModelRef:u(null),generateDemandAnalysisRef:u(null),referenceResourceRef:u(null),generateTextRef:u(null),generateArtWorkRef:u(null),selectedArtWorkRef:u(null),selectedDisplayRef:u(null)},k=e(m,"count"),b=e(m,"now"),w=e(m,"data"),D=["动态资源参考","静态资源参考","文字资源参考","调色板资源参考","设计理念资源参考","布局资源参考","作品资源参考","参考资源分析","需求分析","生成操作链"],S=[{name:"选择动态资源",content:"选择可参考的动态资源",icon:z,cardType:"input",code:"selectedModel",type:"prompts"},{name:"选择静态资源",content:"选择可参考的静态资源",icon:J,cardType:"input",code:"selectedModel",type:"statics"},{name:"选择文字资源",content:"选择可参考的文字资源",icon:Y,cardType:"input",code:"selectedModel",type:"texts"},{name:"选择调色板",content:"合理且舒适的颜色搭配",icon:$,cardType:"input",code:"selectedModel",type:"colors"},{name:"选择设计理念",content:"无数种设计思想的集合",icon:B,cardType:"input",code:"selectedModel",type:"designs"},{name:"选择作品资源",content:"选择用户需要的作品资源",icon:F,cardType:"input",code:"selectedArtWork",type:"prompts"},{name:"选择布局资源",content:"选择需要生成设计的布局",icon:G,cardType:"input",code:"selectedDisplay",type:"prompts"},{name:"参考资源分析",content:"生成用户需求的参考分析",icon:H,cardType:"output",code:"referenceResource",type:""},{name:"生成需求分析",content:"生成用户需求的模板分析",icon:K,cardType:"output",code:"generateDemandAnalysis",type:""},{name:"生成作品资源",content:"生成用户需要的模板资源",icon:F,cardType:"output",code:"generateArtWork",type:"designs"}],j=(e=k.value)=>e===b.value+1?("generateArtWork"===f.value&&(_.generateArtWorkRef.value?_.generateArtWorkRef.value.initView():x((()=>{_.generateArtWorkRef.value.initView()}))),{top:"0rem",zIndex:1}):("generateArtWork"===f.value&&(_.generateArtWorkRef.value?_.generateArtWorkRef.value.hideView():x((()=>{_.generateArtWorkRef.value.hideView()}))),{display:"none"});return h((()=>{if(w.value.type){const e=D.findIndex((e=>e===w.value.type));f.value=S[e].code,g.value=S[e].type}})),p({getSaveData:()=>f.value?_[`${f.value}Ref`].value.getSaveData():null}),(e,u)=>(n(),a("div",{class:"page-item-body",style:d(j())},[null!==f.value?(n(),a("div",Ce,["selectedModel"===f.value?(n(),r(ke,{key:0,type:g.value,data:w.value.content,ref:_.selectedModelRef},null,8,["type","data"])):o("",!0),"generateDemandAnalysis"===f.value?(n(),r(we,{key:1,data:w.value.content,ref:_.generateDemandAnalysisRef},null,8,["data"])):o("",!0),"referenceResource"===f.value?(n(),r(Ie,{key:2,data:w.value.content,ref:_.referenceResourceRef},null,8,["data"])):o("",!0),"selectedDisplay"===f.value?(n(),r(We,{key:3,data:w.value.content,ref:_.selectedDisplayRef},null,8,["data"])):o("",!0),"generateText"===f.value?(n(),r(De,{key:4,data:w.value.content,ref:_.generateTextRef},null,8,["data"])):o("",!0),"selectedArtWork"===f.value||"generateArtWork"===f.value?(n(),r(Ae,{key:5,data:w.value.content,type:f.value,ref:_[`${f.value}Ref`]},null,8,["data","type"])):o("",!0)])):o("",!0),null===f.value?(n(),a("div",Ve,[(n(),a(l,null,s(S,((e,a)=>t("div",{class:"init-card",key:a,onClick:a=>(({code:e,type:a})=>{f.value=e,g.value=a})(e)},[t("div",Pe,[t("div",Le,[t("i",{class:i(["bi",e.icon])},null,2)]),t("div",Me,y(e.name),1),t("div",Ne,y(e.content),1),t("div",Ue,y(v[e.cardType]),1)])],8,Ee))),64))])):o("",!0)],4))}},[["__scopeId","data-v-09dca004"]]),ze={class:"page-ouoter-body"},Je=j({__name:"pageOuter",props:{count:{type:Number,default:0},now:{type:Number,default:0},pageData:{type:Array,default:()=>[]}},setup(t,{expose:o}){const d=t,i=u(null);o({getSaveData:()=>{const e=[];return i.value.forEach((a=>{const t=a.getSaveData();t&&e.push(t)})),e}});const c=e(d,"pageData");e(d,"count");const p=e(d,"now");return(e,t)=>(n(),a("div",ze,[(n(!0),a(l,null,s(c.value,((e,a)=>(n(),r(qe,{ref_for:!0,ref_key:"page",ref:i,data:e,key:e.uuid,count:a+1,now:p.value},null,8,["data","count","now"])))),128))]))}},[["__scopeId","data-v-6b49b489"]]),Ye={class:"page-count"},$e={class:"data-warehouse-editor"},Be={class:"data-warehouse-editor-input-box"},Fe={class:"logo-area"},Ge=["src"],He={class:"data-warehouse-editor-input-area"},Ke={class:"data-warehouse-editor-view"},Qe=j({__name:"index",setup(l){const s=S(),o=D(),d=e(o.query,"id"),r=u(o.query.type),i=u(0),c=u(null),p=u(null),y=u([]),k=u(!1),x=e=>{if(e.preventDefault(),!k.value){if(k.value=!0,setTimeout((()=>{k.value=!1}),500),e.deltaY<0){if(i.value-1<0)return;i.value--}else if(e.deltaY>0){if(i.value+1>y.value.length-1)return;i.value++}e.stopPropagation()}},j=()=>{y.value.push({}),i.value=y.value.length-1},A=()=>{const e=p.value.getSaveData(),a=ee(e,String((new Date).getTime())),t=new FormData;t.append("file",a),d.value||0===d.value?X({data_id:d.value,data_type:r.value,data_status:"进行中",formData:t}).then((e=>{200===e.code&&s.success("更新成功")})):Z({data_type:r.value,data_status:"进行中",formData:t}).then((e=>{200===e.code&&(d.value=e.data.data_id,s.success("保存成功"))}))};return h((()=>{window.loading||(window.loading=R()),d.value?Q({data_id:d.value}).then((e=>{200===e.code&&(y.value=e.data.map((e=>(e.uuid=b(),e))))})):y.value=[{}],setTimeout((()=>{window.loading&&(window.loading.close(),window.loading=null)}),300)})),(e,l)=>{const s=v("n-button");return n(),a("div",{class:"data-warehouse-editor-body",onWheel:w(x,["stop"]),tabindex:"0"},[t("div",Ye,[m(se,{pageData:y.value,now:i.value,onAddPage:j},null,8,["pageData","now"])]),t("div",$e,[t("div",Be,[t("div",Fe,[t("img",{src:_(W)},null,8,Ge),l[0]||(l[0]=t("label",null,"Oplus",-1))]),t("div",He,[m(T,{style:{"box-shadow":"var(--op-thr-shadow)"},ref_key:"opInputRef",ref:c},null,512)]),m(s,{class:"save-btn",size:"large",onClick:A},{default:f((()=>l[1]||(l[1]=[g("保存数据")]))),_:1})]),l[2]||(l[2]=t("div",{class:"message"}," 参考其他的设计作品，查看是否有喜欢的风格布局或者元素，把它加入你的设计理念中！ ",-1)),t("div",Ke,[m(Je,{now:i.value,pageData:y.value,ref_key:"pageOuterRef",ref:p},null,8,["now","pageData"])])])],32)}}},[["__scopeId","data-v-c795700a"]]);export{Qe as default};
