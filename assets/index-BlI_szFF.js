import{g as e,a}from"./promptSetting-BkradiJE.js";import{r as t,z as s,o as l,v as i,C as o,w as n,h as r,E as m}from"./lib-BPhyYzwe.js";import{T as u}from"./TLoading-DaX5hBaF.js";import{m as p}from"./index-o30wH5gG.js";import"./index-BPuUIeLS.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-Z7iGqVdO.js";import"./file-C3RgH22k.js";import"./modelEditor-CkwFY-_5.js";import"./menu-B85Lp49n.js";const v={__name:"index",setup(v){const d=n(),w=t([]),c=t([]),g=t([]),h=t([]),j=t({template_filter:"nomal",template_level:"nomal",points:1}),f=t(!1),y=t(d.query.template_id?Number(d.query.template_id):null),_=t({canvasData:{name:d.query.file_name||"",width:2048,height:2048}}),x=t({groups:{},layers:{},elements:{}});s((()=>d.query.template_id),((e,a)=>{y.value=e,f.value=!1,m((()=>{f.value=!0}))}));const L=()=>{window.loading||(window.loading=u()),Promise.all([new Promise((a=>{e("colors").then((e=>{g.value=e.data,a()}))})),new Promise((a=>{e("texts").then((e=>{h.value=e.data,a()}))})),new Promise((a=>{e("prompts").then((e=>{w.value=e.data,a()}))})),new Promise((a=>{e("statics").then((e=>{c.value=e.data,a()}))})),new Promise((e=>{_.value.canvasData.name?a(y.value,"layouts",_.value.canvasData.name).then((a=>{_.value=Object.assign(_.value,a.data.viewData),x.value=a.data.layerData,j.value=a.info,e()})):e()}))]).then((()=>{f.value=!0,window.loading.close(),window.loading=null}))};return l((()=>{L()})),(e,a)=>f.value?(r(),i(p,{key:0,colorsList:g.value,textsList:h.value,editorType:"edit",promptsList:w.value,staticsList:c.value,setting:_.value,layerData:x.value,templateId:y.value,info:j.value},null,8,["colorsList","textsList","promptsList","staticsList","setting","layerData","templateId","info"])):o("",!0)}};export{v as default};
