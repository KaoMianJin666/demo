import{g as a,u as e}from"./index-D2CTju66.js";import{l}from"./logo2-l66aD4rS.js";import{_ as s}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{L as o,r as u,o as i,M as t,j as n,k as c,m as r,n as v,H as d,u as p,y as h,B as m,C as b,p as g,E as w,v as y,x as k,F as _,A as f,D as C,w as I,J as B,e as x}from"./lib-CGZrokFx.js";import{T as S}from"./TLoading-CzYcMMi0.js";import{p as P,s as U,w as T,f as j,a as F,l as D,b as V}from"./index-DBr3Z3sO.js";import{m as W}from"./menu-B85Lp49n.js";/* empty css                                                                 */const E={class:"login-outer"},M={class:"login-input-area"},O={class:"logo-area"},$=["src"],L={class:"main-title"},A={class:"sub-title"},G={key:1,class:"input-box"},H={class:"input-handle"},q={key:2,class:"input-box"},z={key:3,class:"button-box"},J={key:4,class:"button-box"},K=s({__name:"login",props:{bgColor:{type:String,default:"var(--t-bg-opacity-color)"},maskClickHide:{type:Boolean,default:!0},destroy:{type:Function}},setup(s){const w=o(),{userStore:y}=e();u("tMaskDom");const k=u(null),_=u(null),f=u(null),C=u(!1),I=u(!1),B=u("widthCaptcha"),x=u(!1),S=u("获取验证码"),P=u(!1),U=u(null),T=u(null),j=/^1[3-9]\d{9}$/,F=()=>{B.value="widthPwd"===B.value?"widthCaptcha":"widthPwd",localStorage.setItem("loginType",B.value)},D=()=>{if(x.value)return;if(!k.value||!j.test(k.value))return void w.error("请输入正确的手机号");const e=(new Date).getTime()+3e4;localStorage.setItem("captchaGettingTime",e),V(e),a({phone_number:k.value}).then((a=>{}))},V=a=>{if(!a)return;a=Number(a);const e=(new Date).getTime();e>a?S.value="获取验证码":(S.value=`${Math.ceil((a-e)/1e3)}秒后可发送`,setTimeout((()=>{V(a)}),1e3))},W=a=>{"Enter"===a.code&&K()},K=()=>{if(!k.value||!j.test(k.value))return void w.error("请输入正确的手机号");if("widthPwd"===B.value){if(!f.value)return void w.error("请输入密码")}else if("widthCaptcha"===B.value&&!T.value)return void w.error("请输入密码");const a={phone_number:k.value,password:f.value,login_code:T.value};"widthPwd"===B.value?delete a.login_code:"widthCaptcha"===B.value&&delete a.password,y.handleLogin(a).then((()=>{location.reload()}))},N=()=>{k.value&&j.test(k.value)?T.value?f.value?_.value===f.value||w.error("两次输入密码不一致，请检查"):w.error("请输入密码后操作"):w.error("请输入验证码后操作"):w.error("请输入正确的手机号")};return i((()=>{k.value=null,f.value=null;const a=localStorage.getItem("captchaGettingTime");V(a),B.value=localStorage.getItem("loginType")||"widthPwd",t((()=>{C.value=!0}))})),(a,e)=>{const s=n("n-input"),o=n("n-checkbox");return c(),r("div",E,[v("div",{class:b(["login-box show_start",{show_end:C.value}])},[v("div",M,[P.value?(c(),r("div",{key:0,class:"to-login",onClick:e[0]||(e[0]=a=>P.value=!1)},e[24]||(e[24]=[v("i",{class:"bi bi-arrow-left"},null,-1)]))):d("",!0),v("div",O,[v("img",{src:p(l),class:"login-logo"},null,8,$),e[25]||(e[25]=h(" U+ Oplus "))]),v("div",L,m(P.value?"你好，请重置密码！":"你好，欢迎回来！"),1),v("div",A,m(P.value?"请输入重置账户信息":"请输入登录账户信息"),1),P.value?d("",!0):(c(),r("div",G,[v("div",{class:b(["input-item",{hasVal:Boolean(k.value)}])},[v("label",{class:b({hide:0===U.value})},m("widthPwd"===B.value?"手机账号":"手机号"),3),g(s,{class:"login-input",clearable:"",value:k.value,"onUpdate:value":e[1]||(e[1]=a=>k.value=a),placeholder:"新用户登录即注册",onFocus:e[2]||(e[2]=a=>U.value=0),onBlur:e[3]||(e[3]=a=>U.value=null)},null,8,["value"])],2),"widthPwd"===B.value?(c(),r("div",{key:0,class:b(["input-item",{hasVal:Boolean(f.value)}])},[v("label",{class:b({hide:1===U.value})},"登录密码",2),g(s,{class:"login-input",onKeydown:W,placeholder:"请输入密码",clearable:"",value:f.value,"onUpdate:value":e[4]||(e[4]=a=>f.value=a),type:"password","show-password-on":"mousedown",onFocus:e[5]||(e[5]=a=>U.value=1),onBlur:e[6]||(e[6]=a=>U.value=null)},null,8,["value"])],2)):d("",!0),"widthPwd"!==B.value?(c(),r("div",{key:1,class:b(["input-item",{hasVal:Boolean(T.value)}])},[v("label",{class:b({hide:2===U.value})},"验证码",2),g(s,{class:"login-input",placeholder:"请输入验证码",clearable:"",value:T.value,"onUpdate:value":e[7]||(e[7]=a=>T.value=a),onFocus:e[8]||(e[8]=a=>U.value=2),onBlur:e[9]||(e[9]=a=>U.value=null)},null,8,["value"]),v("div",{class:b(["get-captcha",{disable:"获取验证码"===S.value}]),onClick:D},m(S.value),3)],2)):d("",!0),v("div",H,[g(o,{value:I.value,"onUpdate:value":e[10]||(e[10]=a=>I.value=a),label:"30天内记住密码",size:"large"},null,8,["value"]),v("div",{class:"forget-pwd",onClick:e[11]||(e[11]=a=>P.value=!0)},"忘记密码")])])),P.value?(c(),r("div",q,[v("div",{class:b(["input-item",{hasVal:Boolean(k.value)}])},[e[26]||(e[26]=v("label",null,m("手机号"),-1)),g(s,{class:"login-input",clearable:"",value:k.value,"onUpdate:value":e[12]||(e[12]=a=>k.value=a),placeholder:"",onFocus:e[13]||(e[13]=a=>U.value=0),onBlur:e[14]||(e[14]=a=>U.value=null)},null,8,["value"])],2),v("div",{class:b(["input-item",{hasVal:Boolean(T.value)}])},[e[27]||(e[27]=v("label",null,"验证码",-1)),g(s,{class:"login-input",placeholder:"请输入验证码",clearable:"",value:T.value,"onUpdate:value":e[15]||(e[15]=a=>T.value=a),onFocus:e[16]||(e[16]=a=>U.value=1),onBlur:e[17]||(e[17]=a=>U.value=null)},null,8,["value"]),v("div",{class:b(["get-captcha",{disable:"获取验证码"===S.value}]),onClick:D},m(S.value),3)],2),v("div",{class:b(["input-item",{hasVal:Boolean(f.value)}])},[e[28]||(e[28]=v("label",null,"新的密码",-1)),g(s,{class:"login-input",placeholder:"请输入验证码",clearable:"","show-password-on":"mousedown",value:f.value,"onUpdate:value":e[18]||(e[18]=a=>f.value=a),type:"password","show-password":"",onFocus:e[19]||(e[19]=a=>U.value=2),onBlur:e[20]||(e[20]=a=>U.value=null)},null,8,["value"])],2),v("div",{class:b(["input-item",{hasVal:Boolean(_.value)}])},[e[29]||(e[29]=v("label",null,"确认密码",-1)),g(s,{class:"login-input",placeholder:"请输入验证码",clearable:"","show-password-on":"mousedown",value:_.value,"onUpdate:value":e[21]||(e[21]=a=>_.value=a),type:"password","show-password":"",onFocus:e[22]||(e[22]=a=>U.value=3),onBlur:e[23]||(e[23]=a=>U.value=null)},null,8,["value"])],2)])):d("",!0),P.value?d("",!0):(c(),r("div",z,[v("div",{class:"login-btn",onClick:K},"登录账户"),v("div",{class:"login-btn change-login-type",onClick:F},m("widthPwd"===B.value?"验证码登录":"密码登录"),1)])),P.value?(c(),r("div",J,[v("div",{class:"login-btn",onClick:N},"重置密码")])):d("",!0),e[30]||(e[30]=v("div",{class:"agreement-box"}," 相关用户协议（注册登录后即代表您同意相关协议） ",-1))])],2)])}}},[["__scopeId","data-v-51f3767d"]]),N={class:"leftbar-logo"},R={class:"logo-area"},Q=["src"],X={class:"points-data"},Y={class:"person-icon"},Z={class:"menu-list"},aa=["onClick"],ea={class:"menu-item-icon"},la={class:"menu-handle-icon"},sa=["src"],oa=s({__name:"leftBar",setup(a){const s=w(),o=y(),u=k(s,"path"),{publicStore:i}=e(),t=k(i,"isCarryOut"),n=[{name:"AI智绘",icon:U,path:"/basic/ai",routeIncluds:["/basic/ai"]},{name:"模板仓库",icon:T,path:"/basic/templateDepot",routeIncluds:["/basic/templateDepot","/basic/generateImage"]},{name:"作品仓库",icon:j,path:"/basic/artWorks",routeIncluds:["/basic/artWorks","/basic/artWorkEditor","/basic/artWorkInfo"]},{name:"模板编辑",icon:F,path:"/basic/modelEditor",routeIncluds:["/basic/modelEditor","/basic/updateModel"]},{name:"资源仓库",icon:D,path:"/basic/resourceCenter",routeIncluds:["/basic/resourceCenter","/basic/resourceCenterInfo","/basic/resourceInfo"]},{name:"数据仓库",icon:V,path:"/basic/dataWarehouse",routeIncluds:["/basic/dataWarehouse","/basic/dataWarehouseEditor"]}];return(a,e)=>(c(),r("div",{class:b(["leftbar-body",{"carry-out":t.value}])},[v("div",N,[v("div",R,[v("img",{src:p(l),class:"logo-icon"},null,8,Q),e[2]||(e[2]=v("label",null,"Oplus",-1))])]),v("div",{class:"leftbar-user",onClick:e[0]||(e[0]=a=>{i.setChargeShow(!0)})},[v("div",X,[v("div",Y,[v("i",{class:b(["bi",p(P)])},null,2)]),e[3]||(e[3]=v("div",{class:"points"},"100/∞积分",-1))]),e[4]||(e[4]=v("div",{class:"username"},"邵大吊",-1)),e[5]||(e[5]=v("div",{class:"points-bar"},[v("div",{class:"points-bar-box"},[v("div",{class:"points-bar-info"})])],-1))]),v("div",Z,[(c(),r(_,null,f(n,(a=>{return v("div",{class:b(["menu-item",{selected:(e=a.routeIncluds,Boolean(e.find((a=>u.value===a))))}]),onClick:e=>(({path:a})=>{o.push(a)})(a),key:a.name},[v("div",ea,[v("i",{class:b(["bi",a.icon])},null,2)]),v("label",null,m(a.name),1)],10,aa);var e})),64))]),v("div",{class:"menu-handle-area",onClick:e[1]||(e[1]=a=>(t.value=!t.value,void i.setIsCarryOut(t.value)))},[v("div",la,[v("img",{src:p(W),class:"menu-handle-icon-item"},null,8,sa)]),e[6]||(e[6]=v("label",null," 收起面板 ",-1))]),e[7]||(e[7]=v("div",{class:"logout-btn"},[v("label",null,"退出登录")],-1))],2))}},[["__scopeId","data-v-9b8d0512"]]),ua={class:"charge-body"},ia={class:"charge-type-area"},ta=["onClick"],na={class:"charge-input-area-outer"},ca={class:"charge-input-area"},ra={class:"charge-input-item"},va={class:"charge-input-area"},da={class:"charge-input-item"},pa=s({__name:"rightDrawer",setup(a){const{publicStore:l}=e(),s=k(l,"chargeShow"),o=u([{name:"支付宝",key:"aliPay"},{name:"微信",key:"weChatPay"}]),i=u("aliPay"),t=u(10);return(a,e)=>{const l=n("n-input-number"),u=n("n-drawer"),d=n("n-config-provider");return c(),C(d,{theme:p(x)},{default:I((()=>[g(u,{show:s.value,"onUpdate:show":e[1]||(e[1]=a=>s.value=a),width:"16.171rem",placement:"right"},{default:I((()=>[v("div",ua,[v("div",ia,[(c(!0),r(_,null,f(o.value,(a=>(c(),r("div",{class:b(["charge-type-item",{selected:i.value===a.key}]),onClick:e=>i.value=a.key,key:a.key},m(a.name),11,ta)))),128))]),e[6]||(e[6]=v("div",{class:"charge-title"},[v("div",{class:"charge-title-text"},"充值积分"),v("div",{class:"charge-title-view"},[v("label",null," RMB "),v("div",{class:"charge-title-icon"},[v("i",{class:"bi bi-arrow-right"})]),v("label",null," U+积分 ")])],-1)),v("div",na,[v("div",ca,[e[3]||(e[3]=v("div",{class:"charge-input-title"},"充值",-1)),v("div",ra,[g(l,{placeholder:"10",value:t.value,"onUpdate:value":e[0]||(e[0]=a=>t.value=a),style:B(`width: ${.67*Math.ceil(t.value>10?String(t.value).length:2)+1.7}rem;`),max:1e4,min:10,class:"editor-setting-input input","show-button":!1},{suffix:I((()=>e[2]||(e[2]=[v("div",{class:"icon"},"￥",-1)]))),_:1},8,["value","style"])])]),v("div",va,[e[5]||(e[5]=v("div",{class:"charge-input-title"},"获得",-1)),v("div",da,[v("label",null,m(10*t.value),1),e[4]||(e[4]=v("div",{class:"icon"},"积分",-1))])])])])])),_:1},8,["show"])])),_:1},8,["theme"])}}},[["__scopeId","data-v-89901a05"]]),ha={class:"basic-body"},ma={key:1,class:"basic-view"},ba=s({__name:"index",setup(a){const{userStore:l,publicStore:s}=e(),o=w(),u=k(l.token),t=k(s,"isCarryOut");return i((()=>{window.loading||(window.loading=S()),setTimeout((()=>{window.loading.close(),window.loading=null}),200)})),(a,e)=>{const l=n("router-view"),s=n("n-message-provider"),i=n("n-dialog-provider");return c(),r("div",ha,[g(i,null,{default:I((()=>[g(s,null,{default:I((()=>[u.value?d("",!0):(c(),C(K,{key:0})),u.value?(c(),r("div",ma,[g(oa),v("div",{class:"basic-content",style:B(`width: calc(100% - ${t.value?2.99:6.8}rem);`)},[(c(),C(l,{key:o.path}))],4)])):d("",!0),g(pa)])),_:1})])),_:1})])}}},[["__scopeId","data-v-4b927344"]]);export{ba as default};
