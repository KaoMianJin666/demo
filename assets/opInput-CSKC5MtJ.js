import{l as e}from"./logo2-l66aD4rS.js";import{i as a,g as l}from"./index-ozdrtwfE.js";import{s as t}from"./syncSleep-DvzJnWfR.js";import{r as s}from"./index-Dsftc_SU.js";import{x as n,r as u,J as o,j as i,k as r,m as p,n as c,C as v,u as d,p as m,w as f,a1 as b,y as h,G as _}from"./lib-CKDAqxUM.js";/* empty css                                                                */import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";function g(e,a){return s.post(`/oplus/upload?file_id=${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})}const x={class:"opInputPlus-body"},w={class:"icon-area"},j=["src"],C={class:"input-area"},F={class:"tools"},k={class:"tools"},T={style:{position:"absolute"},width:"0",height:"0"},I={id:"displacementFilter"},S=["baseFrequency"],D=y({__name:"opInput",props:{needTools:{type:Boolean,default:!0},inputVal:{}},emits:["openTools","setName"],setup(s,{expose:y,emit:D}){const V=n(s,"inputVal"),q=u(""),M=u(""),N=u(""),A=u(""),B=u(""),O=u(""),P=u(),G=u(!1),U=u(null),$=u("0.1 0.1");u("");const J=u(null),R={placeholder:"输入您的需求，自由发挥创意",menus:[]},z=async()=>{M.value="hover",await t(200),M.value="click",await t(200),M.value="hover",N.value="step1",A.value="step1",await t(200),N.value="step2",A.value="step2",await t(200),N.value="step3",A.value="step3",G.value=!0,B.value="step1",await t(200),P.value="step1",N.value="step4",A.value="step4",B.value="step2",E(),await t(200),cancelAnimationFrame(U.value),P.value=!1,await t(3e3),N.value="",A.value="",B.value="step3",O.value="step3",G.value=!1},E=()=>{var e,a,l=0,t=Math.PI/180;requestAnimationFrame((function s(){var n=$.value;e=Number(n.split(" ")[0]),a=Number(n.split(" ")[1]),l+=.1,e+=1e-4*Math.cos(l*t),a+=5e-4*Math.sin(l*t),n=e.toString()+" "+a.toString(),$.value=n,U.value=requestAnimationFrame(s)}))};o(q,(e=>{})),o(V,(()=>{J.value&&J.value.insertText(V.value)}));const H=(e,a,l)=>{const t=a.clipboardData.getData("text/plain");e.insertText(t),a.preventDefault(),l(!1)},K=e=>{J.value=e},L=({file:e})=>{const a=_(),l=new FormData;return l.append("file",e.file),g(a,l).then((e=>{200===e.code&&J.value&&J.value.insertNode({type:"image",children:[{text:""}],src:e.data,alt:"图片"})})),!1};return y({mockClick:z,setInput:e=>{q.value="object"==typeof e?convertObjectToContent(e):e}}),(t,s)=>{const n=i("n-scrollbar"),u=i("n-upload");return r(),p("div",x,[c("div",{class:v(["animation",N.value])},null,2),c("div",{class:v(["animation-1",A.value])},null,2),c("div",{class:v(["color-animation",B.value])},null,2),c("div",{class:v(["color-animation-1",O.value])},null,2),c("div",{class:v(["main-bg",{needFilter:G.value}])},null,2),c("div",w,[c("img",{src:d(e)},null,8,j)]),c("div",{class:v(["input-area-outer",P.value])},[c("div",C,[m(n,null,{default:f((()=>[m(d(b),{editor:J.value,modelValue:q.value,"onUpdate:modelValue":s[0]||(s[0]=e=>q.value=e),defaultConfig:R,onCustomPaste:H,onOnCreated:K},null,8,["editor","modelValue"])])),_:1})]),c("div",{class:v(["input-btn-area hover",`${M.value}`])},[c("div",F,[m(u,{"show-file-list":!1,accept:"image/*",action:"",onBeforeUpload:L},{default:f((()=>[c("i",{class:v(["bi",d(a)])},null,2)])),_:1})]),c("div",k,[c("i",{class:v(["bi",d(l)])},null,2)]),c("div",{class:"btn",onClick:s[1]||(s[1]=e=>z())},s[2]||(s[2]=[h(" 创作"),c("i",{class:"bi bi-rocket-takeoff"},null,-1)]))],2)],2),(r(),p("svg",T,[c("filter",I,[c("feTurbulence",{type:"turbulence",baseFrequency:$.value,numOctaves:"1",result:"turbulence",seed:"51"},null,8,S),s[3]||(s[3]=c("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"5",xChannelSelector:"R",yChannelSelector:"B"},null,-1))])]))])}}},[["__scopeId","data-v-4dcbb81a"]]);export{D as o,g as u};
