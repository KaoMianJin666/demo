import{L as f}from"./index-83422634.js";const m=/(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/;function l(e){return new Promise((u,a)=>{const r=new XMLHttpRequest;r.timeout=6e3;let n=h(e.url);e.method==="GET"&&(n+=`${g(e.data)}`),r.open(e.method,n),r.ontimeout=a,r.onerror=a,r.onload=c=>{u(c.target.response)},r.send(JSON.stringify(i(e.data,e.paramType)))})}function g(e){let u="";return e.forEach(a=>{a[0]&&(u+=`&${a[0]}=${a[1]}`)}),u?"?"+u:""}function i(e,u){if(!e)return"";if(u==="array")return e;const a={};return e.forEach(r=>{r[0]&&(a[r[0]]=r[1])}),a}function h(e){return e.startsWith("http")?e:"https://"+e}function R(e,u,a,r="object"){let n=0,c;const s=e==null?void 0:e.url;return(s&&!/^\d+$/.test(s)||m.test(h(s)))&&(e.series?c=setInterval(()=>{if(e.requestCount!=0&&e.requestCount<=n){clearInterval(c);return}n++,l(e).then(t=>{r==="object"||r==="array"?u[a]=JSON.parse(t):u[a]=t}).catch(t=>f.Message.error((t==null?void 0:t.message)||t))},e.time):l(e).then(t=>{r==="object"||r==="array"?u[a]=JSON.parse(t):u[a]=t}).catch(t=>f.Message.error((t==null?void 0:t.message)||t))),function(){clearInterval(c)}}export{h as g,R as r,m as u};
