var Dt=Object.defineProperty,Pt=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var Ft=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var Q=Math.pow,ke=(e,n,t)=>n in e?Dt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ne=(e,n)=>{for(var t in n||(n={}))Ft.call(n,t)&&ke(e,t,n[t]);if($e)for(var t of $e(n))Bt.call(n,t)&&ke(e,t,n[t]);return e},ie=(e,n)=>Pt(e,Nt(n));var N=(e,n,t)=>new Promise((o,c)=>{var s=d=>{try{p(t.next(d))}catch(g){c(g)}},h=d=>{try{p(t.throw(d))}catch(g){c(g)}},p=d=>d.done?o(d.value):Promise.resolve(d.value).then(s,h);p((t=t.apply(e,n)).next())});import{g as oe,c as H,m as Y,e as W,a as de,i as nt,n as j,b as le,d as Ht,f as ot,h as it,$ as ge,j as ye,k as rt,l as st,o as xe,s as ee,p as zt,q as ve,t as Ut,r as jt,u as at,v as Vt,w as Wt}from"./index-a521a068.js";import{a as Ae}from"./axios-f5a5de21.js";import{a as Re}from"./mode-json5-7767aafc.js";import{l as qt}from"./shortcutKey-9b1de2ac.js";function Se(t){return N(this,arguments,function*(e,n=[]){const o=c=>new Promise(s=>{const{animationTime:h,value:p="",isLoop:d}=c;e.style.setProperty("--time",h+"s"),e.classList.add(p,"animated",Ee(d));const g=()=>{e.removeEventListener("animationend",g),e.removeEventListener("animationcancel",g),e.classList.remove(p,"animated",Ee(d)),e.style.removeProperty("--time"),s()};e.addEventListener("animationend",g),e.addEventListener("animationcancel",g)});for(let c=0,s=n.length;c<s;c++)yield o(n[c])})}function Ee(e){return e?"infinite":"no-infinite"}const Xt={lt:Yt,t:Qt,rt:Gt,r:Zt,rb:Kt,b:en,lb:Jt,l:tn};function Yt(e,n,t,o,c){const{symmetricPoint:s}=c;let h=oe(n,s),p=H(n,h,-e.rotate),d=H(s,h,-e.rotate),g=d.x-p.x,b=d.y-p.y;if(o){g/b>t?(p.x+=Math.abs(g-b*t),g=b*t):(p.y+=Math.abs(b-g/t),b=g/t);const $=H(p,h,e.rotate);h=oe($,s),p=H($,h,-e.rotate),d=H(s,h,-e.rotate),g=d.x-p.x,b=d.y-p.y}g>0&&b>0&&(e.width=Math.round(g),e.height=Math.round(b),e.left=Math.round(p.x),e.top=Math.round(p.y))}function Gt(e,n,t,o,c){const{symmetricPoint:s}=c;let h=oe(n,s),p=H(n,h,-e.rotate),d=H(s,h,-e.rotate),g=p.x-d.x,b=d.y-p.y;if(o){g/b>t?(p.x-=Math.abs(g-b*t),g=b*t):(p.y+=Math.abs(b-g/t),b=g/t);const $=H(p,h,e.rotate);h=oe($,s),p=H($,h,-e.rotate),d=H(s,h,-e.rotate),g=p.x-d.x,b=d.y-p.y}g>0&&b>0&&(e.width=Math.round(g),e.height=Math.round(b),e.left=Math.round(d.x),e.top=Math.round(p.y))}function Kt(e,n,t,o,c){const{symmetricPoint:s}=c;let h=oe(n,s),p=H(s,h,-e.rotate),d=H(n,h,-e.rotate),g=d.x-p.x,b=d.y-p.y;if(o){g/b>t?(d.x-=Math.abs(g-b*t),g=b*t):(d.y-=Math.abs(b-g/t),b=g/t);const $=H(d,h,e.rotate);h=oe($,s),p=H(s,h,-e.rotate),d=H($,h,-e.rotate),g=d.x-p.x,b=d.y-p.y}g>0&&b>0&&(e.width=Math.round(g),e.height=Math.round(b),e.left=Math.round(p.x),e.top=Math.round(p.y))}function Jt(e,n,t,o,c){const{symmetricPoint:s}=c;let h=oe(n,s),p=H(s,h,-e.rotate),d=H(n,h,-e.rotate),g=p.x-d.x,b=d.y-p.y;if(o){g/b>t?(d.x+=Math.abs(g-b*t),g=b*t):(d.y-=Math.abs(b-g/t),b=g/t);const $=H(d,h,e.rotate);h=oe($,s),p=H(s,h,-e.rotate),d=H($,h,-e.rotate),g=p.x-d.x,b=d.y-p.y}g>0&&b>0&&(e.width=Math.round(g),e.height=Math.round(b),e.left=Math.round(d.x),e.top=Math.round(p.y))}function Qt(e,n,t,o,c){const{symmetricPoint:s,curPoint:h}=c,p=H(n,h,-e.rotate),d=H({x:h.x,y:p.y},h,e.rotate),g=Math.sqrt(Q(d.x-s.x,2)+Q(d.y-s.y,2)),b={x:d.x-(d.x-s.x)/2,y:d.y+(s.y-d.y)/2};let $=e.width;o&&($=g*t),e.width=$,e.height=Math.round(g),e.top=Math.round(b.y-g/2),e.left=Math.round(b.x-e.width/2)}function Zt(e,n,t,o,c){const{symmetricPoint:s,curPoint:h}=c,p=H(n,h,-e.rotate),d=H({x:p.x,y:h.y},h,e.rotate),g=Math.sqrt(Q(d.x-s.x,2)+Q(d.y-s.y,2)),b={x:d.x-(d.x-s.x)/2,y:d.y+(s.y-d.y)/2};let $=e.height;o&&($=g/t),e.height=$,e.width=Math.round(g),e.top=Math.round(b.y-e.height/2),e.left=Math.round(b.x-g/2)}function en(e,n,t,o,c){const{symmetricPoint:s,curPoint:h}=c,p=H(n,h,-e.rotate),d=H({x:h.x,y:p.y},h,e.rotate),g=Math.sqrt(Q(d.x-s.x,2)+Q(d.y-s.y,2)),b={x:d.x-(d.x-s.x)/2,y:d.y+(s.y-d.y)/2};let $=e.width;o&&($=g*t),e.width=$,e.height=Math.round(g),e.top=Math.round(b.y-g/2),e.left=Math.round(b.x-e.width/2)}function tn(e,n,t,o,c){const{symmetricPoint:s,curPoint:h}=c,p=H(n,h,-e.rotate),d=H({x:p.x,y:h.y},h,e.rotate),g=Math.sqrt(Q(d.x-s.x,2)+Q(d.y-s.y,2)),b={x:d.x-(d.x-s.x)/2,y:d.y+(s.y-d.y)/2};let $=e.height;o&&($=g/t),e.height=$,e.width=Math.round(g),e.top=Math.round(b.y-e.height/2),e.left=Math.round(b.x-g/2)}function nn(e,n,t,o,c,s){Xt[e](n,t,o,c,s)}var on=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"shape",class:{active:e.active},on:{click:e.selectCurComponent,mousedown:e.handleMouseDownOnShape}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:e.handleRotate}}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),e._l(e.isActive()?e.getPointList():[],function(o){return t("div",{key:o,staticClass:"shape-point",style:e.getPointStyle(o),on:{mousedown:function(c){return e.handleMouseDownOnPoint(o,c)}}})}),e._t("default")],2)},rn=[];const sn={props:{active:{type:Boolean,default:!1},element:{required:!0,type:Object,default:()=>{}},defaultStyle:{required:!0,type:Object,default:()=>{}},index:{required:!0,type:[Number,String],default:0}},data(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],pointList2:["r","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:Y(["curComponent","editor","showRight"]),mounted(){this.curComponent&&(this.cursors=this.getCursor()),W.$on("runAnimation",()=>{this.element==this.curComponent&&Se(this.$el,this.curComponent.animations)}),W.$on("stopAnimation",()=>{this.$el.classList.remove("animated","infinite")})},methods:{getPointList(){return this.element.component==="line-shape"?this.pointList2:this.pointList},isActive(){return this.active&&!this.element.isLock},handleRotate(e){this.$store.commit("setClickComponentStatus",!0),e.preventDefault(),e.stopPropagation();const n=ne({},this.defaultStyle),t=e.clientY,o=e.clientX,c=n.rotate,s=this.$el.getBoundingClientRect(),h=s.left+s.width/2,p=s.top+s.height/2,d=Math.atan2(t-p,o-h)/(Math.PI/180);let g=!1;const b=T=>{g=!0;const L=T.clientX,P=T.clientY,B=Math.atan2(P-p,L-h)/(Math.PI/180);n.rotate=c+B-d,this.$store.commit("setShapeStyle",n)},$=()=>{g&&this.$store.commit("recordSnapshot"),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",$),this.cursors=this.getCursor()};document.addEventListener("mousemove",b),document.addEventListener("mouseup",$)},getPointStyle(e){const{width:n,height:t}=this.defaultStyle,o=/t/.test(e),c=/b/.test(e),s=/l/.test(e),h=/r/.test(e);let p=0,d=0;return e.length===2?(p=s?0:n,d=o?0:t):((o||c)&&(p=n/2,d=o?0:t),(s||h)&&(p=s?0:n,d=Math.floor(t/2))),{marginLeft:"-4px",marginTop:"-4px",left:`${p}px`,top:`${d}px`,cursor:this.cursors[e]}},getCursor(){const{angleToCursor:e,initialAngle:n,pointList:t,curComponent:o}=this,c=de(o.style.rotate),s={};let h=-1;return t.forEach(p=>{const d=de(n[p]+c),g=e.length;for(;;){h=(h+1)%g;const b=e[h];if(d<23||d>=338){s[p]="nw-resize";return}if(b.start<=d&&d<b.end){s[p]=b.cursor+"-resize";return}}}),s},handleMouseDownOnShape(e){if(this.$nextTick(()=>W.$emit("componentClick")),this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),nt(this.element.component)&&e.preventDefault(),e.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),this.element.isLock)return;this.cursors=this.getCursor();const n=ne({},this.defaultStyle),t=e.clientY,o=e.clientX,c=Number(n.top),s=Number(n.left);let h=!1;const p=g=>{h=!0;const b=g.clientX,$=g.clientY;n.top=$-t+c,n.left=b-o+s,this.$store.commit("setShapeStyle",n),this.$nextTick(()=>{W.$emit("move",$-t>0,b-o>0)})},d=()=>{h&&this.$store.commit("recordSnapshot"),W.$emit("unmove"),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",d)},selectCurComponent(e){e.stopPropagation(),e.preventDefault(),this.$store.commit("hideContextMenu"),this.$store.state.rightList||this.$store.commit("isShowRightList")},handleMouseDownOnPoint(e,n){this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),n.stopPropagation(),n.preventDefault();const t=ne({},this.defaultStyle),o=t.width/t.height,c={x:t.left+t.width/2,y:t.top+t.height/2},s=this.editor.getBoundingClientRect(),h=n.target.getBoundingClientRect(),p={x:Math.round(h.left-s.left+n.target.offsetWidth/2),y:Math.round(h.top-s.top+n.target.offsetHeight/2)},d={x:c.x-(p.x-c.x),y:c.y-(p.y-c.y)};let g=!1,b=!0;const $=this.isNeedLockProportion(),T=P=>{if(b){b=!1;return}g=!0;const B={x:P.clientX-Math.round(s.left),y:P.clientY-Math.round(s.top)};nn(e,t,B,o,$,{center:c,curPoint:p,symmetricPoint:d}),this.$store.commit("setShapeStyle",t)},L=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",L),g&&this.$store.commit("recordSnapshot")};document.addEventListener("mousemove",T),document.addEventListener("mouseup",L)},isNeedLockProportion(){if(this.element.component!="Group")return!1;const e=[0,90,180,360];for(const n of this.element.propValue)if(!e.includes(de(parseInt(n.style.rotate))))return!0;return!1}}},Te={};var an=j(sn,on,rn,!1,cn,"57be5ce2",null,null);function cn(e){for(let n in Te)this[n]=Te[n]}const ct=function(){return an.exports}();var ln=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:e.menuTop+"px",left:e.menuLeft+"px"}},[t("ul",{on:{mouseup:e.handleMouseUp}},[e.curComponent?[e.curComponent.isLock?t("li",{on:{click:e.unlock}},[e._v("解锁")]):[t("li",{on:{click:e.copy}},[e._v("复制")]),t("li",{on:{click:e.paste}},[e._v("粘贴")]),t("li",{on:{click:e.cut}},[e._v("剪切")]),t("li",{on:{click:e.deleteComponent}},[e._v("删除")]),t("li",{on:{click:e.lock}},[e._v("锁定")]),t("li",{on:{click:e.topComponent}},[e._v("置顶")]),t("li",{on:{click:e.bottomComponent}},[e._v("置底")]),t("li",{on:{click:e.upComponent}},[e._v("上移")]),t("li",{on:{click:e.downComponent}},[e._v("下移")])]]:t("li",{on:{click:e.paste}},[e._v("粘贴")])],2)])},hn=[];const un={data(){return{copyData:null}},computed:Y(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},handleMouseUp(){this.$store.commit("setClickComponentStatus",!0)},cut(){this.$store.commit("cut")},copy(){this.$store.commit("copy")},paste(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},Le={};var pn=j(un,ln,hn,!1,dn,"4d12fbde",null,null);function dn(e){for(let n in Le)this[n]=Le[n]}const lt=function(){return pn.exports}();var mn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"mark-line"},e._l(e.lines,function(o){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.lineStatus[o]||!1,expression:"lineStatus[line] || false"}],key:o,ref:o,refInFor:!0,staticClass:"line",class:o.includes("x")?"xline":"yline"})}),0)},fn=[];const gn={data(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:Y(["curComponent","componentData"]),mounted(){W.$on("move",(e,n)=>{this.showLine(e,n)}),W.$on("unmove",()=>{this.hideLine()})},methods:{hideLine(){Object.keys(this.lineStatus).forEach(e=>{this.lineStatus[e]=!1})},showLine(e,n){const t=this.$refs,o=this.componentData,c=le(this.curComponent.style),s=c.width/2,h=c.height/2;this.hideLine(),o.forEach(p=>{if(p==this.curComponent)return;const d=le(p.style),{top:g,left:b,bottom:$,right:T}=d,L=d.width/2,P=d.height/2,B={top:[{isNearly:this.isNearly(c.top,g),lineNode:t.xt[0],line:"xt",dragShift:g,lineShift:g},{isNearly:this.isNearly(c.bottom,g),lineNode:t.xt[0],line:"xt",dragShift:g-c.height,lineShift:g},{isNearly:this.isNearly(c.top+h,g+P),lineNode:t.xc[0],line:"xc",dragShift:g+P-h,lineShift:g+P},{isNearly:this.isNearly(c.top,$),lineNode:t.xb[0],line:"xb",dragShift:$,lineShift:$},{isNearly:this.isNearly(c.bottom,$),lineNode:t.xb[0],line:"xb",dragShift:$-c.height,lineShift:$}],left:[{isNearly:this.isNearly(c.left,b),lineNode:t.yl[0],line:"yl",dragShift:b,lineShift:b},{isNearly:this.isNearly(c.right,b),lineNode:t.yl[0],line:"yl",dragShift:b-c.width,lineShift:b},{isNearly:this.isNearly(c.left+s,b+L),lineNode:t.yc[0],line:"yc",dragShift:b+L-s,lineShift:b+L},{isNearly:this.isNearly(c.left,T),lineNode:t.yr[0],line:"yr",dragShift:T,lineShift:T},{isNearly:this.isNearly(c.right,T),lineNode:t.yr[0],line:"yr",dragShift:T-c.width,lineShift:T}]},w=[],{rotate:k}=this.curComponent.style;Object.keys(B).forEach(R=>{B[R].forEach(M=>{M.isNearly&&(this.$store.commit("setShapeSingleStyle",{key:R,value:k!=0?this.translatecurComponentShift(R,M,c):M.dragShift}),M.lineNode.style[R]=`${M.lineShift}px`,w.push(M.line))})}),w.length&&this.chooseTheTureLine(w,e,n)})},translatecurComponentShift(e,n,t){const{width:o,height:c}=this.curComponent.style;return e=="top"?Math.round(n.dragShift-(c-t.height)/2):Math.round(n.dragShift-(o-t.width)/2)},chooseTheTureLine(e,n,t){t?e.includes("yr")?this.lineStatus.yr=!0:e.includes("yc")?this.lineStatus.yc=!0:e.includes("yl")&&(this.lineStatus.yl=!0):e.includes("yl")?this.lineStatus.yl=!0:e.includes("yc")?this.lineStatus.yc=!0:e.includes("yr")&&(this.lineStatus.yr=!0),n?e.includes("xb")?this.lineStatus.xb=!0:e.includes("xc")?this.lineStatus.xc=!0:e.includes("xt")&&(this.lineStatus.xt=!0):e.includes("xt")?this.lineStatus.xt=!0:e.includes("xc")?this.lineStatus.xc=!0:e.includes("xb")&&(this.lineStatus.xb=!0)},isNearly(e,n){return Math.abs(e-n)<=this.diff}}},Me={};var vn=j(gn,mn,fn,!1,bn,"d46bb798",null,null);function bn(e){for(let n in Me)this[n]=Me[n]}const ht=function(){return vn.exports}();var _n=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"area",style:{left:e.start.x+"px",top:e.start.y+"px",width:e.width+"px",height:e.height+"px"}})},yn=[];const xn={props:{start:{type:Object,default:()=>{}},width:{type:Number,default:0},height:{type:Number,default:0}}},Ie={};var Sn=j(xn,_n,yn,!1,wn,"a3e1739e",null,null);function wn(e){for(let n in Ie)this[n]=Ie[n]}const ut=function(){return Sn.exports}();var Cn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[t("defs",[t("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[t("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:e.isDarkMode?"rgba(207, 207, 207, 0.5)":"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),t("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[t("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),t("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:e.isDarkMode?"rgba(186, 186, 186)":"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),t("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},$n=[];const kn={props:{isDarkMode:Boolean}},Oe={};var An=j(kn,Cn,$n,!1,Rn,"2c7e7316",null,null);function Rn(e){for(let n in Oe)this[n]=Oe[n]}const pt=function(){return An.exports}();var En=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"editor",class:{edit:e.isEdit},style:Object.assign({},e.getCanvasStyle(e.canvasStyleData),{width:e.changeStyleWithScale(e.canvasStyleData.width)+"px",height:e.changeStyleWithScale(e.canvasStyleData.height)+"px"}),attrs:{id:"editor"},on:{contextmenu:e.handleContextMenu,mousedown:e.handleMouseDown}},[t(pt,{attrs:{"is-dark-mode":e.isDarkMode}}),e._l(e.componentData,function(o,c){return t(ct,{key:o.id,class:{lock:o.isLock},style:e.getShapeStyle(o.style),attrs:{"default-style":o.style,active:o.id===(e.curComponent||{}).id,element:o,index:c}},[o.component.startsWith("SVG")?t(o.component,{tag:"component",staticClass:"component",style:e.getSVGStyle(o.style),attrs:{id:"component"+o.id,"prop-value":o.propValue,element:o,request:o.request}}):o.component!="VText"?t(o.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(o.style),attrs:{id:"component"+o.id,"prop-value":o.propValue,element:o,request:o.request}}):t(o.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(o.style),attrs:{id:"component"+o.id,"prop-value":o.propValue,element:o,request:o.request},on:{input:e.handleInput}})],1)}),t(lt),t(ht),t(ut,{directives:[{name:"show",rawName:"v-show",value:e.isShowArea,expression:"isShowArea"}],attrs:{start:e.start,width:e.width,height:e.height}})],2)},Tn=[];const Ln={components:{Shape:ct,ContextMenu:lt,MarkLine:ht,Area:ut,Grid:pt},props:{isEdit:{type:Boolean,default:!0}},data(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1,svgFilterAttrs:["width","height","top","left","rotate"]}},computed:Y(["componentData","curComponent","canvasStyleData","editor","isDarkMode"]),mounted(){this.$store.commit("getEditor"),W.$on("hideArea",()=>{this.hideArea()})},methods:{getShapeStyle:Ht,getCanvasStyle:ot,changeStyleWithScale:it,handleMouseDown(e){(!this.curComponent||nt(this.curComponent.component))&&e.preventDefault(),this.hideArea();const n=this.editor.getBoundingClientRect();this.editorX=n.x,this.editorY=n.y;const t=e.clientX,o=e.clientY;this.start.x=t-this.editorX,this.start.y=o-this.editorY,this.isShowArea=!0;const c=h=>{this.width=Math.abs(h.clientX-t),this.height=Math.abs(h.clientY-o),h.clientX<t&&(this.start.x=h.clientX-this.editorX),h.clientY<o&&(this.start.y=h.clientY-this.editorY)},s=h=>{if(document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",s),h.clientX==t&&h.clientY==o){this.hideArea();return}this.createGroup()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",s)},hideArea(){this.isShowArea=0,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},createGroup(){const e=this.getSelectArea();if(e.length<=1){this.hideArea();return}let n=1/0,t=1/0,o=-1/0,c=-1/0;e.forEach(s=>{let h={};s.component=="Group"?s.propValue.forEach(p=>{const d=ge(`#component${p.id}`).getBoundingClientRect();h.left=d.left-this.editorX,h.top=d.top-this.editorY,h.right=d.right-this.editorX,h.bottom=d.bottom-this.editorY,h.left<t&&(t=h.left),h.top<n&&(n=h.top),h.right>o&&(o=h.right),h.bottom>c&&(c=h.bottom)}):h=le(s.style),h.left<t&&(t=h.left),h.top<n&&(n=h.top),h.right>o&&(o=h.right),h.bottom>c&&(c=h.bottom)}),this.start.x=t,this.start.y=n,this.width=o-t,this.height=c-n,this.$store.commit("setAreaData",{style:{left:t,top:n,width:this.width,height:this.height},components:e})},getSelectArea(){const e=[],{x:n,y:t}=this.start;return this.componentData.forEach(o=>{if(o.isLock)return;const{left:c,top:s,width:h,height:p}=le(o.style);n<=c&&t<=s&&c+h<=n+this.width&&s+p<=t+this.height&&e.push(o)}),e},handleContextMenu(e){e.stopPropagation(),e.preventDefault();let n=e.target,t=e.offsetY,o=e.offsetX;for(;n instanceof SVGElement;)n=n.parentNode;for(;!n.className.includes("editor");)o+=n.offsetLeft,t+=n.offsetTop,n=n.parentNode;this.$store.commit("showContextMenu",{top:t,left:o})},getComponentStyle(e){return ye(e,this.svgFilterAttrs)},getSVGStyle(e){return rt(e,this.svgFilterAttrs)},handleInput(e,n){this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(e,n)})},getTextareaHeight(e,n){let{lineHeight:t,fontSize:o,height:c}=e.style;t===""&&(t=1.5);const s=(n.split("<br>").length-1)*t*(o||this.canvasStyleData.fontSize);return c>s?c:s}}},De={};var Mn=j(Ln,En,Tn,!1,In,"1eb292da",null,null);function In(e){for(let n in De)this[n]=De[n]}const dt=function(){return Mn.exports}();var On=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"component-list",on:{dragstart:e.handleDragStart}},e._l(e.componentList,function(o,c){return t("div",{key:c,staticClass:"list",attrs:{draggable:"","data-index":c}},[o.icon.substr(0,2)==="el"?t("span",{class:o.icon}):t("span",{staticClass:"iconfont",class:"icon-"+o.icon})])}),0)},Dn=[];const Pn={data(){return{componentList:st}},methods:{handleDragStart(e){e.dataTransfer.setData("index",e.target.dataset.index)}}},Pe={};var Nn=j(Pn,On,Dn,!1,Fn,"6b30ba8e",null,null);function Fn(e){for(let n in Pe)this[n]=Pe[n]}const mt=function(){return Nn.exports}();var Bn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.show?t("div",{staticClass:"modal-bg",on:{click:e.hide}},[t("div",{staticClass:"fadeInLeft animated modal",on:{click:e.stopPropagation}},[e._t("default")],2)]):e._e()},Hn=[];const zn={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},methods:{hide(){this.$emit("change")},stopPropagation(e){e.stopPropagation()}}},Ne={};var Un=j(zn,Bn,Hn,!1,jn,"bf3d1a9c",null,null);function jn(e){for(let n in Ne)this[n]=Ne[n]}const re=function(){return Un.exports}(),ft=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedIn"},{label:"光速从右退出",value:"lightSpeedOut"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];ft.forEach(e=>{e.children.forEach(n=>{n.pending=!1,n.animationTime=1})});var Vn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-dialog",{attrs:{title:`${e.config.label} 动画配置`,visible:e.centerDialogVisible,width:"30%",center:""},on:{close:e.handleCloseModal}},[t("div",{staticClass:"time"},[e._v(" 动画时长："),t("el-input-number",{attrs:{size:"small","controls-position":"right",min:.1,precision:2,step:.01},model:{value:e.config.animationTime,callback:function(o){e.$set(e.config,"animationTime",o)},expression:"config.animationTime"}})],1),t("div",{staticClass:"loop"},[e._v(" 是否循环："),t("el-switch",{attrs:{"active-text":"是","inactive-text":"否",disabled:e.isDisabled},model:{value:e.config.isLoop,callback:function(o){e.$set(e.config,"isLoop",o)},expression:"config.isLoop"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCloseModal}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveSetting}},[e._v("确 定")])],1)])},Wn=[];const qn={name:"AnimationSettingModal",props:{curIndex:{type:Number,default:0}},data(){return{centerDialogVisible:!0,config:{}}},computed:ie(ne({},Y(["curComponent"])),{isDisabled(){return this.curComponent.animations.length>1}}),created(){const{label:e,animationTime:n,isLoop:t=!1,value:o}=this.curComponent.animations[this.curIndex]||{};this.config={animationTime:n,label:e,isLoop:t,value:o}},methods:{handleCloseModal(){this.$emit("close")},handleSaveSetting(){const{isLoop:e}=this.config;this.$store.commit("alterAnimation",{index:this.curIndex,data:{animationTime:this.config.animationTime,isLoop:e}}),W.$emit("stopAnimation"),this.handleCloseModal()}}},Fe={};var Xn=j(qn,Vn,Wn,!1,Yn,"1354e274",null,null);function Yn(e){for(let n in Fe)this[n]=Fe[n]}const gt=function(){return Xn.exports}();var Gn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"animation-list"},[t("div",{staticClass:"div-animation"},[t("el-button",{on:{click:function(o){e.isShowAnimation=!0}}},[e._v("添加动画")]),t("el-button",{on:{click:e.previewAnimate}},[e._v("预览动画")]),t("div",e._l(e.curComponent.animations,function(o,c){return t("el-tag",{key:c,attrs:{closable:""},on:{close:function(s){return e.removeAnimation(c)}}},[e._v(" "+e._s(o.label)+" "),t("i",{staticClass:"cursor el-icon-setting",on:{click:function(s){return e.handleAnimationSetting(c)}}})])}),1)],1),t(re,{model:{value:e.isShowAnimation,callback:function(o){e.isShowAnimation=o},expression:"isShowAnimation"}},[t("el-tabs",{model:{value:e.animationActiveName,callback:function(o){e.animationActiveName=o},expression:"animationActiveName"}},e._l(e.animationClassData,function(o){return t("el-tab-pane",{key:o.label,attrs:{label:o.label,name:o.label}},[t("el-scrollbar",{staticClass:"animate-container"},e._l(o.children,function(c){return t("div",{key:c.value,ref:c.value,refInFor:!0,staticClass:"animate",on:{mouseenter:function(s){return e.runAnimation(c)},click:function(s){return e.addAnimation(c)}}},[t("div",[e._v(" "+e._s(c.label)+" ")])])}),0)],1)}),1)],1),e.isShowAnimationSetting?t(gt,{attrs:{"cur-index":e.curIndex},on:{close:function(o){e.isShowAnimationSetting=!1}}}):e._e()],1)},Kn=[];const Jn={components:{Modal:re,AnimationSettingModal:gt},data(){return{isShowAnimation:!1,hoverPreviewAnimate:"",animationActiveName:"进入",animationClassData:ft,showAnimatePanel:!1,timer:null,isShowAnimationSetting:!1,curIndex:0}},computed:Y(["curComponent"]),methods:{addAnimation(e){this.$store.commit("addAnimation",e),this.isShowAnimation=!1},previewAnimate(){W.$emit("runAnimation")},removeAnimation(e){this.$store.commit("removeAnimation",e),this.curComponent.animations.length||W.$emit("stopAnimation")},handleAnimationSetting(e){this.isShowAnimationSetting=!0,this.curIndex=e},runAnimation(e){return N(this,null,function*(){e.pending||(e.pending=!0,yield Se(this.$refs[e.value][0],[e]),setTimeout(()=>{e.pending=!1},100))})}}},Be={};var Qn=j(Jn,Gn,Kn,!1,Zn,null,null,null);function Zn(e){for(let n in Be)this[n]=Be[n]}const eo=function(){return Qn.exports}(),be={redirect(e){e&&(window.location.href=e)},alert(e){e&&alert(e)}},to={methods:be},no=[{key:"redirect",label:"跳转事件",event:be.redirect,param:""},{key:"alert",label:"alert 事件",event:be.alert,param:""}];var oo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"event-list"},[t("div",{staticClass:"div-events"},[t("el-button",{on:{click:function(o){e.isShowEvent=!0}}},[e._v("添加事件")]),t("div",e._l(Object.keys(e.curComponent.events),function(o){return t("el-tag",{key:o,attrs:{closable:""},on:{close:function(c){return e.removeEvent(o)}}},[e._v(" "+e._s(o)+" ")])}),1)],1),t(re,{model:{value:e.isShowEvent,callback:function(o){e.isShowEvent=o},expression:"isShowEvent"}},[t("el-tabs",{model:{value:e.eventActiveName,callback:function(o){e.eventActiveName=o},expression:"eventActiveName"}},e._l(e.eventList,function(o){return t("el-tab-pane",{key:o.key,staticStyle:{padding:"40px 20px 0"},attrs:{label:o.label,name:o.key}},[o.key=="redirect"?t("el-input",{attrs:{type:"textarea",placeholder:"请输入完整的 URL"},nativeOn:{keydown:function(c){c.stopPropagation()}},model:{value:o.param,callback:function(c){e.$set(o,"param",c)},expression:"item.param"}}):e._e(),o.key=="alert"?t("el-input",{attrs:{type:"textarea",placeholder:"请输入要 alert 的内容"},nativeOn:{keydown:function(c){c.stopPropagation()}},model:{value:o.param,callback:function(c){e.$set(o,"param",c)},expression:"item.param"}}):e._e(),t("el-button",{staticStyle:{"margin-top":"20px"},on:{click:function(c){return e.addEvent(o.key,o.param)}}},[e._v("确定")])],1)}),1)],1)],1)},io=[];const ro={components:{Modal:re},data(){return{isShowEvent:!1,eventURL:"",eventActiveName:"redirect",eventList:no}},computed:Y(["curComponent"]),methods:{addEvent(e,n){this.isShowEvent=!1,this.$store.commit("addEvent",{event:e,param:n})},removeEvent(e){this.$store.commit("removeEvent",e)}}},He={};var so=j(ro,oo,io,!1,ao,"06a49ea7",null,null);function ao(e){for(let n in He)this[n]=He[n]}const co=function(){return so.exports}();var lo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"draw-list"},[t("div",{staticClass:"div-draws"},[t("el-button",{attrs:{size:"small"},on:{click:function(o){e.isShowModal=!0}}},[e._v("开始绘图")])],1),t("el-dialog",{attrs:{width:"500px",visible:e.isShowModal,closeOnClickModal:!1,title:"AI生图"},on:{close:function(o){e.isShowModal=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary",size:"small",loading:e.loading},on:{click:e.confirmHandle}},[e._v("生成")])],1)]},proxy:!0}])},[t("el-form",{ref:"aiImageFormDom",attrs:{model:e.aiImageForm,rules:e.rules,"label-width":"auto"}},[t("el-form-item",{attrs:{label:"模型选择",prop:"lora_name"}},[t("el-select",{attrs:{size:"small",placeholder:""},model:{value:e.aiImageForm.lora_name,callback:function(o){e.$set(e.aiImageForm,"lora_name",o)},expression:"aiImageForm.lora_name"}},e._l(e.loraList,function(o,c){return t("el-option",{key:c,attrs:{label:o,value:o}})}),1)],1),t("el-form-item",{attrs:{label:"类型选择",prop:"tile_type"}},[t("el-select",{attrs:{size:"small",placeholder:""},model:{value:e.aiImageForm.tile_type,callback:function(o){e.$set(e.aiImageForm,"tile_type",o)},expression:"aiImageForm.tile_type"}},e._l(e.tileType,function(o,c){return t("el-option",{key:c,attrs:{label:o.name,value:o.value}})}),1)],1),t("el-form-item",{attrs:{label:"正向提示词",prop:"prompt"}},[t("el-input",{attrs:{type:"textarea",rows:5,size:"small"},model:{value:e.aiImageForm.prompt,callback:function(o){e.$set(e.aiImageForm,"prompt",o)},expression:"aiImageForm.prompt"}})],1),t("el-form-item",{attrs:{label:"负向提示词"}},[t("el-input",{attrs:{type:"textarea",rows:5,size:"small"},model:{value:e.aiImageForm.negative_prompt,callback:function(o){e.$set(e.aiImageForm,"negative_prompt",o)},expression:"aiImageForm.negative_prompt"}})],1),t("el-form-item",{attrs:{label:"是否背景透明"}},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.aiImageForm.png,callback:function(o){e.$set(e.aiImageForm,"png",o)},expression:"aiImageForm.png"}},[t("el-radio",{attrs:{label:!0}},[e._v("是")]),t("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1)],1)],1)},ho=[];const me="https://u248120-87de-6175a03c.westc.gpuhub.com:8443",uo={components:{Modal:re},data(){return{isShowModal:!1,eventURL:"",eventActiveName:"redirect",loraList:[],loading:!1,rules:{lora_name:[{required:!0,message:"请选择模型",trigger:"blur"}],tile_type:[{required:!0,message:"请选择类型",trigger:"blur"}],prompt:[{required:!0,message:"请输入正向描述词",trigger:"blur"}]},tileType:[{value:"seamless_0",name:"定位花"},{value:"seamless_x",name:"水平连续"},{value:"seamless_y",name:"垂直连续"},{value:"seamless_4",name:"四方连续"}],aiImageForm:{lora_name:null,prompt:"",negative_prompt:"",tile_type:"seamless_0",png:!1}}},computed:Y(["curComponent"]),created(){Ae.get(`${me}/designer/get_loras`).then(e=>{const{data:n}=e;this.loraList=n})},methods:{confirmHandle(){this.$refs.aiImageFormDom.validate(e=>{this.loading=!0,Ae.post(`${me}/designer/txt2img`,this.aiImageForm).then(n=>{this.loading=!1;const{data:t}=n,o=`${me}/designer/${t}`;setTimeout(()=>{this.$store.commit("updateUrl",{url:o}),this.isShowModal=!1},2e3)})})}}},ze={};var po=j(uo,lo,ho,!1,mo,"5a160990",null,null);function mo(e){for(let n in ze)this[n]=ze[n]}const vt=function(){return po.exports}();var fo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{on:{click:e.onClick,mouseenter:e.onMouseEnter}},[e.config.component.startsWith("SVG")?t(e.config.component,{ref:"component",tag:"component",staticClass:"component",style:e.getSVGStyle(e.config.style),attrs:{"prop-value":e.config.propValue,element:e.config,request:e.config.request,linkage:e.config.linkage}}):t(e.config.component,{ref:"component",tag:"component",staticClass:"component",style:e.getStyle(e.config.style),attrs:{"prop-value":e.config.propValue,element:e.config,request:e.config.request,linkage:e.config.linkage}})],1)},go=[];const vo={mixins:[to],props:{config:{type:Object,required:!0,default:()=>{}}},mounted(){Se(this.$refs.component.$el,this.config.animations)},methods:{getStyle:ye,getSVGStyle:rt,onClick(){const e=this.config.events;Object.keys(e).forEach(n=>{this[n](e[n])}),W.$emit("v-click",this.config.id)},onMouseEnter(){W.$emit("v-hover",this.config.id)}}},Ue={};var bo=j(vo,fo,go,!1,_o,"114f2a3e",null,null);function _o(e){for(let n in Ue)this[n]=Ue[n]}const bt=function(){return bo.exports}();function yo(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const t=document.implementation.createHTMLDocument(),o=t.createElement("base"),c=t.createElement("a");return t.head.appendChild(o),t.body.appendChild(c),n&&(o.href=n),c.href=e,c.href}const xo=(()=>{let e=0;const n=()=>`0000${(Math.random()*Q(36,4)<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function te(e){const n=[];for(let t=0,o=e.length;t<o;t++)n.push(e[t]);return n}function he(e,n){const o=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return o?parseFloat(o.replace("px","")):0}function So(e){const n=he(e,"border-left-width"),t=he(e,"border-right-width");return e.clientWidth+n+t}function wo(e){const n=he(e,"border-top-width"),t=he(e,"border-bottom-width");return e.clientHeight+n+t}function _t(e,n={}){const t=n.width||So(e),o=n.height||wo(e);return{width:t,height:o}}function Co(){let e,n;try{n=process}catch(o){}const t=n&&n.env?n.env.devicePixelRatio:null;return t&&(e=parseInt(t,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const G=16384;function $o(e){(e.width>G||e.height>G)&&(e.width>G&&e.height>G?e.width>e.height?(e.height*=G/e.width,e.width=G):(e.width*=G/e.height,e.height=G):e.width>G?(e.height*=G/e.width,e.width=G):(e.width*=G/e.height,e.height=G))}function ue(e){return new Promise((n,t)=>{const o=new Image;o.decode=()=>n(o),o.onload=()=>n(o),o.onerror=t,o.crossOrigin="anonymous",o.decoding="async",o.src=e})}function ko(e){return N(this,null,function*(){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)})}function Ao(e,n,t){return N(this,null,function*(){const o="http://www.w3.org/2000/svg",c=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return c.setAttribute("width",`${n}`),c.setAttribute("height",`${t}`),c.setAttribute("viewBox",`0 0 ${n} ${t}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),c.appendChild(s),s.appendChild(e),ko(c)})}const X=(e,n)=>{if(e instanceof n)return!0;const t=Object.getPrototypeOf(e);return t===null?!1:t.constructor.name===n.name||X(t,n)};function Ro(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function Eo(e){return te(e).map(n=>{const t=e.getPropertyValue(n),o=e.getPropertyPriority(n);return`${n}: ${t}${o?" !important":""};`}).join(" ")}function To(e,n,t){const o=`.${e}:${n}`,c=t.cssText?Ro(t):Eo(t);return document.createTextNode(`${o}{${c}}`)}function je(e,n,t){const o=window.getComputedStyle(e,t),c=o.getPropertyValue("content");if(c===""||c==="none")return;const s=xo();try{n.className=`${n.className} ${s}`}catch(p){return}const h=document.createElement("style");h.appendChild(To(s,t,o)),n.appendChild(h)}function Lo(e,n){je(e,n,":before"),je(e,n,":after")}const Ve="application/font-woff",We="image/jpeg",Mo={woff:Ve,woff2:Ve,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:We,jpeg:We,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Io(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function we(e){const n=Io(e).toLowerCase();return Mo[n]||""}function Oo(e){return e.split(/,/)[1]}function _e(e){return e.search(/^(data:)/)!==-1}function yt(e,n){return`data:${n};base64,${e}`}function xt(e,n,t){return N(this,null,function*(){const o=yield fetch(e,n);if(o.status===404)throw new Error(`Resource "${o.url}" not found`);const c=yield o.blob();return new Promise((s,h)=>{const p=new FileReader;p.onerror=h,p.onloadend=()=>{try{s(t({res:o,result:p.result}))}catch(d){h(d)}},p.readAsDataURL(c)})})}const fe={};function Do(e,n,t){let o=e.replace(/\?.*/,"");return t&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),n?`[${n}]${o}`:o}function Ce(e,n,t){return N(this,null,function*(){const o=Do(e,n,t.includeQueryParams);if(fe[o]!=null)return fe[o];t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let c;try{const s=yield xt(e,t.fetchRequestInit,({res:h,result:p})=>(n||(n=h.headers.get("Content-Type")||""),Oo(p)));c=yt(s,n)}catch(s){c=t.imagePlaceholder||"";let h=`Failed to fetch resource: ${e}`;s&&(h=typeof s=="string"?s:s.message)}return fe[o]=c,c})}function Po(e){return N(this,null,function*(){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):ue(n)})}function No(e,n){return N(this,null,function*(){if(e.currentSrc){const s=document.createElement("canvas"),h=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,h==null||h.drawImage(e,0,0,s.width,s.height);const p=s.toDataURL();return ue(p)}const t=e.poster,o=we(t),c=yield Ce(t,o,n);return ue(c)})}function Fo(e){return N(this,null,function*(){var n;try{if(!((n=e==null?void 0:e.contentDocument)===null||n===void 0)&&n.body)return yield pe(e.contentDocument.body,{},!0)}catch(t){}return e.cloneNode(!1)})}function Bo(e,n){return N(this,null,function*(){return X(e,HTMLCanvasElement)?Po(e):X(e,HTMLVideoElement)?No(e,n):X(e,HTMLIFrameElement)?Fo(e):e.cloneNode(!1)})}const Ho=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";function zo(e,n,t){return N(this,null,function*(){var o,c;let s=[];return Ho(e)&&e.assignedNodes?s=te(e.assignedNodes()):X(e,HTMLIFrameElement)&&(!((o=e.contentDocument)===null||o===void 0)&&o.body)?s=te(e.contentDocument.body.childNodes):s=te(((c=e.shadowRoot)!==null&&c!==void 0?c:e).childNodes),s.length===0||X(e,HTMLVideoElement)||(yield s.reduce((h,p)=>h.then(()=>pe(p,t)).then(d=>{d&&n.appendChild(d)}),Promise.resolve())),n})}function Uo(e,n){const t=n.style;if(!t)return;const o=window.getComputedStyle(e);o.cssText?(t.cssText=o.cssText,t.transformOrigin=o.transformOrigin):te(o).forEach(c=>{let s=o.getPropertyValue(c);c==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),X(e,HTMLIFrameElement)&&c==="display"&&s==="inline"&&(s="block"),c==="d"&&n.getAttribute("d")&&(s=`path(${n.getAttribute("d")})`),t.setProperty(c,s,o.getPropertyPriority(c))})}function jo(e,n){X(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),X(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function Vo(e,n){if(X(e,HTMLSelectElement)){const t=n,o=Array.from(t.children).find(c=>e.value===c.getAttribute("value"));o&&o.setAttribute("selected","")}}function Wo(e,n){return X(n,Element)&&(Uo(e,n),Lo(e,n),jo(e,n),Vo(e,n)),n}function qo(e,n){return N(this,null,function*(){const t=e.querySelectorAll?e.querySelectorAll("use"):[];if(t.length===0)return e;const o={};for(let s=0;s<t.length;s++){const p=t[s].getAttribute("xlink:href");if(p){const d=e.querySelector(p),g=document.querySelector(p);!d&&g&&!o[p]&&(o[p]=yield pe(g,n,!0))}}const c=Object.values(o);if(c.length){const s="http://www.w3.org/1999/xhtml",h=document.createElementNS(s,"svg");h.setAttribute("xmlns",s),h.style.position="absolute",h.style.width="0",h.style.height="0",h.style.overflow="hidden",h.style.display="none";const p=document.createElementNS(s,"defs");h.appendChild(p);for(let d=0;d<c.length;d++)p.appendChild(c[d]);e.appendChild(h)}return e})}function pe(e,n,t){return N(this,null,function*(){return!t&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(o=>Bo(o,n)).then(o=>zo(e,o,n)).then(o=>Wo(e,o)).then(o=>qo(o,n))})}const St=/url\((['"]?)([^'"]+?)\1\)/g,Xo=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Yo=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Go(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function Ko(e){const n=[];return e.replace(St,(t,o,c)=>(n.push(c),t)),n.filter(t=>!_e(t))}function Jo(e,n,t,o,c){return N(this,null,function*(){try{const s=t?yo(n,t):n,h=we(n);let p;if(c){const d=yield c(s);p=yt(d,h)}else p=yield Ce(s,h,o);return e.replace(Go(n),`$1${p}$3`)}catch(s){}return e})}function Qo(e,{preferredFontFormat:n}){return n?e.replace(Yo,t=>{for(;;){const[o,,c]=Xo.exec(t)||[];if(!c)return"";if(c===n)return`src: ${o};`}}):e}function wt(e){return e.search(St)!==-1}function Ct(e,n,t){return N(this,null,function*(){if(!wt(e))return e;const o=Qo(e,t);return Ko(o).reduce((s,h)=>s.then(p=>Jo(p,h,n,t)),Promise.resolve(o))})}function ce(e,n,t){return N(this,null,function*(){var o;const c=(o=n.style)===null||o===void 0?void 0:o.getPropertyValue(e);if(c){const s=yield Ct(c,null,t);return n.style.setProperty(e,s,n.style.getPropertyPriority(e)),!0}return!1})}function Zo(e,n){return N(this,null,function*(){(yield ce("background",e,n))||(yield ce("background-image",e,n)),(yield ce("mask",e,n))||(yield ce("mask-image",e,n))})}function ei(e,n){return N(this,null,function*(){const t=X(e,HTMLImageElement);if(!(t&&!_e(e.src))&&!(X(e,SVGImageElement)&&!_e(e.href.baseVal)))return;const o=t?e.src:e.href.baseVal,c=yield Ce(o,we(o),n);yield new Promise((s,h)=>{e.onload=s,e.onerror=h;const p=e;p.decode&&(p.decode=s),p.loading==="lazy"&&(p.loading="eager"),t?(e.srcset="",e.src=c):e.href.baseVal=c})})}function ti(e,n){return N(this,null,function*(){const o=te(e.childNodes).map(c=>$t(c,n));yield Promise.all(o).then(()=>e)})}function $t(e,n){return N(this,null,function*(){X(e,Element)&&(yield Zo(e,n),yield ei(e,n),yield ti(e,n))})}function ni(e,n){const{style:t}=e;n.backgroundColor&&(t.backgroundColor=n.backgroundColor),n.width&&(t.width=`${n.width}px`),n.height&&(t.height=`${n.height}px`);const o=n.style;return o!=null&&Object.keys(o).forEach(c=>{t[c]=o[c]}),e}const qe={};function Xe(e){return N(this,null,function*(){let n=qe[e];if(n!=null)return n;const o=yield(yield fetch(e)).text();return n={url:e,cssText:o},qe[e]=n,n})}function Ye(e,n){return N(this,null,function*(){let t=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,s=(t.match(/url\([^)]+\)/g)||[]).map(h=>N(this,null,function*(){let p=h.replace(o,"$1");return p.startsWith("https://")||(p=new URL(p,e.url).href),xt(p,n.fetchRequestInit,({result:d})=>(t=t.replace(h,`url(${d})`),[h,d]))}));return Promise.all(s).then(()=>t)})}function Ge(e){if(e==null)return[];const n=[],t=/(\/\*[\s\S]*?\*\/)/gi;let o=e.replace(t,"");const c=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=c.exec(o);if(d===null)break;n.push(d[0])}o=o.replace(c,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,h="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",p=new RegExp(h,"gi");for(;;){let d=s.exec(o);if(d===null){if(d=p.exec(o),d===null)break;s.lastIndex=p.lastIndex}else p.lastIndex=s.lastIndex;n.push(d[0])}return n}function oi(e,n){return N(this,null,function*(){const t=[],o=[];return e.forEach(c=>{if("cssRules"in c)try{te(c.cssRules||[]).forEach((s,h)=>{if(s.type===CSSRule.IMPORT_RULE){let p=h+1;const d=s.href,g=Xe(d).then(b=>Ye(b,n)).then(b=>Ge(b).forEach($=>{try{c.insertRule($,$.startsWith("@import")?p+=1:c.cssRules.length)}catch(T){}})).catch(b=>{});o.push(g)}})}catch(s){const h=e.find(p=>p.href==null)||document.styleSheets[0];c.href!=null&&o.push(Xe(c.href).then(p=>Ye(p,n)).then(p=>Ge(p).forEach(d=>{h.insertRule(d,c.cssRules.length)})).catch(p=>{}))}}),Promise.all(o).then(()=>(e.forEach(c=>{if("cssRules"in c)try{te(c.cssRules||[]).forEach(s=>{t.push(s)})}catch(s){}}),t))})}function ii(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>wt(n.style.getPropertyValue("src")))}function ri(e,n){return N(this,null,function*(){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=te(e.ownerDocument.styleSheets),o=yield oi(t,n);return ii(o)})}function si(e,n){return N(this,null,function*(){const t=yield ri(e,n);return(yield Promise.all(t.map(c=>{const s=c.parentStyleSheet?c.parentStyleSheet.href:null;return Ct(c.cssText,s,n)}))).join(`
`)})}function ai(e,n){return N(this,null,function*(){const t=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:yield si(e,n);if(t){const o=document.createElement("style"),c=document.createTextNode(t);o.appendChild(c),e.firstChild?e.insertBefore(o,e.firstChild):e.appendChild(o)}})}function ci(t){return N(this,arguments,function*(e,n={}){const{width:o,height:c}=_t(e,n),s=yield pe(e,n,!0);return yield ai(s,n),yield $t(s,n),ni(s,n),yield Ao(s,o,c)})}function li(t){return N(this,arguments,function*(e,n={}){const{width:o,height:c}=_t(e,n),s=yield ci(e,n),h=yield ue(s),p=document.createElement("canvas"),d=p.getContext("2d"),g=n.pixelRatio||Co(),b=n.canvasWidth||o,$=n.canvasHeight||c;return p.width=b*g,p.height=$*g,n.skipAutoScale||$o(p),p.style.width=`${b}`,p.style.height=`${$}`,n.backgroundColor&&(d.fillStyle=n.backgroundColor,d.fillRect(0,0,p.width,p.height)),d.drawImage(h,0,0,p.width,p.height),p})}function hi(t){return N(this,arguments,function*(e,n={}){return(yield li(e,n)).toDataURL()})}var ui=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{ref:"container",staticClass:"bg"},[e.isScreenshot?t("el-button",{staticClass:"close",on:{click:e.htmlToImage}},[e._v("确定")]):t("el-button",{staticClass:"close",on:{click:e.close}},[e._v("关闭")]),t("div",{staticClass:"canvas-container"},[t("div",{staticClass:"canvas",style:Object.assign({},e.getCanvasStyle(e.canvasStyleData),{width:e.changeStyleWithScale(e.canvasStyleData.width)+"px",height:e.changeStyleWithScale(e.canvasStyleData.height)+"px"})},e._l(e.copyData,function(o,c){return t(bt,{key:c,attrs:{config:o}})}),1)])],1)},pi=[];const di={components:{ComponentWrapper:bt},props:{isScreenshot:{type:Boolean,default:!1}},data(){return{copyData:[]}},computed:Y(["componentData","canvasStyleData"]),created(){this.$set(this,"copyData",xe(this.componentData))},methods:{getStyle:ye,getCanvasStyle:ot,changeStyleWithScale:it,close(){this.$emit("close")},htmlToImage(){hi(this.$refs.container.querySelector(".canvas")).then(e=>{const n=document.createElement("a");n.setAttribute("download","screenshot"),n.href=e,n.click()}).catch(e=>{}).finally(this.close)}}},Ke={};var mi=j(di,ui,pi,!1,fi,"1b25712e",null,null);function fi(e){for(let n in Ke)this[n]=Ke[n]}const kt=function(){return mi.exports}();var gi={exports:{}};(function(e,n){ace.define("ace/theme/one_dark-css",["require","exports","module"],function(t,o,c){c.exports=`.ace-one-dark .ace_gutter {
    background: #282c34;
    color: #6a6f7a
}

.ace-one-dark .ace_print-margin {
    width: 1px;
    background: #e8e8e8
}

.ace-one-dark {
    background-color: #282c34;
    color: #abb2bf
}

.ace-one-dark .ace_cursor {
    color: #528bff
}

.ace-one-dark .ace_marker-layer .ace_selection {
    background: #3d4350
}

.ace-one-dark.ace_multiselect .ace_selection.ace_start {
    box-shadow: 0 0 3px 0 #282c34;
    border-radius: 2px
}

.ace-one-dark .ace_marker-layer .ace_step {
    background: #c6dbae
}

.ace-one-dark .ace_marker-layer .ace_bracket {
    margin: -1px 0 0 -1px;
    border: 1px solid #747369
}

.ace-one-dark .ace_marker-layer .ace_active-line {
    background: rgba(76, 87, 103, .19)
}

.ace-one-dark .ace_gutter-active-line {
    background-color: rgba(76, 87, 103, .19)
}

.ace-one-dark .ace_marker-layer .ace_selected-word {
    border: 1px solid #3d4350
}

.ace-one-dark .ace_fold {
    background-color: #61afef;
    border-color: #abb2bf
}

.ace-one-dark .ace_keyword {
    color: #c678dd
}

.ace-one-dark .ace_keyword.ace_operator {
    color: #c678dd
}

.ace-one-dark .ace_keyword.ace_other.ace_unit {
    color: #d19a66
}

.ace-one-dark .ace_constant.ace_language {
    color: #d19a66
}

.ace-one-dark .ace_constant.ace_numeric {
    color: #d19a66
}

.ace-one-dark .ace_constant.ace_character {
    color: #56b6c2
}

.ace-one-dark .ace_constant.ace_other {
    color: #56b6c2
}

.ace-one-dark .ace_support.ace_function {
    color: #61afef
}

.ace-one-dark .ace_support.ace_constant {
    color: #d19a66
}

.ace-one-dark .ace_support.ace_class {
    color: #e5c07b
}

.ace-one-dark .ace_support.ace_type {
    color: #e5c07b
}

.ace-one-dark .ace_storage {
    color: #c678dd
}

.ace-one-dark .ace_storage.ace_type {
    color: #c678dd
}

.ace-one-dark .ace_invalid {
    color: #fff;
    background-color: #f2777a
}

.ace-one-dark .ace_invalid.ace_deprecated {
    color: #272b33;
    background-color: #d27b53
}

.ace-one-dark .ace_string {
    color: #98c379
}

.ace-one-dark .ace_string.ace_regexp {
    color: #e06c75
}

.ace-one-dark .ace_comment {
    font-style: italic;
    color: #5c6370
}

.ace-one-dark .ace_variable {
    color: #e06c75
}

.ace-one-dark .ace_variable.ace_parameter {
    color: #d19a66
}

.ace-one-dark .ace_meta.ace_tag {
    color: #e06c75
}

.ace-one-dark .ace_entity.ace_other.ace_attribute-name {
    color: #e06c75
}

.ace-one-dark .ace_entity.ace_name.ace_function {
    color: #61afef
}

.ace-one-dark .ace_entity.ace_name.ace_tag {
    color: #e06c75
}

.ace-one-dark .ace_markup.ace_heading {
    color: #98c379
}

.ace-one-dark .ace_indent-guide {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ09NrYAgMjP4PAAtGAwchHMyAAAAAAElFTkSuQmCC) right repeat-y
}

.ace-one-dark .ace_indent-guide-active {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;
}
`}),ace.define("ace/theme/one_dark",["require","exports","module","ace/theme/one_dark-css","ace/lib/dom"],function(t,o,c){o.isDark=!0,o.cssClass="ace-one-dark",o.cssText=t("./one_dark-css");var s=t("../lib/dom");s.importCssString(o.cssText,o.cssClass,!1)}),function(){ace.require(["ace/theme/one_dark"],function(t){e&&(e.exports=t)})}()})(gi);var vi={exports:{}};(function(e,n){ace.define("ace/ext/searchbox-css",["require","exports","module"],function(t,o,c){c.exports=`

/* ------------------------------------------------------------------------------------------
 * Editor Search Form
 * --------------------------------------------------------------------------------------- */
.ace_search {
    background-color: #ddd;
    color: #666;
    border: 1px solid #cbcbcb;
    border-top: 0 none;
    overflow: hidden;
    margin: 0;
    padding: 4px 6px 0 4px;
    position: absolute;
    top: 0;
    z-index: 99;
    white-space: normal;
}
.ace_search.left {
    border-left: 0 none;
    border-radius: 0px 0px 5px 0px;
    left: 0;
}
.ace_search.right {
    border-radius: 0px 0px 0px 5px;
    border-right: 0 none;
    right: 0;
}

.ace_search_form, .ace_replace_form {
    margin: 0 20px 4px 0;
    overflow: hidden;
    line-height: 1.9;
}
.ace_replace_form {
    margin-right: 0;
}
.ace_search_form.ace_nomatch {
    outline: 1px solid red;
}

.ace_search_field {
    border-radius: 3px 0 0 3px;
    background-color: white;
    color: black;
    border: 1px solid #cbcbcb;
    border-right: 0 none;
    outline: 0;
    padding: 0;
    font-size: inherit;
    margin: 0;
    line-height: inherit;
    padding: 0 6px;
    min-width: 17em;
    vertical-align: top;
    min-height: 1.8em;
    box-sizing: content-box;
}
.ace_searchbtn {
    border: 1px solid #cbcbcb;
    line-height: inherit;
    display: inline-block;
    padding: 0 6px;
    background: #fff;
    border-right: 0 none;
    border-left: 1px solid #dcdcdc;
    cursor: pointer;
    margin: 0;
    position: relative;
    color: #666;
}
.ace_searchbtn:last-child {
    border-radius: 0 3px 3px 0;
    border-right: 1px solid #cbcbcb;
}
.ace_searchbtn:disabled {
    background: none;
    cursor: default;
}
.ace_searchbtn:hover {
    background-color: #eef1f6;
}
.ace_searchbtn.prev, .ace_searchbtn.next {
     padding: 0px 0.7em
}
.ace_searchbtn.prev:after, .ace_searchbtn.next:after {
     content: "";
     border: solid 2px #888;
     width: 0.5em;
     height: 0.5em;
     border-width:  2px 0 0 2px;
     display:inline-block;
     transform: rotate(-45deg);
}
.ace_searchbtn.next:after {
     border-width: 0 2px 2px 0 ;
}
.ace_searchbtn_close {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;
    border-radius: 50%;
    border: 0 none;
    color: #656565;
    cursor: pointer;
    font: 16px/16px Arial;
    padding: 0;
    height: 14px;
    width: 14px;
    top: 9px;
    right: 7px;
    position: absolute;
}
.ace_searchbtn_close:hover {
    background-color: #656565;
    background-position: 50% 100%;
    color: white;
}

.ace_button {
    margin-left: 2px;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    -ms-user-select: none;
    user-select: none;
    overflow: hidden;
    opacity: 0.7;
    border: 1px solid rgba(100,100,100,0.23);
    padding: 1px;
    box-sizing:    border-box!important;
    color: black;
}

.ace_button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_button:active {
    background-color: #ddd;
}

.ace_button.checked {
    border-color: #3399ff;
    opacity:1;
}

.ace_search_options{
    margin-bottom: 3px;
    text-align: right;
    -webkit-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    -ms-user-select: none;
    user-select: none;
    clear: both;
}

.ace_search_counter {
    float: left;
    font-family: arial;
    padding: 0 8px;
}`}),ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/ext/searchbox-css","ace/keyboard/hash_handler","ace/lib/keys","ace/config"],function(t,o,c){var s=t("../lib/dom"),h=t("../lib/lang"),p=t("../lib/event"),d=t("./searchbox-css"),g=t("../keyboard/hash_handler").HashHandler,b=t("../lib/keys"),$=t("../config").nls,T=999;s.importCssString(d,"ace_searchbox",!1);var L=function(){function w(k,R,M){this.activeInput;var S=s.createElement("div");s.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:$("Search for"),spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"​"],["span",{action:"findNext",class:"ace_searchbtn next"},"​"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},$("All")]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:$("Replace with"),spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},$("Replace")],["span",{action:"replaceAll",class:"ace_searchbtn"},$("All")]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:$("Toggle Replace mode"),style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:$("RegExp Search")},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:$("CaseSensitive Search")},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:$("Whole Word Search")},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:$("Search In Selection")},"S"]]],S),this.element=S.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(k),s.importCssString(d,"ace_searchbox",k.container)}return w.prototype.setEditor=function(k){k.searchBox=this,k.renderer.scroller.appendChild(this.element),this.editor=k},w.prototype.setSession=function(k){this.searchRange=null,this.$syncOptions(!0)},w.prototype.$initElements=function(k){this.searchBox=k.querySelector(".ace_search_form"),this.replaceBox=k.querySelector(".ace_replace_form"),this.searchOption=k.querySelector("[action=searchInSelection]"),this.replaceOption=k.querySelector("[action=toggleReplace]"),this.regExpOption=k.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=k.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=k.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=k.querySelector(".ace_search_counter")},w.prototype.$init=function(){var k=this.element;this.$initElements(k);var R=this;p.addListener(k,"mousedown",function(M){setTimeout(function(){R.activeInput.focus()},0),p.stopPropagation(M)}),p.addListener(k,"click",function(M){var S=M.target||M.srcElement,m=S.getAttribute("action");m&&R[m]?R[m]():R.$searchBarKb.commands[m]&&R.$searchBarKb.commands[m].exec(R),p.stopPropagation(M)}),p.addCommandKeyListener(k,function(M,S,m){var i=b.keyCodeToString(m),a=R.$searchBarKb.findKeyCommand(S,i);a&&a.exec&&(a.exec(R),p.stopEvent(M))}),this.$onChange=h.delayedCall(function(){R.find(!1,!1)}),p.addListener(this.searchInput,"input",function(){R.$onChange.schedule(20)}),p.addListener(this.searchInput,"focus",function(){R.activeInput=R.searchInput,R.searchInput.value&&R.highlight()}),p.addListener(this.replaceInput,"focus",function(){R.activeInput=R.replaceInput,R.searchInput.value&&R.highlight()})},w.prototype.setSearchRange=function(k){this.searchRange=k,k?this.searchRangeMarker=this.editor.session.addMarker(k,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},w.prototype.$syncOptions=function(k){s.setCssClass(this.replaceOption,"checked",this.searchRange),s.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",s.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),s.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),s.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var R=this.editor.getReadOnly();this.replaceOption.style.display=R?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!R?"":"none",this.find(!1,!1,k)},w.prototype.highlight=function(k){this.editor.session.highlight(k||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},w.prototype.find=function(k,R,M){var S=this.editor.find(this.searchInput.value,{skipCurrent:k,backwards:R,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:M,range:this.searchRange}),m=!S&&this.searchInput.value;s.setCssClass(this.searchBox,"ace_nomatch",m),this.editor._emit("findSearchBox",{match:!m}),this.highlight(),this.updateCounter()},w.prototype.updateCounter=function(){var k=this.editor,R=k.$search.$options.re,M=R.unicode,S=0,m=0;if(R){var i=this.searchRange?k.session.getTextRange(this.searchRange):k.getValue(),a=k.session.doc.positionToIndex(k.selection.anchor);this.searchRange&&(a-=k.session.doc.positionToIndex(this.searchRange.start));for(var r=R.lastIndex=0,l;(l=R.exec(i))&&(S++,r=l.index,r<=a&&m++,!(S>T||!l[0]&&(R.lastIndex=r+=h.skipEmptyMatch(i,r,M),r>=i.length))););}this.searchCounter.textContent=$("$0 of $1",[m,S>T?T+"+":S])},w.prototype.findNext=function(){this.find(!0,!1)},w.prototype.findPrev=function(){this.find(!0,!0)},w.prototype.findAll=function(){var k=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),R=!k&&this.searchInput.value;s.setCssClass(this.searchBox,"ace_nomatch",R),this.editor._emit("findSearchBox",{match:!R}),this.highlight(),this.hide()},w.prototype.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},w.prototype.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},w.prototype.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},w.prototype.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},w.prototype.show=function(k,R){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=R,k&&(this.searchInput.value=k),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},w.prototype.isFocused=function(){var k=document.activeElement;return k==this.searchInput||k==this.replaceInput},w}(),P=new g;P.bindKeys({"Ctrl-f|Command-f":function(w){var k=w.isReplace=!w.isReplace;w.replaceBox.style.display=k?"":"none",w.replaceOption.checked=!1,w.$syncOptions(),w.searchInput.focus()},"Ctrl-H|Command-Option-F":function(w){w.editor.getReadOnly()||(w.replaceOption.checked=!0,w.$syncOptions(),w.replaceInput.focus())},"Ctrl-G|Command-G":function(w){w.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(w){w.findPrev()},esc:function(w){setTimeout(function(){w.hide()})},Return:function(w){w.activeInput==w.replaceInput&&w.replace(),w.findNext()},"Shift-Return":function(w){w.activeInput==w.replaceInput&&w.replace(),w.findPrev()},"Alt-Return":function(w){w.activeInput==w.replaceInput&&w.replaceAll(),w.findAll()},Tab:function(w){(w.activeInput==w.replaceInput?w.searchInput:w.replaceInput).focus()}}),P.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(w){w.regExpOption.checked=!w.regExpOption.checked,w.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(w){w.caseSensitiveOption.checked=!w.caseSensitiveOption.checked,w.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(w){w.wholeWordOption.checked=!w.wholeWordOption.checked,w.$syncOptions()}},{name:"toggleReplace",exec:function(w){w.replaceOption.checked=!w.replaceOption.checked,w.$syncOptions()}},{name:"searchInSelection",exec:function(w){w.searchOption.checked=!w.searchRange,w.setSearchRange(w.searchOption.checked&&w.editor.getSelectionRange()),w.$syncOptions()}}]);var B=new g([{bindKey:"Esc",name:"closeSearchBar",exec:function(w){w.searchBox.hide()}}]);L.prototype.$searchBarKb=P,L.prototype.$closeSearchBarKb=B,o.SearchBox=L,o.Search=function(w,k){var R=w.searchBox||new L(w);R.show(w.session.getTextRange(),k)}}),function(){ace.require(["ace/ext/searchbox"],function(t){e&&(e.exports=t)})}()})(vi);var bi={exports:{}};(function(e,n){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(t,o,c){function s(i){var a=new Date().toLocaleString("en-us",i);return a.length==1?"0"+a:a}var h=t("./lib/dom"),p=t("./lib/oop"),d=t("./lib/event_emitter").EventEmitter,g=t("./lib/lang"),b=t("./range").Range,$=t("./range_list").RangeList,T=t("./keyboard/hash_handler").HashHandler,L=t("./tokenizer").Tokenizer,P=t("./clipboard"),B={CURRENT_WORD:function(i){return i.session.getTextRange(i.session.getWordRange())},SELECTION:function(i,a,r){var l=i.session.getTextRange();return r?l.replace(/\n\r?([ \t]*\S)/g,`
`+r+"$1"):l},CURRENT_LINE:function(i){return i.session.getLine(i.getCursorPosition().row)},PREV_LINE:function(i){return i.session.getLine(i.getCursorPosition().row-1)},LINE_INDEX:function(i){return i.getCursorPosition().row},LINE_NUMBER:function(i){return i.getCursorPosition().row+1},SOFT_TABS:function(i){return i.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(i){return i.session.getTabSize()},CLIPBOARD:function(i){return P.getText&&P.getText()},FILENAME:function(i){return/[^/\\]*$/.exec(this.FILEPATH(i))[0]},FILENAME_BASE:function(i){return/[^/\\]*$/.exec(this.FILEPATH(i))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(i){return this.FILEPATH(i).replace(/[^/\\]*$/,"")},FILEPATH:function(i){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(i){var a=i.session.$mode||{};return a.blockComment&&a.blockComment.start||""},BLOCK_COMMENT_END:function(i){var a=i.session.$mode||{};return a.blockComment&&a.blockComment.end||""},LINE_COMMENT:function(i){var a=i.session.$mode||{};return a.lineCommentStart||""},CURRENT_YEAR:s.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:s.bind(null,{year:"2-digit"}),CURRENT_MONTH:s.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:s.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:s.bind(null,{month:"short"}),CURRENT_DATE:s.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:s.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:s.bind(null,{weekday:"short"}),CURRENT_HOUR:s.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:s.bind(null,{minute:"2-digit"}),CURRENT_SECOND:s.bind(null,{second:"2-digit"})};B.SELECTED_TEXT=B.SELECTION;var w=function(){function i(){this.snippetMap={},this.snippetNameMap={},this.variables=B}return i.prototype.getTokenizer=function(){return i.$tokenizer||this.createTokenizer()},i.prototype.createTokenizer=function(){function a(u){return u=u.substr(1),/^\d+$/.test(u)?[{tabstopId:parseInt(u,10)}]:[{text:u}]}function r(u){return"(?:[^\\\\"+u+"]|\\\\.)"}var l={regex:"/("+r("/")+"+)/",onMatch:function(u,y,x){var _=x[0];return _.fmtString=!0,_.guard=u.slice(1,-1),_.flag="",""},next:"formatString"};return i.$tokenizer=new L({start:[{regex:/\\./,onMatch:function(u,y,x){var _=u[1];return(_=="}"&&x.length||"`$\\".indexOf(_)!=-1)&&(u=_),[u]}},{regex:/}/,onMatch:function(u,y,x){return[x.length?x.shift():u]}},{regex:/\$(?:\d+|\w+)/,onMatch:a},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(u,y,x){var _=a(u.substr(1));return x.unshift(_[0]),_},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+r("\\|")+"*\\|",onMatch:function(u,y,x){var _=u.slice(1,-1).replace(/\\[,|\\]|,/g,function(f){return f.length==2?f[1]:"\0"}).split("\0").map(function(f){return{value:f}});return x[0].choices=_,[_[0]]},next:"start"},l,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(u,y,x){return x.length&&x[0].expectElse?(x[0].expectElse=!1,x[0].ifEnd={elseEnd:x[0]},[x[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(u,y,x){var _=u[1];return _=="}"&&x.length||"`$\\".indexOf(_)!=-1?u=_:_=="n"?u=`
`:_=="t"?u="	":"ulULE".indexOf(_)!=-1&&(u={changeCase:_,local:_>"a"}),[u]}},{regex:"/\\w*}",onMatch:function(u,y,x){var _=x.shift();return _&&(_.flag=u.slice(1,-1)),this.next=_&&_.tabstopId?"start":"",[_||u]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(u,y,x){return[{text:u.slice(1)}]}},{regex:/\${\w+/,onMatch:function(u,y,x){var _={text:u.slice(2)};return x.unshift(_),[_]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(u,y,x){var _=x.shift();return this.next=_&&_.tabstopId?"start":"",[_||u]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(u,y,x){var _=x[0];return _.formatFunction=u.slice(2,-1),[x.shift()]},next:"formatString"},l,{regex:/:[\?\-+]?/,onMatch:function(u,y,x){u[1]=="+"&&(x[0].ifEnd=x[0]),u[1]=="?"&&(x[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),i.$tokenizer},i.prototype.tokenizeTmSnippet=function(a,r){return this.getTokenizer().getLineTokens(a,r).tokens.map(function(l){return l.value||l})},i.prototype.getVariableValue=function(a,r,l){if(/^\d+$/.test(r))return(this.variables.__||{})[r]||"";if(/^[A-Z]\d+$/.test(r))return(this.variables[r[0]+"__"]||{})[r.substr(1)]||"";if(r=r.replace(/^TM_/,""),!this.variables.hasOwnProperty(r))return"";var u=this.variables[r];return typeof u=="function"&&(u=this.variables[r](a,r,l)),u==null?"":u},i.prototype.tmStrFormat=function(a,r,l){if(!r.fmt)return a;var u=r.flag||"",y=r.guard;y=new RegExp(y,u.replace(/[^gim]/g,""));var x=typeof r.fmt=="string"?this.tokenizeTmSnippet(r.fmt,"formatString"):r.fmt,_=this,f=a.replace(y,function(){var v=_.variables.__;_.variables.__=[].slice.call(arguments);for(var C=_.resolveVariables(x,l),E="E",A=0;A<C.length;A++){var I=C[A];if(typeof I=="object")if(C[A]="",I.changeCase&&I.local){var O=C[A+1];O&&typeof O=="string"&&(I.changeCase=="u"?C[A]=O[0].toUpperCase():C[A]=O[0].toLowerCase(),C[A+1]=O.substr(1))}else I.changeCase&&(E=I.changeCase);else E=="U"?C[A]=I.toUpperCase():E=="L"&&(C[A]=I.toLowerCase())}return _.variables.__=v,C.join("")});return f},i.prototype.tmFormatFunction=function(a,r,l){return r.formatFunction=="upcase"?a.toUpperCase():r.formatFunction=="downcase"?a.toLowerCase():a},i.prototype.resolveVariables=function(a,r){function l(E){var A=a.indexOf(E,_+1);A!=-1&&(_=A)}for(var u=[],y="",x=!0,_=0;_<a.length;_++){var f=a[_];if(typeof f=="string"){u.push(f),f==`
`?(x=!0,y=""):x&&(y=/^\t*/.exec(f)[0],x=/\S/.test(f));continue}if(f){if(x=!1,f.fmtString){var v=a.indexOf(f,_+1);v==-1&&(v=a.length),f.fmt=a.slice(_+1,v),_=v}if(f.text){var C=this.getVariableValue(r,f.text,y)+"";f.fmtString&&(C=this.tmStrFormat(C,f,r)),f.formatFunction&&(C=this.tmFormatFunction(C,f,r)),C&&!f.ifEnd?(u.push(C),l(f)):!C&&f.ifEnd&&l(f.ifEnd)}else f.elseEnd?l(f.elseEnd):(f.tabstopId!=null||f.changeCase!=null)&&u.push(f)}}return u},i.prototype.getDisplayTextForSnippet=function(a,r){var l=k.call(this,a,r);return l.text},i.prototype.insertSnippetForSelection=function(a,r,l){l===void 0&&(l={});var u=k.call(this,a,r,l),y=a.getSelectionRange(),x=a.session.replace(y,u.text),_=new R(a),f=a.inVirtualSelectionMode&&a.selection.index;_.addTabstops(u.tabstops,y.start,x,f)},i.prototype.insertSnippet=function(a,r,l){l===void 0&&(l={});var u=this;if(a.inVirtualSelectionMode)return u.insertSnippetForSelection(a,r,l);a.forEachSelection(function(){u.insertSnippetForSelection(a,r,l)},null,{keepOrder:!0}),a.tabstopManager&&a.tabstopManager.tabNext()},i.prototype.$getScope=function(a){var r=a.session.$mode.$id||"";if(r=r.split("/").pop(),r==="html"||r==="php"){r==="php"&&!a.session.$mode.inlinePhp&&(r="html");var l=a.getCursorPosition(),u=a.session.getState(l.row);typeof u=="object"&&(u=u[0]),u.substring&&(u.substring(0,3)=="js-"?r="javascript":u.substring(0,4)=="css-"?r="css":u.substring(0,4)=="php-"&&(r="php"))}return r},i.prototype.getActiveScopes=function(a){var r=this.$getScope(a),l=[r],u=this.snippetMap;return u[r]&&u[r].includeScopes&&l.push.apply(l,u[r].includeScopes),l.push("_"),l},i.prototype.expandWithTab=function(a,r){var l=this,u=a.forEachSelection(function(){return l.expandSnippetForSelection(a,r)},null,{keepOrder:!0});return u&&a.tabstopManager&&a.tabstopManager.tabNext(),u},i.prototype.expandSnippetForSelection=function(a,r){var l=a.getCursorPosition(),u=a.session.getLine(l.row),y=u.substring(0,l.column),x=u.substr(l.column),_=this.snippetMap,f;return this.getActiveScopes(a).some(function(v){var C=_[v];return C&&(f=this.findMatchingSnippet(C,y,x)),!!f},this),f?(r&&r.dryRun||(a.session.doc.removeInLine(l.row,l.column-f.replaceBefore.length,l.column+f.replaceAfter.length),this.variables.M__=f.matchBefore,this.variables.T__=f.matchAfter,this.insertSnippetForSelection(a,f.content),this.variables.M__=this.variables.T__=null),!0):!1},i.prototype.findMatchingSnippet=function(a,r,l){for(var u=a.length;u--;){var y=a[u];if(!(y.startRe&&!y.startRe.test(r))&&!(y.endRe&&!y.endRe.test(l))&&!(!y.startRe&&!y.endRe))return y.matchBefore=y.startRe?y.startRe.exec(r):[""],y.matchAfter=y.endRe?y.endRe.exec(l):[""],y.replaceBefore=y.triggerRe?y.triggerRe.exec(r)[0]:"",y.replaceAfter=y.endTriggerRe?y.endTriggerRe.exec(l)[0]:"",y}},i.prototype.register=function(a,r){function l(v){return v&&!/^\^?\(.*\)\$?$|^\\b$/.test(v)&&(v="(?:"+v+")"),v||""}function u(v,C,E){return v=l(v),C=l(C),E?(v=C+v,v&&v[v.length-1]!="$"&&(v+="$")):(v+=C,v&&v[0]!="^"&&(v="^"+v)),new RegExp(v)}function y(v){v.scope||(v.scope=r||"_"),r=v.scope,x[r]||(x[r]=[],_[r]={});var C=_[r];if(v.name){var E=C[v.name];E&&f.unregister(E),C[v.name]=v}x[r].push(v),v.prefix&&(v.tabTrigger=v.prefix),!v.content&&v.body&&(v.content=Array.isArray(v.body)?v.body.join(`
`):v.body),v.tabTrigger&&!v.trigger&&(!v.guard&&/^\w/.test(v.tabTrigger)&&(v.guard="\\b"),v.trigger=g.escapeRegExp(v.tabTrigger)),!(!v.trigger&&!v.guard&&!v.endTrigger&&!v.endGuard)&&(v.startRe=u(v.trigger,v.guard,!0),v.triggerRe=new RegExp(v.trigger),v.endRe=u(v.endTrigger,v.endGuard,!0),v.endTriggerRe=new RegExp(v.endTrigger))}var x=this.snippetMap,_=this.snippetNameMap,f=this;a||(a=[]),Array.isArray(a)?a.forEach(y):Object.keys(a).forEach(function(v){y(a[v])}),this._signal("registerSnippets",{scope:r})},i.prototype.unregister=function(a,r){function l(x){var _=y[x.scope||r];if(_&&_[x.name]){delete _[x.name];var f=u[x.scope||r],v=f&&f.indexOf(x);v>=0&&f.splice(v,1)}}var u=this.snippetMap,y=this.snippetNameMap;a.content?l(a):Array.isArray(a)&&a.forEach(l)},i.prototype.parseSnippetFile=function(a){a=a.replace(/\r/g,"");for(var r=[],l={},u=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,y;y=u.exec(a);){if(y[1])try{l=JSON.parse(y[1]),r.push(l)}catch(v){}if(y[4])l.content=y[4].replace(/^\t/gm,""),r.push(l),l={};else{var x=y[2],_=y[3];if(x=="regex"){var f=/\/((?:[^\/\\]|\\.)*)|$/g;l.guard=f.exec(_)[1],l.trigger=f.exec(_)[1],l.endTrigger=f.exec(_)[1],l.endGuard=f.exec(_)[1]}else x=="snippet"?(l.tabTrigger=_.match(/^\S*/)[0],l.name||(l.name=_)):x&&(l[x]=_)}}return r},i.prototype.getSnippetByName=function(a,r){var l=this.snippetNameMap,u;return this.getActiveScopes(r).some(function(y){var x=l[y];return x&&(u=x[a]),!!u},this),u},i}();p.implement(w.prototype,d);var k=function(i,a,r){function l(D){for(var V=[],Z=0;Z<D.length;Z++){var U=D[Z];if(typeof U=="object"){if(C[U.tabstopId])continue;var se=D.lastIndexOf(U,Z-1);U=V[se]||{tabstopId:U.tabstopId}}V[Z]=U}return V}r===void 0&&(r={});var u=i.getCursorPosition(),y=i.session.getLine(u.row),x=i.session.getTabString(),_=y.match(/^\s*/)[0];u.column<_.length&&(_=_.slice(0,u.column)),a=a.replace(/\r/g,"");var f=this.tokenizeTmSnippet(a);f=this.resolveVariables(f,i),f=f.map(function(D){return D==`
`&&!r.excludeExtraIndent?D+_:typeof D=="string"?D.replace(/\t/g,x):D});var v=[];f.forEach(function(D,V){if(typeof D=="object"){var Z=D.tabstopId,U=v[Z];if(U||(U=v[Z]=[],U.index=Z,U.value="",U.parents={}),U.indexOf(D)===-1){D.choices&&!U.choices&&(U.choices=D.choices),U.push(D);var se=f.indexOf(D,V+1);if(se!==-1){var ae=f.slice(V+1,se),It=ae.some(function(Ot){return typeof Ot=="object"});It&&!U.value?U.value=ae:ae.length&&(!U.value||typeof U.value!="string")&&(U.value=ae.join(""))}}}}),v.forEach(function(D){D.length=0});for(var C={},E=0;E<f.length;E++){var A=f[E];if(typeof A=="object"){var I=A.tabstopId,O=v[I],F=f.indexOf(A,E+1);if(C[I]){C[I]===A&&(delete C[I],Object.keys(C).forEach(function(D){O.parents[D]=!0}));continue}C[I]=A;var q=O.value;typeof q!="string"?q=l(q):A.fmt&&(q=this.tmStrFormat(q,A,i)),f.splice.apply(f,[E+1,Math.max(0,F-E)].concat(q,A)),O.indexOf(A)===-1&&O.push(A)}}var z=0,K=0,J="";return f.forEach(function(D){if(typeof D=="string"){var V=D.split(`
`);V.length>1?(K=V[V.length-1].length,z+=V.length-1):K+=D.length,J+=D}else D&&(D.start?D.end={row:z,column:K}:D.start={row:z,column:K})}),{text:J,tabstops:v,tokens:f}},R=function(){function i(a){if(this.index=0,this.ranges=[],this.tabstops=[],a.tabstopManager)return a.tabstopManager;a.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=g.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(a)}return i.prototype.attach=function(a){this.$openTabstops=null,this.selectedTabstop=null,this.editor=a,this.session=a.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},i.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},i.prototype.onChange=function(a){for(var r=a.action[0]=="r",l=this.selectedTabstop||{},u=l.parents||{},y=this.tabstops.slice(),x=0;x<y.length;x++){var _=y[x],f=_==l||u[_.index];if(_.rangeList.$bias=f?0:1,a.action=="remove"&&_!==l){var v=_.parents&&_.parents[l.index],C=_.rangeList.pointIndex(a.start,v);C=C<0?-C-1:C+1;var E=_.rangeList.pointIndex(a.end,v);E=E<0?-E-1:E-1;for(var A=_.rangeList.ranges.slice(C,E),I=0;I<A.length;I++)this.removeRange(A[I])}_.rangeList.$onChange(a)}var O=this.session;!this.$inChange&&r&&O.getLength()==1&&!O.getValue()&&this.detach()},i.prototype.updateLinkedFields=function(){var a=this.selectedTabstop;if(!(!a||!a.hasLinkedRanges||!a.firstNonLinked)){this.$inChange=!0;for(var r=this.session,l=r.getTextRange(a.firstNonLinked),u=0;u<a.length;u++){var y=a[u];if(y.linked){var x=y.original,_=o.snippetManager.tmStrFormat(l,x,this.editor);r.replace(y,_)}}this.$inChange=!1}},i.prototype.onAfterExec=function(a){a.command&&!a.command.readOnly&&this.updateLinkedFields()},i.prototype.onChangeSelection=function(){if(this.editor){for(var a=this.editor.selection.lead,r=this.editor.selection.anchor,l=this.editor.selection.isEmpty(),u=0;u<this.ranges.length;u++)if(!this.ranges[u].linked){var y=this.ranges[u].contains(a.row,a.column),x=l||this.ranges[u].contains(r.row,r.column);if(y&&x)return}this.detach()}},i.prototype.onChangeSession=function(){this.detach()},i.prototype.tabNext=function(a){var r=this.tabstops.length,l=this.index+(a||1);l=Math.min(Math.max(l,1),r),l==r&&(l=0),this.selectTabstop(l),this.updateTabstopMarkers(),l===0&&this.detach()},i.prototype.selectTabstop=function(a){this.$openTabstops=null;var r=this.tabstops[this.index];if(r&&this.addTabstopMarkers(r),this.index=a,r=this.tabstops[this.index],!(!r||!r.length)){this.selectedTabstop=r;var l=r.firstNonLinked||r;if(r.choices&&(l.cursor=l.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(l);else{var u=this.editor.multiSelect;u.toSingleRange(l);for(var y=0;y<r.length;y++)r.hasLinkedRanges&&r[y].linked||u.addRange(r[y].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},i.prototype.addTabstops=function(a,r,l){var u=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!a[0]){var y=b.fromPoints(l,l);S(y.start,r),S(y.end,r),a[0]=[y],a[0].index=0}var x=this.index,_=[x+1,0],f=this.ranges,v=this.snippetId=(this.snippetId||0)+1;a.forEach(function(C,E){var A=this.$openTabstops[E]||C;A.snippetId=v;for(var I=0;I<C.length;I++){var O=C[I],F=b.fromPoints(O.start,O.end||O.start);M(F.start,r),M(F.end,r),F.original=O,F.tabstop=A,f.push(F),A!=C?A.unshift(F):A[I]=F,O.fmtString||A.firstNonLinked&&u?(F.linked=!0,A.hasLinkedRanges=!0):A.firstNonLinked||(A.firstNonLinked=F)}A.firstNonLinked||(A.hasLinkedRanges=!1),A===C&&(_.push(A),this.$openTabstops[E]=A),this.addTabstopMarkers(A),A.rangeList=A.rangeList||new $,A.rangeList.$bias=0,A.rangeList.addList(A)},this),_.length>2&&(this.tabstops.length&&_.push(_.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,_))},i.prototype.addTabstopMarkers=function(a){var r=this.session;a.forEach(function(l){l.markerId||(l.markerId=r.addMarker(l,"ace_snippet-marker","text"))})},i.prototype.removeTabstopMarkers=function(a){var r=this.session;a.forEach(function(l){r.removeMarker(l.markerId),l.markerId=null})},i.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var a=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&a--,this.tabstops.forEach(function(r){r.snippetId===a?this.addTabstopMarkers(r):this.removeTabstopMarkers(r)},this)}},i.prototype.removeRange=function(a){var r=a.tabstop.indexOf(a);r!=-1&&a.tabstop.splice(r,1),r=this.ranges.indexOf(a),r!=-1&&this.ranges.splice(r,1),r=a.tabstop.rangeList.ranges.indexOf(a),r!=-1&&a.tabstop.splice(r,1),this.session.removeMarker(a.markerId),a.tabstop.length||(r=this.tabstops.indexOf(a.tabstop),r!=-1&&this.tabstops.splice(r,1),this.tabstops.length||this.detach())},i}();R.prototype.keyboardHandler=new T,R.prototype.keyboardHandler.bindKeys({Tab:function(i){o.snippetManager&&o.snippetManager.expandWithTab(i)||(i.tabstopManager.tabNext(1),i.renderer.scrollCursorIntoView())},"Shift-Tab":function(i){i.tabstopManager.tabNext(-1),i.renderer.scrollCursorIntoView()},Esc:function(i){i.tabstopManager.detach()}});var M=function(i,a){i.row==0&&(i.column+=a.column),i.row+=a.row},S=function(i,a){i.row==a.row&&(i.column-=a.column),i.row-=a.row};h.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),o.snippetManager=new w;var m=t("./editor").Editor;(function(){this.insertSnippet=function(i,a){return o.snippetManager.insertSnippet(this,i,a)},this.expandSnippet=function(i){return o.snippetManager.expandWithTab(this,i)}}).call(m.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(t,o,c){var s=t("../virtual_renderer").VirtualRenderer,h=t("../editor").Editor,p=t("../range").Range,d=t("../lib/event"),g=t("../lib/lang"),b=t("../lib/dom"),$=t("../config").nls,T=t("./../lib/useragent"),L=function(M){return"suggest-aria-id:".concat(M)},P=T.isSafari?"menu":"listbox",B=T.isSafari?"menuitem":"option",w=T.isSafari?"aria-current":"aria-selected",k=function(M){var S=new s(M);S.$maxLines=4;var m=new h(S);return m.setHighlightActiveLine(!1),m.setShowPrintMargin(!1),m.renderer.setShowGutter(!1),m.renderer.setHighlightGutterLine(!1),m.$mouseHandler.$focusTimeout=0,m.$highlightTagPending=!0,m},R=function(){function M(S){var m=b.createElement("div"),i=k(m);S&&S.appendChild(m),m.style.display="none",i.renderer.content.style.cursor="default",i.renderer.setStyle("ace_autocomplete"),i.renderer.$textLayer.element.setAttribute("role",P),i.renderer.$textLayer.element.setAttribute("aria-roledescription",$("Autocomplete suggestions")),i.renderer.$textLayer.element.setAttribute("aria-label",$("Autocomplete suggestions")),i.renderer.textarea.setAttribute("aria-hidden","true"),i.setOption("displayIndentGuides",!1),i.setOption("dragDelay",150);var a=function(){};i.focus=a,i.$isFocused=!0,i.renderer.$cursorLayer.restartTimer=a,i.renderer.$cursorLayer.element.style.opacity="0",i.renderer.$maxLines=8,i.renderer.$keepTextAreaAtCursor=!1,i.setHighlightActiveLine(!1),i.session.highlight(""),i.session.$searchHighlight.clazz="ace_highlight-marker",i.on("mousedown",function(f){var v=f.getDocumentPosition();i.selection.moveToPosition(v),u.start.row=u.end.row=v.row,f.stop()});var r,l=new p(-1,0,-1,1/0),u=new p(-1,0,-1,1/0);u.id=i.session.addMarker(u,"ace_active-line","fullLine"),i.setSelectOnHover=function(f){f?l.id&&(i.session.removeMarker(l.id),l.id=null):l.id=i.session.addMarker(l,"ace_line-hover","fullLine")},i.setSelectOnHover(!1),i.on("mousemove",function(f){if(!r){r=f;return}if(!(r.x==f.x&&r.y==f.y)){r=f,r.scrollTop=i.renderer.scrollTop,i.isMouseOver=!0;var v=r.getDocumentPosition().row;l.start.row!=v&&(l.id||i.setRow(v),x(v))}}),i.renderer.on("beforeRender",function(){if(r&&l.start.row!=-1){r.$pos=null;var f=r.getDocumentPosition().row;l.id||i.setRow(f),x(f,!0)}}),i.renderer.on("afterRender",function(){var f=i.getRow(),v=i.renderer.$textLayer,C=v.element.childNodes[f-v.config.firstRow],E=document.activeElement;if(C!==i.selectedNode&&i.selectedNode&&(b.removeCssClass(i.selectedNode,"ace_selected"),E.removeAttribute("aria-activedescendant"),i.selectedNode.removeAttribute(w),i.selectedNode.removeAttribute("id")),i.selectedNode=C,C){b.addCssClass(C,"ace_selected");var A=L(f);C.id=A,v.element.setAttribute("aria-activedescendant",A),E.setAttribute("aria-activedescendant",A),C.setAttribute("role",B),C.setAttribute("aria-roledescription",$("item")),C.setAttribute("aria-label",i.getData(f).caption||i.getData(f).value),C.setAttribute("aria-setsize",i.data.length),C.setAttribute("aria-posinset",f+1),C.setAttribute("aria-describedby","doc-tooltip"),C.setAttribute(w,"true")}});var y=function(){x(-1)},x=function(f,v){f!==l.start.row&&(l.start.row=l.end.row=f,v||i.session._emit("changeBackMarker"),i._emit("changeHoverMarker"))};i.getHoveredRow=function(){return l.start.row},d.addListener(i.container,"mouseout",function(){i.isMouseOver=!1,y()}),i.on("hide",y),i.on("changeSelection",y),i.session.doc.getLength=function(){return i.data.length},i.session.doc.getLine=function(f){var v=i.data[f];return typeof v=="string"?v:v&&v.value||""};var _=i.session.bgTokenizer;return _.$tokenizeRow=function(f){function v(D,V){D&&E.push({type:(C.className||"")+(V||""),value:D})}var C=i.data[f],E=[];if(!C)return E;typeof C=="string"&&(C={value:C});for(var A=C.caption||C.value||C.name,I=A.toLowerCase(),O=(i.filterText||"").toLowerCase(),F=0,q=0,z=0;z<=O.length;z++)if(z!=q&&(C.matchMask&1<<z||z==O.length)){var K=O.slice(q,z);q=z;var J=I.indexOf(K,F);if(J==-1)continue;v(A.slice(F,J),""),F=J+K.length,v(A.slice(J,F),"completion-highlight")}return v(A.slice(F,A.length),""),E.push({type:"completion-spacer",value:" "}),C.meta&&E.push({type:"completion-meta",value:C.meta}),C.message&&E.push({type:"completion-message",value:C.message}),E},_.$updateOnChange=a,_.start=a,i.session.$computeWidth=function(){return this.screenWidth=0},i.isOpen=!1,i.isTopdown=!1,i.autoSelect=!0,i.filterText="",i.isMouseOver=!1,i.data=[],i.setData=function(f,v){i.filterText=v||"",i.setValue(g.stringRepeat(`
`,f.length),-1),i.data=f||[],i.setRow(0)},i.getData=function(f){return i.data[f]},i.getRow=function(){return u.start.row},i.setRow=function(f){f=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,f)),u.start.row!=f&&(i.selection.clearSelection(),u.start.row=u.end.row=f||0,i.session._emit("changeBackMarker"),i.moveCursorTo(f||0,0),i.isOpen&&i._signal("select"))},i.on("changeSelection",function(){i.isOpen&&i.setRow(i.selection.lead.row),i.renderer.scrollCursorIntoView()}),i.hide=function(){this.container.style.display="none",i.anchorPos=null,i.anchor=null,i.isOpen&&(i.isOpen=!1,this._signal("hide"))},i.tryShow=function(f,v,C,E){if(!E&&i.isOpen&&i.anchorPos&&i.anchor&&i.anchorPos.top===f.top&&i.anchorPos.left===f.left&&i.anchor===C)return!0;var A=this.container,I=window.innerHeight,O=window.innerWidth,F=this.renderer,q=F.$maxLines*v*1.4,z={top:0,bottom:0,left:0},K=I-f.top-3*this.$borderSize-v,J=f.top-3*this.$borderSize;C||(J<=K||K>=q?C="bottom":C="top"),C==="top"?(z.bottom=f.top-this.$borderSize,z.top=z.bottom-q):C==="bottom"&&(z.top=f.top+v+this.$borderSize,z.bottom=z.top+q);var D=z.top>=0&&z.bottom<=I;if(!E&&!D)return!1;D?F.$maxPixelHeight=null:C==="top"?F.$maxPixelHeight=J:F.$maxPixelHeight=K,C==="top"?(A.style.top="",A.style.bottom=I-z.bottom+"px",i.isTopdown=!1):(A.style.top=z.top+"px",A.style.bottom="",i.isTopdown=!0),A.style.display="";var V=f.left;return V+A.offsetWidth>O&&(V=O-A.offsetWidth),A.style.left=V+"px",A.style.right="",i.isOpen||(i.isOpen=!0,this._signal("show"),r=null),i.anchorPos=f,i.anchor=C,!0},i.show=function(f,v,C){this.tryShow(f,v,C?"bottom":void 0,!0)},i.goTo=function(f){var v=this.getRow(),C=this.session.getLength()-1;switch(f){case"up":v=v<=0?C:v-1;break;case"down":v=v>=C?-1:v+1;break;case"start":v=0;break;case"end":v=C}this.setRow(v)},i.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},i.$imageSize=0,i.$borderSize=1,i}return M}();b.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),o.AcePopup=R,o.$singleLineEditor=k,o.getAriaId=L}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(t,o,c){var s=function(){function h(p){this.editor=p,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return h.prototype.setScreenReaderContent=function(p){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",function(){var g=this.popup.getRow(),b=this.popup.renderer.$textLayer,$=b.element.childNodes[g-b.config.firstRow];if($){for(var T="doc-tooltip ",L=0;L<this._lines.length;L++)T+="ace-inline-screenreader-line-".concat(L," ");$.setAttribute("aria-describedby",T)}}.bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=p.split(/\r\n|\r|\n/);var d=this.createCodeBlock();this.screenReaderDiv.appendChild(d)},h.prototype.destroy=function(){this.screenReaderDiv.remove()},h.prototype.createCodeBlock=function(){var p=document.createElement("pre");p.setAttribute("id","ace-inline-screenreader");for(var d=0;d<this._lines.length;d++){var g=document.createElement("code");g.setAttribute("id","ace-inline-screenreader-line-".concat(d));var b=document.createTextNode(this._lines[d]);g.appendChild(b),p.appendChild(g)}return p},h}();o.AceInlineScreenReader=s}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(t,o,c){var s=t("../snippets").snippetManager,h=t("./inline_screenreader").AceInlineScreenReader,p=function(){function d(){this.editor=null}return d.prototype.show=function(g,b,$){if($=$||"",g&&this.editor&&this.editor!==g&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!g||!b)return!1;this.inlineScreenReader||(this.inlineScreenReader=new h(g));var T=b.snippet?s.getDisplayTextForSnippet(g,b.snippet):b.value;return b.hideInlinePreview||!T||!T.startsWith($)?!1:(this.editor=g,this.inlineScreenReader.setScreenReaderContent(T),T=T.slice($.length),T===""?g.removeGhostText():g.setGhostText(T),!0)},d.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},d.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},d.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},d}();o.AceInline=p}),ace.define("ace/autocomplete/util",["require","exports","module"],function(t,o,c){o.parForEach=function(h,p,d){var g=0,b=h.length;b===0&&d();for(var $=0;$<b;$++)p(h[$],function(T,L){g++,g===b&&d(T,L)})};var s=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;o.retrievePrecedingIdentifier=function(h,p,d){d=d||s;for(var g=[],b=p-1;b>=0&&d.test(h[b]);b--)g.push(h[b]);return g.reverse().join("")},o.retrieveFollowingIdentifier=function(h,p,d){d=d||s;for(var g=[],b=p;b<h.length&&d.test(h[b]);b++)g.push(h[b]);return g},o.getCompletionPrefix=function(h){var p=h.getCursorPosition(),d=h.session.getLine(p.row),g;return h.completers.forEach(function(b){b.identifierRegexps&&b.identifierRegexps.forEach(function($){!g&&$&&(g=this.retrievePrecedingIdentifier(d,p.column,$))}.bind(this))}.bind(this)),g||this.retrievePrecedingIdentifier(d,p.column)},o.triggerAutocomplete=function(h,d){var d=d==null?h.session.getPrecedingCharacter():d;return h.completers.some(function(g){if(g.triggerCharacters&&Array.isArray(g.triggerCharacters))return g.triggerCharacters.includes(d)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(t,o,c){var s=t("./keyboard/hash_handler").HashHandler,h=t("./autocomplete/popup").AcePopup,p=t("./autocomplete/inline").AceInline,d=t("./autocomplete/popup").getAriaId,g=t("./autocomplete/util"),b=t("./lib/lang"),$=t("./lib/dom"),T=t("./snippets").snippetManager,L=t("./config"),P=t("./lib/event"),B=t("./lib/scroll").preventParentScroll,w=function(S,m){m.completer&&m.completer.destroy()},k=function(){function S(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new s,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=b.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=b.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=b.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=b.delayedCall(function(){this.stickySelection=!0}.bind(this),this.stickySelectionDelay),this.$firstOpenTimer=b.delayedCall(function(){var m=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!m||this.editor.completers.length===0||(this.completions=new M(S.completionsForLoading),this.openPopup(this.editor,m.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}.bind(this),this.stickySelectionDelay)}return Object.defineProperty(S,"completionsForLoading",{get:function(){return[{caption:L.nls("Loading..."),value:""}]},enumerable:!1,configurable:!0}),S.prototype.$init=function(){return this.popup=new h(this.parentNode||document.body||document.documentElement),this.popup.on("click",function(m){this.insertMatch(),m.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),P.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},S.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new p,this.inlineRenderer},S.prototype.getPopup=function(){return this.popup||this.$init()},S.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},S.prototype.$seen=function(m){!this.hasSeen.has(m)&&m&&m.completer&&m.completer.onSeen&&typeof m.completer.onSeen=="function"&&(m.completer.onSeen(this.editor,m),this.hasSeen.add(m))},S.prototype.$onPopupChange=function(m){if(this.inlineRenderer&&this.inlineEnabled){var i=m?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(i),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},S.prototype.$updateGhostText=function(m){var i=this.base.row,a=this.base.column,r=this.editor.getCursorPosition().column,l=this.editor.session.getLine(i).slice(a,r);this.inlineRenderer.show(this.editor,m,l)?this.$seen(m):this.inlineRenderer.hide()},S.prototype.$onPopupRender=function(){var m=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var i=this.popup.getFirstVisibleRow();i<=this.popup.getLastVisibleRow();i++){var a=this.popup.getData(i);a&&(!m||a.hideInlinePreview)&&this.$seen(a)}},S.prototype.$onPopupShow=function(m){this.$onPopupChange(m),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},S.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var m=this.editor.container.parentNode,i=[];m;)i.push(m),m.addEventListener("scroll",this.onLayoutChange,{passive:!0}),m=m.parentNode;this.$elements=i}},S.prototype.unObserveLayoutChanges=function(){var m=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(i){i.removeEventListener("scroll",m.onLayoutChange,{passive:!0})}),this.$elements=null},S.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},S.prototype.$updatePopupPosition=function(){var m=this.editor,i=m.renderer,a=i.layerConfig.lineHeight,r=i.$cursorLayer.getPixelPosition(this.base,!0);r.left-=this.popup.getTextLeftOffset();var l=m.container.getBoundingClientRect();r.top+=l.top-i.layerConfig.offset,r.left+=l.left-m.renderer.scrollLeft,r.left+=i.gutterWidth;var u={top:r.top,left:r.left};i.$ghostText&&i.$ghostTextWidget&&this.base.row===i.$ghostText.position.row&&(u.top+=i.$ghostTextWidget.el.offsetHeight);var y=m.container.getBoundingClientRect().bottom-a,x=y<u.top?{top:y,left:u.left}:u;this.popup.tryShow(x,a,"bottom")||this.popup.tryShow(r,a,"top")||this.popup.show(r,a)},S.prototype.openPopup=function(m,i,a){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var r=this.popup.getRow(),l=this.popup.data[r];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:d(this.popup.getRow()),inline:this.inlineEnabled}),m.keyBinding.addKeyboardHandler(this.keyboardHandler);var u;this.stickySelection&&(u=this.popup.data.indexOf(l)),(!u||u===-1)&&(u=0),this.popup.setRow(this.autoSelect?u:-1),u===r&&l!==this.completions.filtered[u]&&this.$onPopupChange();var y=this.inlineRenderer&&this.inlineEnabled;if(u===r&&y){var x=this.popup.getData(this.popup.getRow());this.$updateGhostText(x)}a||(this.popup.setTheme(m.getTheme()),this.popup.setFontSize(m.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},S.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},S.prototype.changeListener=function(m){var i=this.editor.selection.lead;(i.row!=this.base.row||i.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},S.prototype.blurListener=function(m){var i=document.activeElement,a=this.editor.textInput.getElement(),r=m.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(m.relatedTarget),l=this.popup&&this.popup.container;i!=a&&i.parentNode!=l&&!r&&i!=this.tooltipNode&&m.relatedTarget!=a&&this.detach()},S.prototype.mousedownListener=function(m){this.detach()},S.prototype.mousewheelListener=function(m){this.popup.isMouseOver||this.detach()},S.prototype.mouseOutListener=function(m){this.popup.isOpen&&this.$updatePopupPosition()},S.prototype.goTo=function(m){this.popup.goTo(m)},S.prototype.insertMatch=function(m,i){if(m||(m=this.popup.getData(this.popup.getRow())),!m)return!1;if(m.value==="")return this.detach();var a=this.completions,r=this.getCompletionProvider().insertMatch(this.editor,m,a.filterText,i);return this.completions==a&&this.detach(),r},S.prototype.showPopup=function(m,i){this.editor&&this.detach(),this.activated=!0,this.editor=m,m.completer!=this&&(m.completer&&m.completer.detach(),m.completer=this),m.on("changeSelection",this.changeListener),m.on("blur",this.blurListener),m.on("mousedown",this.mousedownListener),m.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,i)},S.prototype.getCompletionProvider=function(m){return this.completionProvider||(this.completionProvider=new R(m)),this.completionProvider},S.prototype.gatherCompletions=function(m,i){return this.getCompletionProvider().gatherCompletions(m,i)},S.prototype.updateCompletions=function(m,i){if(m&&this.base&&this.completions){var r=this.editor.getCursorPosition(),l=this.editor.session.getTextRange({start:this.base,end:r});if(l==this.completions.filterText)return;if(this.completions.setFilter(l),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==l&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,l,m);return}if(i&&i.matches){var r=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(r.row,r.column),this.base.$insertRight=!0,this.completions=new M(i.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",m)}var a=this.editor.getSession(),r=this.editor.getCursorPosition(),l=g.getCompletionPrefix(this.editor);this.base=a.doc.createAnchor(r.row,r.column-l.length),this.base.$insertRight=!0;var u={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:l,pos:r}).provideCompletions(this.editor,u,function(y,x,_){var f=x.filtered,v=g.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),_){if(!f.length){var C=!this.autoShown&&this.emptyMessage;if(typeof C=="function"&&(C=this.emptyMessage(v)),C){var E=[{caption:C,value:""}];this.completions=new M(E),this.openPopup(this.editor,v,m),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(f.length==1&&f[0].value==v&&!f[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&f.length==1)return this.insertMatch(f[0])}this.completions=!_&&this.showLoadingState?new M(S.completionsForLoading.concat(f),x.filterText):x,this.openPopup(this.editor,v,m),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!_)}.bind(this)),this.showLoadingState&&!this.autoShown&&(!this.popup||!this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},S.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},S.prototype.updateDocTooltip=function(){var m=this.popup,i=this.completions.filtered,a=i&&(i[m.getHoveredRow()]||i[m.getRow()]),r=null;if(!a||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var l=this.editor.completers.length,u=0;u<l;u++){var y=this.editor.completers[u];if(y.getDocTooltip&&a.completerId===y.id){r=y.getDocTooltip(a);break}}if(!r&&typeof a!="string"&&(r=a),typeof r=="string"&&(r={docText:r}),!r||!r.docHTML&&!r.docText)return this.hideDocTooltip();this.showDocTooltip(r)},S.prototype.showDocTooltip=function(m){this.tooltipNode||(this.tooltipNode=$.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",B));var i=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(i.isDark?"ace_dark ":"")+(i.cssClass||"");var a=this.tooltipNode;m.docHTML?a.innerHTML=m.docHTML:m.docText&&(a.textContent=m.docText),a.parentNode||this.popup.container.appendChild(this.tooltipNode);var r=this.popup,l=r.container.getBoundingClientRect();a.style.top=r.container.style.top,a.style.bottom=r.container.style.bottom,a.style.display="block",window.innerWidth-l.right<320?l.left<320?r.isTopdown?(a.style.top=l.bottom+"px",a.style.left=l.left+"px",a.style.right="",a.style.bottom=""):(a.style.top=r.container.offsetTop-a.offsetHeight+"px",a.style.left=l.left+"px",a.style.right="",a.style.bottom=""):(a.style.right=window.innerWidth-l.left+"px",a.style.left=""):(a.style.left=l.right+1+"px",a.style.right="")},S.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var m=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==m&&this.editor.focus(),this.tooltipNode=null,m.parentNode&&m.parentNode.removeChild(m)}},S.prototype.onTooltipClick=function(m){for(var i=m.target;i&&i!=this.tooltipNode;){if(i.nodeName=="A"&&i.href){i.rel="noreferrer",i.target="_blank";break}i=i.parentNode}},S.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var m=this.popup.container;m&&m.parentNode&&m.parentNode.removeChild(m)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",w),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},S}();k.prototype.commands={Up:function(S){S.completer.goTo("up")},Down:function(S){S.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(S){S.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(S){S.completer.goTo("end")},Esc:function(S){S.completer.detach()},Return:function(S){return S.completer.insertMatch()},"Shift-Return":function(S){S.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(S){var m=S.completer.insertMatch();if(m||S.tabstopManager)return m;S.completer.goTo("down")},Backspace:function(S){S.execCommand("backspace");var m=g.getCompletionPrefix(S);!m&&S.completer&&S.completer.detach()},PageUp:function(S){S.completer.popup.gotoPageUp()},PageDown:function(S){S.completer.popup.gotoPageDown()}},k.for=function(S){return S.completer instanceof k||(S.completer&&(S.completer.destroy(),S.completer=null),L.get("sharedPopups")?(k.$sharedInstance||(k.$sharedInstance=new k),S.completer=k.$sharedInstance):(S.completer=new k,S.once("destroy",w))),S.completer},k.startCommand={name:"startAutocomplete",exec:function(S,m){var i=k.for(S);i.autoInsert=!1,i.autoSelect=!0,i.autoShown=!1,i.showPopup(S,m),i.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var R=function(){function S(m){this.initialPosition=m,this.active=!0}return S.prototype.insertByIndex=function(m,i,a){return!this.completions||!this.completions.filtered?!1:this.insertMatch(m,this.completions.filtered[i],a)},S.prototype.insertMatch=function(m,i,a){if(!i)return!1;if(m.startOperation({command:{name:"insertMatch"}}),i.completer&&i.completer.insertMatch)i.completer.insertMatch(m,i);else{if(!this.completions)return!1;var r=this.completions.filterText.length,l=0;if(i.range&&i.range.start.row===i.range.end.row&&(r-=this.initialPosition.prefix.length,r+=this.initialPosition.pos.column-i.range.start.column,l+=i.range.end.column-this.initialPosition.pos.column),r||l){var u;m.selection.getAllRanges?u=m.selection.getAllRanges():u=[m.getSelectionRange()];for(var y=0,x;x=u[y];y++)x.start.column-=r,x.end.column+=l,m.session.remove(x)}i.snippet?T.insertSnippet(m,i.snippet):this.$insertString(m,i),i.completer&&i.completer.onInsert&&typeof i.completer.onInsert=="function"&&i.completer.onInsert(m,i),i.command&&i.command==="startAutocomplete"&&m.execCommand(i.command)}return m.endOperation(),!0},S.prototype.$insertString=function(m,i){var a=i.value||i;m.execCommand("insertstring",a)},S.prototype.gatherCompletions=function(m,i){var a=m.getSession(),r=m.getCursorPosition(),l=g.getCompletionPrefix(m),u=[];this.completers=m.completers;var y=m.completers.length;return m.completers.forEach(function(x,_){x.getCompletions(m,a,r,l,function(f,v){x.hideInlinePreview&&(v=v.map(function(C){return Object.assign(C,{hideInlinePreview:x.hideInlinePreview})})),!f&&v&&(u=u.concat(v)),i(null,{prefix:g.getCompletionPrefix(m),matches:u,finished:--y===0})})}),!0},S.prototype.provideCompletions=function(m,i,a){var r=function(x){var _=x.prefix,f=x.matches;this.completions=new M(f),i.exactMatch&&(this.completions.exactMatch=!0),i.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(_),(x.finished||this.completions.filtered.length)&&a(null,this.completions,x.finished)}.bind(this),l=!0,u=null;if(this.gatherCompletions(m,function(x,_){if(this.active){x&&(a(x,[],!0),this.detach());var f=_.prefix;if(f.indexOf(_.prefix)===0){if(l){u=_;return}r(_)}}}.bind(this)),l=!1,u){var y=u;u=null,r(y)}},S.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(m){typeof m.cancel=="function"&&m.cancel()})},S}(),M=function(){function S(m,i){this.all=m,this.filtered=m,this.filterText=i||"",this.exactMatch=!1,this.ignoreCaption=!1}return S.prototype.setFilter=function(m){if(m.length>this.filterText&&m.lastIndexOf(this.filterText,0)===0)var i=this.filtered;else var i=this.all;this.filterText=m,i=this.filterCompletions(i,this.filterText),i=i.sort(function(r,l){return l.exactMatch-r.exactMatch||l.$score-r.$score||(r.caption||r.value).localeCompare(l.caption||l.value)});var a=null;i=i.filter(function(r){var l=r.snippet||r.caption||r.value;return l===a?!1:(a=l,!0)}),this.filtered=i},S.prototype.filterCompletions=function(m,i){var a=[],r=i.toUpperCase(),l=i.toLowerCase();e:for(var u=0,y;y=m[u];u++){var x=!this.ignoreCaption&&y.caption||y.value||y.snippet;if(x){var _=-1,f=0,v=0,C,E;if(this.exactMatch){if(i!==x.substr(0,i.length))continue e}else{var A=x.toLowerCase().indexOf(l);if(A>-1)v=A;else for(var I=0;I<i.length;I++){var O=x.indexOf(l[I],_+1),F=x.indexOf(r[I],_+1);if(C=O>=0&&(F<0||O<F)?O:F,C<0)continue e;E=C-_-1,E>0&&(_===-1&&(v+=10),v+=E,f|=1<<I),_=C}}y.matchMask=f,y.exactMatch=v?0:1,y.$score=(y.score||0)-v,a.push(y)}}return a},S}();o.Autocomplete=k,o.CompletionProvider=R,o.FilteredList=M}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(t,o,c){function s(g,b){var $=g.getTextRange(p.fromPoints({row:0,column:0},b));return $.split(d).length-1}function h(g,b){var $=s(g,b),T=g.getValue().split(d),L=Object.create(null),P=T[$];return T.forEach(function(B,w){if(!(!B||B===P)){var k=Math.abs($-w),R=T.length-k;L[B]?L[B]=Math.max(R,L[B]):L[B]=R}}),L}var p=t("../range").Range,d=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;o.getCompletions=function(g,b,$,T,L){var P=h(b,$),B=Object.keys(P);L(null,B.map(function(w){return{caption:w,value:w,score:P[w],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(t,o,c){var s=t("../snippets").snippetManager,h=t("../autocomplete").Autocomplete,p=t("../config"),d=t("../lib/lang"),g=t("../autocomplete/util"),b=t("../autocomplete/text_completer"),$={getCompletions:function(r,l,u,y,x){if(l.$mode.completer)return l.$mode.completer.getCompletions(r,l,u,y,x);var _=r.session.getState(u.row),f=l.$mode.getCompletions(_,l,u,y);f=f.map(function(v){return v.completerId=$.id,v}),x(null,f)},id:"keywordCompleter"},T=function(r){var l={};return r.replace(/\${(\d+)(:(.*?))?}/g,function(u,y,x,_){return l[y]=_||""}).replace(/\$(\d+?)/g,function(u,y){return l[y]})},L={getCompletions:function(r,l,u,y,x){var _=[],f=l.getTokenAt(u.row,u.column);f&&f.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?_.push("html-tag"):_=s.getActiveScopes(r);var v=s.snippetMap,C=[];_.forEach(function(E){for(var A=v[E]||[],I=A.length;I--;){var O=A[I],F=O.name||O.tabTrigger;F&&C.push({caption:F,snippet:O.content,meta:O.tabTrigger&&!O.name?O.tabTrigger+"⇥ ":"snippet",completerId:L.id})}},this),x(null,C)},getDocTooltip:function(r){r.snippet&&!r.docHTML&&(r.docHTML=["<b>",d.escapeHTML(r.caption),"</b>","<hr></hr>",d.escapeHTML(T(r.snippet))].join(""))},id:"snippetCompleter"},P=[L,b,$];o.setCompleters=function(r){P.length=0,r&&P.push.apply(P,r)},o.addCompleter=function(r){P.push(r)},o.textCompleter=b,o.keyWordCompleter=$,o.snippetCompleter=L;var B={name:"expandSnippet",exec:function(r){return s.expandWithTab(r)},bindKey:"Tab"},w=function(r,l){k(l.session.$mode)},k=function(r){typeof r=="string"&&(r=p.$modes[r]),r&&(s.files||(s.files={}),R(r.$id,r.snippetFileId),r.modes&&r.modes.forEach(k))},R=function(r,l){!l||!r||s.files[r]||(s.files[r]={},p.loadModule(l,function(u){u&&(s.files[r]=u,!u.snippets&&u.snippetText&&(u.snippets=s.parseSnippetFile(u.snippetText)),s.register(u.snippets||[],u.scope),u.includeScopes&&(s.snippetMap[u.scope].includeScopes=u.includeScopes,u.includeScopes.forEach(function(y){k("ace/mode/"+y)})))}))},M=function(r){var l=r.editor,u=l.completer&&l.completer.activated;if(r.command.name==="backspace")u&&!g.getCompletionPrefix(l)&&l.completer.detach();else if(r.command.name==="insertstring"&&!u){S=r;var y=r.editor.$liveAutocompletionDelay;y?m.delay(y):i(r)}},S,m=d.delayedCall(function(){i(S)},0),i=function(r){var l=r.editor,u=g.getCompletionPrefix(l),y=r.args,x=g.triggerAutocomplete(l,y);if(u&&u.length>=l.$liveAutocompletionThreshold||x){var _=h.for(l);_.autoShown=!0,_.showPopup(l)}},a=t("../editor").Editor;t("../config").defineOptions(a.prototype,"editor",{enableBasicAutocompletion:{set:function(r){r?(this.completers||(this.completers=Array.isArray(r)?r:P),this.commands.addCommand(h.startCommand)):this.commands.removeCommand(h.startCommand)},value:!1},enableLiveAutocompletion:{set:function(r){r?(this.completers||(this.completers=Array.isArray(r)?r:P),this.commands.on("afterExec",M)):this.commands.off("afterExec",M)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(r){r?(this.commands.addCommand(B),this.on("changeMode",w),w(null,this)):(this.commands.removeCommand(B),this.off("changeMode",w))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(t){e&&(e.exports=t)})}()})(bi);var _i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"ace"},[t("div",{staticClass:"header"},[t("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search"},on:{click:e.openSearchBox}},[e._v(" 查找 ")]),t("el-button",{staticClass:"btn",attrs:{icon:"el-icon-close"},on:{click:e.closeEditor}},[e._v(" 关闭 ")])],1),t("div",{staticClass:"ace-editor"},[t("div",{ref:"ace",staticClass:"editor"})]),t("div",{staticClass:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.setCode}},[e._v(" 重置代码 ")]),t("el-button",{attrs:{type:"success"},on:{click:e.getCode}},[e._v(" 保存提交 ")])],1)])},yi=[];const xi={name:"AceEditor",data(){return{editor:null,obj:null}},computed:Y(["canvasStyleData","curComponent"]),watch:{curComponent(){this.setCode()},canvasStyleData(){this.setCode()}},mounted(){Re.config.set("basePath","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.14/"),this.editor=Re.edit(this.$refs.ace,{maxLines:40,minLines:40,fontSize:14,theme:"ace/theme/one_dark",mode:"ace/mode/json5",tabSize:4,readOnly:!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0}),this.obj=this.curComponent||this.canvasStyleData,this.editor.setValue(JSON.stringify(this.obj,null,4))},methods:{setCode(){this.obj=this.curComponent||this.canvasStyleData,this.editor.setValue(JSON.stringify(this.obj,null,4))},getCode(){let e=this.editor.getValue();this.curComponent?this.$store.commit("aceSetcurComponent",JSON.parse(e)):this.$store.commit("aceSetCanvasData",JSON.parse(e))},updateEditorTheme(e){this.editor.setTheme(e)},openSearchBox(){this.editor.execCommand("find")},closeEditor(){this.$emit("closeEditor")}}},Je={};var Si=j(xi,_i,yi,!1,wi,"25aa4ef4",null,null);function wi(e){for(let n in Je)this[n]=Je[n]}const At=function(){return Si.exports}(),Ci=["top","left","width","height","fontSize"];function $i(e){const n=xe(ee.state.componentData);n.forEach(t=>{Object.keys(t.style).forEach(o=>{if(Ci.includes(o)){if(o==="fontSize"&&t.style[o]==="")return;t.style[o]=Et(Ai(t.style[o],ee.state.canvasStyleData.scale),e)}})}),ee.commit("setComponentData",n),ee.commit("setCurComponent",{component:n[ee.state.curComponentIndex],index:ee.state.curComponentIndex}),ee.commit("setCanvasStyle",ie(ne({},ee.state.canvasStyleData),{scale:e}))}const ki=["width","height","fontSize"];function Rt(e){Object.keys(e.style).forEach(n=>{if(ki.includes(n)){if(n==="fontSize"&&e.style[n]==="")return;e.style[n]=Et(e.style[n],ee.state.canvasStyleData.scale)}})}function Et(e,n){return zt(e,ve(parseFloat(n),100))}function Ai(e,n){return ve(e,ve(parseFloat(n),100))}var Ri=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{class:e.isDarkMode?"dark toolbar":"toolbar"},[t("el-button",{attrs:{size:"mini"},on:{click:e.onAceEditorChange}},[e._v("JSON")]),t("el-button",{attrs:{size:"mini"},on:{click:e.onImportJSON}},[e._v("导入")]),t("el-button",{attrs:{size:"mini"},on:{click:e.onExportJSON}},[e._v("导出")]),t("el-button",{attrs:{size:"mini"},on:{click:e.undo}},[e._v("撤消")]),t("el-button",{attrs:{size:"mini"},on:{click:e.redo}},[e._v("重做")]),t("label",{staticClass:"insert",attrs:{for:"input"}},[e._v(" 插入图片 "),t("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:e.handleFileChange}})]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:function(o){return e.preview(!1)}}},[e._v("预览")]),t("el-button",{attrs:{size:"mini"},on:{click:e.save}},[e._v("保存")]),t("el-button",{attrs:{size:"mini"},on:{click:e.clearCanvas}},[e._v("清空画布")]),t("el-button",{attrs:{size:"mini",disabled:!e.areaData.components.length},on:{click:e.compose}},[e._v("组合")]),t("el-button",{attrs:{size:"mini",disabled:!e.curComponent||e.curComponent.isLock||e.curComponent.component!="Group"},on:{click:e.decompose}},[e._v(" 拆分 ")]),t("el-button",{attrs:{size:"mini",disabled:!e.curComponent||e.curComponent.isLock},on:{click:e.lock}},[e._v("锁定")]),t("el-button",{attrs:{size:"mini",disabled:!e.curComponent||!e.curComponent.isLock},on:{click:e.unlock}},[e._v("解锁")]),t("el-button",{attrs:{size:"mini"},on:{click:function(o){return e.preview(!0)}}},[e._v("截图")]),t("div",{staticClass:"canvas-config"},[t("span",[e._v("画布大小")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:e.canvasStyleData.width},on:{input:function(o){o.target.composing||e.$set(e.canvasStyleData,"width",o.target.value)}}}),t("span",[e._v("*")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:e.canvasStyleData.height},on:{input:function(o){o.target.composing||e.$set(e.canvasStyleData,"height",o.target.value)}}})]),t("div",{staticClass:"canvas-config"},[t("span",[e._v("画布比例")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.scale,expression:"scale"}],domProps:{value:e.scale},on:{input:[function(o){o.target.composing||(e.scale=o.target.value)},e.handleScaleChange]}}),e._v(" % ")]),t("el-switch",{staticClass:"dark-mode-switch",attrs:{"active-icon-class":"el-icon-sunny","inactive-icon-class":"el-icon-moon","active-color":"#000"},on:{change:e.handleToggleDarkMode},model:{value:e.switchValue,callback:function(o){e.switchValue=o},expression:"switchValue"}})],1),e.isShowPreview?t(kt,{attrs:{"is-screenshot":e.isScreenshot},on:{close:e.handlePreviewChange}}):e._e(),e.isShowAceEditor?t(At,{on:{closeEditor:e.closeEditor}}):e._e(),t("el-dialog",{attrs:{title:e.isExport?"导出数据":"导入数据",visible:e.isShowDialog,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"600"},on:{"update:visible":function(o){e.isShowDialog=o}}},[t("el-input",{attrs:{type:"textarea",rows:20,size:"small",placeholder:"请输入 JSON 数据"},model:{value:e.jsonData,callback:function(o){e.jsonData=o},expression:"jsonData"}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.isShowDialog=!1}}},[e._v("取 消")]),t("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.isExport,expression:"!isExport"}],attrs:{action:"/","before-upload":e.beforeUpload,"show-file-list":!1,accept:"application/json"}},[t("el-button",{attrs:{type:"primary"}},[e._v("选择 JSON 文件")])],1),t("el-button",{attrs:{type:"primary"},on:{click:e.processJSON}},[e._v("确 定")])],1)],1)],1)},Ei=[];const Ti={components:{Preview:kt,AceEditor:At},data(){return{isShowPreview:!1,isShowAceEditor:!1,timer:null,isScreenshot:!1,scale:100,switchValue:!1,isShowDialog:!1,jsonData:"",isExport:!1}},computed:Y(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex","isDarkMode"]),created(){W.$on("preview",this.preview),W.$on("save",this.save),W.$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale;const e=JSON.parse(localStorage.getItem("isDarkMode"));e&&this.handleToggleDarkMode(e)},methods:{handleToggleDarkMode(e){e!==null&&(this.$store.commit("toggleDarkMode",e),this.switchValue=e)},handleScaleChange(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.scale=~~this.scale||1,$i(this.scale)},1e3)},onAceEditorChange(){this.isShowAceEditor=!this.isShowAceEditor},closeEditor(){this.onAceEditorChange()},lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},compose(){this.$store.commit("compose"),this.$store.commit("recordSnapshot")},decompose(){this.$store.commit("decompose"),this.$store.commit("recordSnapshot")},undo(){this.$store.commit("undo")},redo(){this.$store.commit("redo")},handleFileChange(e){const n=e.target.files[0];if(!n.type.includes("image")){Ut("只能插入图片");return}const t=new FileReader;t.onload=o=>{const c=o.target.result,s=new Image;s.onload=()=>{const h=ie(ne({},jt),{id:at(),component:"Picture",label:"图片",icon:"tupian",supportAi:!0,propValue:{url:c,flip:{horizontal:!1,vertical:!1}},style:ie(ne({},Vt),{top:0,left:0,width:s.width,height:s.height,url:""})});Rt(h),this.$store.commit("addComponent",{component:h}),this.$store.commit("recordSnapshot"),ge("#input").setAttribute("type","text"),ge("#input").setAttribute("type","file")},s.src=c},t.readAsDataURL(n)},preview(e){this.isScreenshot=e,this.isShowPreview=!0,this.$store.commit("setEditMode","preview")},save(){localStorage.setItem("canvasData",JSON.stringify(this.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(this.canvasStyleData)),this.$message.success("保存成功")},clearCanvas(){this.$store.commit("setCurComponent",{component:null,index:null}),this.$store.commit("setComponentData",[]),this.$store.commit("recordSnapshot")},handlePreviewChange(){this.isShowPreview=!1,this.$store.commit("setEditMode","edit")},onImportJSON(){this.jsonData="",this.isExport=!1,this.isShowDialog=!0},processJSON(){try{const e=JSON.parse(this.jsonData);if(!Array.isArray(e)){this.$message.error("数据格式错误，组件数据必须是一个数组");return}this.isExport?this.downloadFileUtil(this.jsonData,"application/json","data.json"):this.$store.commit("setComponentData",e),this.isShowDialog=!1}catch(e){this.$message.error("数据格式错误，请传入合法的 JSON 格式数据")}},onExportJSON(){this.isShowDialog=!0,this.isExport=!0,this.jsonData=JSON.stringify(this.componentData,null,4)},downloadFileUtil(e,n,t=""){const o=window.URL.createObjectURL(new Blob([e],{type:n})),c=document.createElement("a");c.style.display="none",c.href=o,c.setAttribute("download",t),document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)},beforeUpload(e){const n=new FileReader;n.readAsText(e);const t=this;return n.onload=function(){t.jsonData=this.result},!1}}},Qe={};var Li=j(Ti,Ri,Ei,!1,Mi,"ed2132ce",null,null);function Mi(e){for(let n in Qe)this[n]=Qe[n]}const Tt=function(){return Li.exports}();var Ii=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"real-time-component-list"},e._l(e.componentData,function(o,c){return t("div",{key:c,staticClass:"list",class:{actived:e.transformIndex(c)===e.curComponentIndex},on:{click:function(s){e.onClick(e.transformIndex(c))}}},[t("span",{staticClass:"iconfont",class:"icon-"+e.getComponent(c).icon}),t("span",[e._v(e._s(e.getComponent(c).label))]),t("div",{staticClass:"icon-container"},[t("span",{staticClass:"iconfont icon-shangyi",on:{click:function(s){e.upComponent(e.transformIndex(c))}}}),t("span",{staticClass:"iconfont icon-xiayi",on:{click:function(s){e.downComponent(e.transformIndex(c))}}}),t("span",{staticClass:"iconfont icon-shanchu",on:{click:function(s){e.deleteComponent(e.transformIndex(c))}}})])])}),0)},Oi=[];const Di={computed:Y(["componentData","curComponent","curComponentIndex"]),methods:{getComponent(e){return this.componentData[this.componentData.length-1-e]},transformIndex(e){return this.componentData.length-1-e},onClick(e){this.$store.state.rightList||this.$store.commit("isShowRightList"),this.setCurComponent(e)},deleteComponent(){setTimeout(()=>{this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")})},upComponent(){setTimeout(()=>{this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")})},downComponent(){setTimeout(()=>{this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")})},setCurComponent(e){this.$store.commit("setCurComponent",{component:this.componentData[e],index:e})}}},Ze={};var Pi=j(Di,Ii,Oi,!1,Ni,"7aa5412a",null,null);function Ni(e){for(let n in Ze)this[n]=Ze[n]}const Lt=function(){return Pi.exports}();var Fi=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"attr-container"},[t("p",{staticClass:"title"},[e._v("画布属性")]),t("el-form",{staticStyle:{padding:"20px"}},e._l(Object.keys(e.options),function(o,c){return t("el-form-item",{key:c,attrs:{label:e.options[o]}},[e.isIncludesColor(o)?t("el-color-picker",{attrs:{"show-alpha":""},model:{value:e.canvasStyleData[o],callback:function(s){e.$set(e.canvasStyleData,o,s)},expression:"canvasStyleData[key]"}}):t("el-input",{attrs:{size:"small",type:"number"},model:{value:e.canvasStyleData[o],callback:function(s){e.$set(e.canvasStyleData,o,e._n(s))},expression:"canvasStyleData[key]"}})],1)}),1)],1)},Bi=[];const Hi={data(){return{options:{color:"颜色",opacity:"不透明度",backgroundColor:"背景色",fontSize:"字体大小"}}},computed:Y(["canvasStyleData"]),methods:{isIncludesColor(e){return e.toLowerCase().includes("color")}}},et={};var zi=j(Hi,Fi,Bi,!1,Ui,null,null,null);function Ui(e){for(let n in et)this[n]=et[n]}const Mt=function(){return zi.exports}();var ji=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"main-body"},[t("div",{class:e.isDarkMode?"home dark":"home"},[t(Tt),t("main",[t("section",{class:e.leftList?"left active":"left inactive"},[t(mt),t(Lt)],1),t("el-button",{staticClass:"btn show-list left-btn",attrs:{title:"show-list-btn",icon:e.leftList?"el-icon-arrow-left":"el-icon-arrow-right"},on:{click:e.isShowLeft}}),t("section",{staticClass:"center",style:e.rightList?"margin-right:288px":"margin-right:10px"},[t("div",{staticClass:"content",on:{drop:e.handleDrop,dragover:e.handleDragOver,mousedown:e.handleMouseDown,mouseup:e.deselectCurComponent}},[t(dt)],1)]),t("section",{class:e.rightList?"right active":"right inactive"},[e.curComponent?t("el-tabs",{model:{value:e.activeName,callback:function(o){e.activeName=o},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"属性",name:"attr"}},[t(e.curComponent.component+"Attr",{tag:"component"})],1),e.curComponent.supportAi?t("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"AI绘图",name:"ai"}},[t(vt)],1):e._e()],1):t(Mt)],1),t("el-button",{staticClass:"btn show-list right-btn",attrs:{title:"show-list-btn",icon:e.rightList?"el-icon-arrow-right":"el-icon-arrow-left"},on:{click:e.isShowRight}})],1)],1)])},Vi=[];const Wi={components:{Editor:dt,ComponentList:mt,AnimationList:eo,EventList:co,AiDraw:vt,Toolbar:Tt,RealTimeComponentList:Lt,CanvasAttr:Mt},data(){return{activeName:"attr",reSelectAnimateIndex:void 0,leftList:!0}},computed:Y(["componentData","curComponent","isClickComponent","canvasStyleData","editor","rightList","isDarkMode"]),created(){this.restore(),qt();const e=localStorage.getItem("isDarkMode");e!==null?this.$store.commit("toggleDarkMode",JSON.parse(e)):this.$store.isDarkMode=!1},methods:{restore(){localStorage.getItem("canvasData")&&(Wt(JSON.parse(localStorage.getItem("canvasData"))),this.$store.commit("setComponentData",JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&this.$store.commit("setCanvasStyle",JSON.parse(localStorage.getItem("canvasStyle")))},handleDrop(e){e.preventDefault(),e.stopPropagation();const n=e.dataTransfer.getData("index"),t=this.editor.getBoundingClientRect();if(n){const o=xe(st[n]);o.style.top=e.clientY-t.y,o.style.left=e.clientX-t.x,o.id=at(),Rt(o),this.$store.commit("addComponent",{component:o}),this.$store.commit("recordSnapshot")}},handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleMouseDown(e){e.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent(e){this.isClickComponent||this.$store.commit("setCurComponent",{component:null,index:null}),e.button!=2&&this.$store.commit("hideContextMenu")},isShowLeft(){let e=!this.leftList;this.leftList=e},isShowRight(){this.$store.commit("isShowRightList")}}},tt={};var qi=j(Wi,ji,Vi,!1,Xi,null,null,null);function Xi(e){for(let n in tt)this[n]=tt[n]}const Zi=function(){return qi.exports}();export{Zi as default};
